[build-system]
requires = ["setuptools>=61","wheel","setuptools-git-versioning<2"]
build-backend = "setuptools.build_meta"

[tool.setuptools-git-versioning]
enabled = true

[project]
name = "waylay-ml-adapter-torch"
description = "ML_adapter for torch."
requires-python = ">=3.9"
authors = [{name = "Waylay"}]
dependencies = [
  "waylay-ml-adapter-api",
  "waylay-ml-adapter-base",
  "waylay-ml-adapter-numpy",
  "torch"
]
dynamic = ["version"]

[project.optional-dependencies]
torchvision = [ "torchvision" ]
torchaudio = [ "torchaudio" ]
dev = [
  "waylay-ml-adapter-devtools",
  "torchaudio",
  "soundfile",
  "deep_phonemizer"
]

[tool.setuptools.package-data]
"ml_adapter.torch" = ["py.typed"]

[tool.setuptools.packages.find]
where = ["src"]

[tool.ruff]
include = ["pyproject.toml", "src/**/*.py", "test/**/*.py"]


[tool.ruff.lint]
select = ["E", "F", "UP",  "B", "SIM", "I", "D1", "D4"]

[tool.ruff.lint.per-file-ignores]
"**/*test.py" = ["D"] # no docstyle required

[tool.pytest.ini_options]
asyncio_mode = "auto"
markers = [
    "exclude_ci: marks tests to exlude for ci (unstable or requires additional config)"
]