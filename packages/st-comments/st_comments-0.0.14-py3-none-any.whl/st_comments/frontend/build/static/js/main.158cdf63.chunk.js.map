{"version":3,"sources":["st_comments.tsx","index.tsx"],"names":["withStreamlitConnection","props","_useState","useState","args","comments","_useState2","_slicedToArray","setComments","customCss","custom_css","maxHeight","max_height","minHeight","min_height","delete_keyword","custom_font_awesome_url","delete_user","return_mode","useEffect","Streamlit","setFrameHeight","React","createElement","Fragment","Helmet","src","crossOrigin","id","style","padding","overflow","dangerouslySetInnerHTML","__html","map","comment","Card","key","position","CardContent","Typography","variant","color","component","user","Date","date","toISOString","split","text","CardActions","paddingTop","right","top","IconButton","aria-label","size","onClick","deletedComment","find","newComments","filter","setComponentValue","handleDelete","DeleteIcon","visibility","ReactDOM","render","StrictMode","CommentComponent","document","getElementById"],"mappings":"mRA+FeA,eAtEU,SAACC,GACxB,IAAAC,EAAgCC,mBAAoBF,EAAMG,KAAKC,UAAY,IAAGC,EAAAC,YAAAL,EAAA,GAAvEG,EAAQC,EAAA,GAAEE,EAAWF,EAAA,GAEtBG,EAAYR,EAAMG,KAAKM,YAAc,GACrCC,EAAaV,EAAMG,KAAKQ,WACxBC,EAAaZ,EAAMG,KAAKU,WACxBC,EAAiBd,EAAMG,KAAKW,eAC5BC,EAA0Bf,EAAMG,KAAKY,wBACrCC,EAAchB,EAAMG,KAAKa,YACzBC,EAAcjB,EAAMG,KAAKc,YAkB/B,OAJAC,qBAAU,WACRC,IAAUC,mBACT,CAAChB,IAGFiB,IAAAC,cAAAD,IAAAE,SAAA,KACAF,IAAAC,cAACE,IAAM,KACHH,IAAAC,cAAA,UACEG,IAAKV,EACLW,YAAY,YACZC,GAAG,wBAGTN,IAAAC,cAAA,OAAKM,MAAO,CAACC,QAAS,MAAOnB,UAAWA,EAAWE,UAAWA,EAAWkB,SAAU,SACjFT,IAAAC,cAAA,SAAOS,wBAAyB,CAACC,OAAQxB,KACxCJ,EAAS6B,KAAI,SAACC,GAAgB,OAC/Bb,IAAAC,cAACa,IAAI,CAACC,IAAKF,EAAQP,GAAIC,MAAO,CAACS,SAAU,aACvChB,IAAAC,cAACgB,IAAW,KACVjB,IAAAC,cAACiB,IAAU,CAACC,QAAQ,QAAQC,MAAM,gBAAgBC,UAAU,KACzDR,EAAQS,KAAK,KAAG,IAAIC,KAAKV,EAAQW,MAAMC,cAAcC,MAAM,KAAK,GAAG,KAEtE1B,IAAAC,cAACiB,IAAU,CAACC,QAAQ,QAAQE,UAAU,KACnCR,EAAQc,OAGK,QAAhBhC,GAAyBA,IAAgBkB,EAAQS,KACjDtB,IAAAC,cAAC2B,IAAW,CAACrB,MAAO,CAAEsB,WAAY,EAAGb,SAAU,WAAYc,MAAO,MAAOC,IAAK,MAAOvB,QAAS,QAC5FR,IAAAC,cAAC+B,IAAU,CAACC,aAAW,SAASb,MAAM,YAAYc,KAAK,QAAQC,QAAS,kBAtC7D,SAAC7B,GACpB,IAAM8B,EAAiBrD,EAASsD,MAAK,SAACxB,GAAgB,OAAKA,EAAQP,KAAOA,KACpEgC,EAAcvD,EAASwD,QAAO,SAAC1B,GAAgB,OAAKA,EAAQP,KAAOA,KACzEpB,EAAYoD,GAEQ,QAAhB1C,EACFE,IAAU0C,kBAAkBF,GACH,YAAhB1C,GAA6BwC,GACtCtC,IAAU0C,kBAAkB,CAACJ,IA8BuDK,CAAa5B,EAAQP,MACjGN,IAAAC,cAACyC,IAAU,MACX1C,IAAAC,cAAA,QAAMS,wBAAyB,CAAEC,OAAQlB,OAI7CO,IAAAC,cAAC2B,IAAW,CAACrB,MAAO,CAAEoC,WAAY,SAAUd,WAAY,EAAGb,SAAU,WAAYc,MAAO,MAAOC,IAAK,MAAOvB,QAAS,QAClHR,IAAAC,cAAC+B,IAAU,CAACC,aAAW,SAASb,MAAM,YAAYc,KAAK,SACrDlC,IAAAC,cAACyC,IAAU,CAACnC,MAAO,CAAEoC,WAAY,uBC1E/CC,IAASC,OACP7C,IAAAC,cAACD,IAAM8C,WAAU,KACf9C,IAAAC,cAAC8C,EAAgB,OAEnBC,SAASC,eAAe,W","file":"static/js/main.158cdf63.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  ComponentProps,\r\n  Streamlit,\r\n  withStreamlitConnection,\r\n} from \"streamlit-component-lib\";\r\nimport { Card, CardContent, CardActions, IconButton, Typography  } from '@material-ui/core';\r\nimport DeleteIcon from '@mui/icons-material/Delete';\r\nimport { Helmet } from 'react-helmet';\r\n\r\ninterface Comment {\r\n  id: number;\r\n  user: string;\r\n  date: string;\r\n  text: string;\r\n}\r\n\r\ninterface PythonStyle {\r\n  border?: string;\r\n  border_radius?: string;\r\n  padding?: string;\r\n  margin?: string;\r\n}\r\n\r\n\r\nconst CommentComponent = (props: ComponentProps) => {\r\n  const [comments, setComments] = useState<Comment[]>(props.args.comments || []);\r\n\r\n  const customCss = props.args.custom_css || \"\";\r\n  const maxHeight  = props.args.max_height;\r\n  const minHeight  = props.args.min_height;\r\n  const delete_keyword = props.args.delete_keyword;\r\n  const custom_font_awesome_url = props.args.custom_font_awesome_url;\r\n  const delete_user = props.args.delete_user;\r\n  const return_mode = props.args.return_mode;\r\n\r\n\r\n  const handleDelete = (id: number) => {\r\n    const deletedComment = comments.find((comment: Comment) => comment.id === id);\r\n    const newComments = comments.filter((comment: Comment) => comment.id !== id);\r\n    setComments(newComments);\r\n  \r\n    if (return_mode === \"all\") {\r\n      Streamlit.setComponentValue(newComments);\r\n    } else if (return_mode === \"deleted\" && deletedComment) {\r\n      Streamlit.setComponentValue([deletedComment]);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    Streamlit.setFrameHeight();\r\n  }, [comments]);\r\n\r\n  return (\r\n    <>\r\n    <Helmet>\r\n        <script\r\n          src={custom_font_awesome_url}\r\n          crossOrigin=\"anonymous\"\r\n          id=\"font-awesome-icons\"\r\n        />\r\n      </Helmet>\r\n    <div style={{padding: '5px', maxHeight: maxHeight, minHeight: minHeight, overflow: 'auto' }}>\r\n      <style dangerouslySetInnerHTML={{__html: customCss}} />\r\n      {comments.map((comment: Comment) => (\r\n      <Card key={comment.id} style={{position: 'relative'}}>\r\n        <CardContent>\r\n          <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n            {comment.user} ({new Date(comment.date).toISOString().split('T')[0]})\r\n          </Typography>\r\n          <Typography variant=\"body1\" component=\"p\">\r\n            {comment.text}\r\n          </Typography>\r\n        </CardContent>\r\n        {(delete_user === \"all\" || delete_user === comment.user) ? ( // Only show delete button if user has permission\r\n          <CardActions style={{ paddingTop: 0, position: 'absolute', right: '1px', top: '1px', padding: \"2px\" }}>\r\n            <IconButton aria-label=\"delete\" color=\"secondary\" size=\"small\" onClick={() => handleDelete(comment.id)}>\r\n              <DeleteIcon />\r\n              <span dangerouslySetInnerHTML={{ __html: delete_keyword }}></span>\r\n            </IconButton>\r\n          </CardActions>\r\n        ) : ( // Dummy CardActions with no content to maintain card height\r\n          <CardActions style={{ visibility: 'hidden', paddingTop: 0, position: 'absolute', right: '1px', top: '1px', padding: \"2px\" }}>\r\n            <IconButton aria-label=\"delete\" color=\"secondary\" size=\"small\">\r\n              <DeleteIcon style={{ visibility: 'hidden' }} />\r\n            </IconButton>\r\n          </CardActions>\r\n        )}\r\n      </Card>\r\n    ))}\r\n \r\n    </div>\r\n    </>\r\n  );\r\n};\r\n  \r\nexport default withStreamlitConnection(CommentComponent);\r\n","\r\nimport React from \"react\"\r\nimport ReactDOM from \"react-dom\"\r\nimport CommentComponent from \"./st_comments\"\r\n\r\n// Lots of import to define a Styletron engine and load the light theme of baseui\r\n\r\n\r\n// Wrap your CustomSlider with the baseui them\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <CommentComponent />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n)"],"sourceRoot":""}