{"version":3,"sources":["st_comments.tsx","index.tsx"],"names":["_regeneratorRuntime","exports","Op","Object","prototype","hasOwn","hasOwnProperty","defineProperty","obj","key","desc","value","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","makeInvokeMethod","tryCatch","fn","arg","type","call","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","method","_invoke","AsyncIterator","PromiseImpl","previousPromise","callInvokeWithMethodAndArg","resolve","reject","invoke","record","result","__await","then","unwrapped","error","state","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","done","methodName","undefined","return","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","displayName","isGeneratorFunction","genFun","ctor","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","keys","val","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","require","withStreamlitConnection","props","_useState","useState","args","comments","_useState2","_slicedToArray","setComments","_useState3","_useState4","newComment","setNewComment","showErrorToast","message","toast","position","autoClose","toast_show_time","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","showSuccessToast","success","fetchComments","_ref","_asyncToGenerator","_callee","apiUrl","queryParams","queryString","response","apiCommentsData","transformedComments","_context","retrieve_from_api","concat","host_url_api","URLSearchParams","auth_token","append","comment_field_key","toString","api_database","encodeURIComponent","debug","console","log","fetch","ok","toast_text_failed_fetch","statusText","json","new_on_top","sort","a","b","Date","date","getTime","map","apiComment","id","user","text","comment","t0","apply","arguments","useEffect","handleCommentSubmit","_ref2","_callee2","commentToAdd","commentToAddAPI","responseData","updatedComments","_context2","now","api_user_name","toISOString","return_mode","headers","body","JSON","stringify","toast_text_failed_post","toast_text_post_comment","_toConsumableArray","customCss","custom_css","maxHeight","max_height","minHeight","min_height","delete_keyword","custom_font_awesome_url","delete_user","allow_html_comment","textfield","max_chars","button_post_label","text_field_placeholder","submitButtonColor","submit_button_color","isCommentValid","trim","remainingChars","no_comments_text","toast_text_failed_delete","toast_text_delete_comment","handleDelete","_ref3","_callee3","deletedComment","newComments","_context3","find","filter","Streamlit","setComponentValue","_x","setFrameHeight","React","createElement","Fragment","Helmet","src","crossOrigin","dangerouslySetInnerHTML","__html","ToastContainer","style","display","flexDirection","height","flexGrow","overflowY","padding","textAlign","Typography","Card","CardContent","variant","color","component","split","CardActions","paddingTop","right","top","IconButton","aria-label","size","onClick","DeleteIcon","visibility","gap","TextField","label","fullWidth","onChange","e","target","multiline","maxRows","className","inputProps","maxLength","InputProps","margin","bottom","fontSize","justifyContent","alignItems","Button","disabled","backgroundColor","ReactDOM","render","StrictMode","CommentComponent","document","getElementById"],"mappings":"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","file":"static/js/main.b7479b9c.chunk.js","sourcesContent":["import React, { useEffect, useState, CSSProperties  } from \"react\";\r\nimport {\r\n  ComponentProps,\r\n  Streamlit,\r\n  withStreamlitConnection,\r\n} from \"streamlit-component-lib\";\r\nimport { Card, CardContent, CardActions, IconButton, Typography  } from '@material-ui/core';\r\nimport DeleteIcon from '@mui/icons-material/Delete';\r\nimport { Helmet } from 'react-helmet';\r\nimport { TextField, Button } from '@material-ui/core';\r\n\r\nimport { ToastContainer, toast } from 'react-toastify';\r\n// import 'react-toastify/dist/ReactToastify.css';\r\nrequire('react-toastify/dist/ReactToastify.css');\r\n\r\ninterface Comment {\r\n  id: number;\r\n  user: string;\r\n  date: string;\r\n  text: string;\r\n}\r\n\r\n\r\ninterface CommentAPI {\r\n  user: string;\r\n  comment_field_key: string;\r\n  comment: string;\r\n}\r\n\r\n\r\ninterface PythonStyle {\r\n  border?: string;\r\n  border_radius?: string;\r\n  padding?: string;\r\n  margin?: string;\r\n}\r\n\r\ninterface ApiComment {\r\n  id: number;\r\n  user: string;\r\n  date: string;\r\n  comment: string;\r\n  comment_field_key: string;\r\n  deleted: number;\r\n  api_database: string;\r\n}\r\n\r\n\r\nconst CommentComponent = (props: ComponentProps) => {\r\n  const [comments, setComments] = useState<Comment[]>(props.args.comments || []);\r\n  const [newComment, setNewComment] = useState<string>(\"\");\r\n\r\n\r\n// Function to show error toast\r\nconst showErrorToast = (message: string) => {\r\n  toast.error(message, {\r\n    position: \"top-right\",\r\n    autoClose: toast_show_time,\r\n    hideProgressBar: false,\r\n    closeOnClick: true,\r\n    pauseOnHover: true,\r\n    draggable: true,\r\n    progress: undefined,\r\n  });\r\n};\r\n\r\n// Function to show error toast\r\nconst showSuccessToast = (message: string) => {\r\n  toast.success(message, {\r\n    position: \"top-right\",\r\n    autoClose: toast_show_time,\r\n    hideProgressBar: false,\r\n    closeOnClick: true,\r\n    pauseOnHover: true,\r\n    draggable: true,\r\n    progress: undefined,\r\n  });\r\n};\r\n\r\n\r\n  const fetchComments = async () => {\r\n    if (props.args.retrieve_from_api) {\r\n      let apiUrl = `${host_url_api}/notes`;\r\n      const queryParams = new URLSearchParams();\r\n  \r\n      if (auth_token) {\r\n        queryParams.append('auth_token', auth_token);\r\n      }\r\n  \r\n      if (props.args.comment_field_key) {\r\n        queryParams.append('comment_field_key', props.args.comment_field_key);\r\n      }\r\n  \r\n      const queryString = queryParams.toString();\r\n      if (queryString) {\r\n        apiUrl += `?${queryString}`;\r\n      }\r\n\r\n      if (props.args.api_database) {\r\n        apiUrl += `&db_key=${encodeURIComponent(props.args.api_database)}`;\r\n      }\r\n  \r\n      try {\r\n        if (debug) {\r\n          console.log(apiUrl);\r\n        }\r\n        const response = await fetch(apiUrl);\r\n        if (!response.ok) {\r\n          showErrorToast(toast_text_failed_fetch);\r\n          console.error('Failed to fetch comments:', response.statusText);\r\n          return;\r\n        }\r\n        const apiCommentsData: ApiComment[] = await response.json();\r\n  \r\n        // Sort comments if new_on_top is true\r\n        if (props.args.new_on_top) {\r\n          apiCommentsData.sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());\r\n        }\r\n  \r\n        const transformedComments = apiCommentsData.map((apiComment: ApiComment) => ({\r\n          id: apiComment.id,\r\n          user: apiComment.user,\r\n          date: apiComment.date,\r\n          text: apiComment.comment,\r\n        }));\r\n  \r\n        setComments(transformedComments);\r\n  \r\n      } catch (error) {\r\n        console.error('Failed to fetch comments:', error);\r\n        showErrorToast(toast_text_failed_fetch);\r\n      }\r\n    } else {\r\n      setComments(props.args.comments || []);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    fetchComments();\r\n  }, [props.args.retrieve_from_api, props.args.comments, props.args.new_on_top]); // Also re-fetch when new_on_top changes\r\n  \r\n  // Function to handle new comment submission\r\n  const handleCommentSubmit = async () => { // Mark this function as async\r\n    const commentToAdd: Comment = {\r\n      id: Date.now(), // or some other unique ID logic\r\n      user: api_user_name, // Replace with actual user data if available\r\n      date: new Date().toISOString(),\r\n      text: newComment,\r\n    };\r\n\r\n\r\n  // send data to API\r\n  if (return_mode === \"api\") {\r\n\r\n    const commentToAddAPI: CommentAPI = {\r\n      user: api_user_name, // Replace with actual user data if available\r\n      comment_field_key: comment_field_key,\r\n      comment: newComment,\r\n    };\r\n\r\n\r\n    let apiUrl = `${host_url_api}/notes`;\r\n    if (auth_token) {\r\n      apiUrl += `?auth_token=${encodeURIComponent(auth_token)}&db_key=${encodeURIComponent(api_database)}`;\r\n    } else {\r\n      apiUrl += `?db_key=${encodeURIComponent(api_database)}`;\r\n    }\r\n    \r\n\r\n    try {\r\n      if (debug) {\r\n        console.log(apiUrl);\r\n      }\r\n      const response = await fetch(apiUrl, { // 'await' can be used here\r\n        method: 'POST',\r\n        // mode: 'no-cors', // Add this line\r\n\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(commentToAddAPI),\r\n\r\n      });\r\n\r\n      const responseData = await response.json(); // Await the JSON response\r\n      commentToAdd.id = responseData.id || Date.now();\r\n    \r\n      if (!response.ok) {\r\n        // Handle response errors\r\n        showErrorToast(toast_text_failed_post);\r\n        console.error('Failed to post comment:', response.statusText);\r\n        \r\n        return;\r\n      }\r\n      showSuccessToast(toast_text_post_comment);\r\n    } catch (error) {\r\n      // Handle fetch errors\r\n      showErrorToast(toast_text_failed_post);\r\n      console.error('Failed to post comment:', error);\r\n      \r\n      //create an error message and siaply it for 10 seocnds\r\n\r\n      return;\r\n    } \r\n  }\r\n\r\n    let updatedComments;\r\n    if (new_on_top) {\r\n      updatedComments = [commentToAdd, ...comments]; // Add new comment to the top\r\n    } else {\r\n      updatedComments = [...comments, commentToAdd]; // Add new comment to the bottom\r\n    }\r\n    setComments(updatedComments);\r\n    setNewComment(\"\"); // Reset the input field\r\n\r\n    // Send data back to Python, if needed\r\n    // Streamlit.setComponentValue(updatedComments);\r\n  };\r\n\r\n  // Define textareaStyles with CSSProperties type\r\n  const textareaStyles: CSSProperties = {\r\n    height: 'calc(1.5em * 1.5 + 16px + 2px)', // Example calculation for 3 lines\r\n    overflowY: 'auto', // Correctly typed for TypeScript\r\n    margin: '2px'\r\n  };\r\n\r\n  const customCss = props.args.custom_css || \"\";\r\n  const maxHeight  = props.args.max_height;\r\n  const minHeight  = props.args.min_height;\r\n  const delete_keyword = props.args.delete_keyword;\r\n  const custom_font_awesome_url = props.args.custom_font_awesome_url;\r\n  const delete_user = props.args.delete_user;\r\n  const return_mode = props.args.return_mode;\r\n\r\n  const allow_html_comment = props.args.allow_html_comment || false;\r\n  const retrieve_from_api = props.args.retrieve_from_api || false;\r\n\r\n  const auth_token = props.args.auth_token;\r\n  const host_url_api = props.args.host_url_api;\r\n  const textfield = props.args.textfield;\r\n  const api_user_name = props.args.api_user_name || \"Anonymous\";\r\n  const max_chars = props.args.max_chars;\r\n  const button_post_label = props.args.button_post_label || \"Post\";\r\n  const text_field_placeholder = props.args.text_field_placeholder || \"Write a comment\";\r\n  const submitButtonColor = props.args.submit_button_color || \"primary\";\r\n  const isCommentValid = newComment.trim().length > 0 && newComment.length <= max_chars;\r\n  const new_on_top = props.args.new_on_top || false;\r\n\r\n  const remainingChars = max_chars - newComment.length;\r\n  const isOverLimit = remainingChars < 0;\r\n  const comment_field_key = props.args.comment_field_key ;\r\n  const no_comments_text = props.args.no_comments_text || \"No comments yet\";\r\n  const api_database = props.args.api_database || \"haspa_test\";\r\n\r\n  const toast_show_time = props.args.toast_show_time || 5000;\r\n  const toast_text_failed_post = props.args.toast_text_failed_post || \"Failed to post comment. Please try again later.\";\r\n  const toast_text_failed_delete = props.args.toast_text_failed_delete || \"Failed to delete comment. Please try again later.\";\r\n  const toast_text_failed_fetch = props.args.toast_text_failed_fetch || \"Failed to fetch comments. Please try again later.\";\r\n  const toast_text_delete_comment = props.args.toast_text_delete_comment || \"Comment deleted\";\r\n  const toast_text_post_comment = props.args.toast_text_post_comment || \"Comment posted\";\r\n\r\n  const debug = props.args.debug || false;\r\n\r\n  const handleDelete = async (id: number)   => { // Mark this function as async\r\n    const deletedComment = comments.find((comment: Comment) => comment.id === id);\r\n    const newComments = comments.filter((comment: Comment) => comment.id !== id);\r\n    \r\n\r\n    if (return_mode === \"api\") {\r\n      let apiUrl = `${host_url_api}/notes/${id}?comment_field_key=${encodeURIComponent(comment_field_key)}&db_key=${encodeURIComponent(api_database)}`;\r\n      if (auth_token) {\r\n        apiUrl += `&auth_token=${encodeURIComponent(auth_token)}`;\r\n      }\r\n  \r\n      try {\r\n        if (debug) {\r\n          console.log(apiUrl);\r\n        }\r\n        const response = await fetch(apiUrl, {\r\n          method: 'DELETE',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n        }); \r\n  \r\n        if (!response.ok) {\r\n          // Handle response errors\r\n          showErrorToast(toast_text_failed_delete);\r\n          console.error('Failed to delete comment:', response.statusText);\r\n          return;\r\n        }\r\n        showSuccessToast(toast_text_delete_comment);\r\n    } catch (error) {\r\n      // Handle fetch errors\r\n      showErrorToast(toast_text_failed_delete);\r\n      console.error('Failed to delete comment:', error);\r\n      \r\n      //create an error message and siaply it for 10 seocnds\r\n\r\n      return;\r\n    }\r\n  }\r\n    \r\n  setComments(newComments);\r\n    if (return_mode === \"all\") {\r\n      Streamlit.setComponentValue(newComments);\r\n    } else if (return_mode === \"deleted\" && deletedComment) {\r\n      Streamlit.setComponentValue([deletedComment]);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    Streamlit.setFrameHeight();\r\n  }, [comments]);\r\n\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <script\r\n          src={custom_font_awesome_url}\r\n          crossOrigin=\"anonymous\"\r\n          id=\"font-awesome-icons\"\r\n        />\r\n      </Helmet>\r\n      <style dangerouslySetInnerHTML={{__html: customCss}} />\r\n      <ToastContainer />\r\n      <div style={{ display: 'flex', flexDirection: 'column', height: '100%' }}>\r\n        <div style={{ flexGrow: 1, overflowY: 'auto', maxHeight: maxHeight, minHeight: minHeight, padding: '5px' }}>\r\n            {\r\n      comments.length === 0 ? (\r\n        // Display this when there are no comments\r\n        <div style={{ textAlign: 'center', padding: '20px' }}>\r\n          <Typography>  <span dangerouslySetInnerHTML={{ __html: no_comments_text }}></span> </Typography>\r\n   \r\n        </div>\r\n      ) : (\r\n          comments.map((comment: Comment) => (\r\n            <Card key={comment.id} style={{ position: 'relative' }}>\r\n              <CardContent>\r\n                <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n                  {comment.user} ({new Date(comment.date).toISOString().split('T')[0]})\r\n                </Typography>\r\n                <Typography variant=\"body1\" component=\"p\">\r\n                  {allow_html_comment ? (\r\n                    <span dangerouslySetInnerHTML={{ __html: comment.text }}></span>\r\n                  ) : (\r\n                    <span>{comment.text}</span>\r\n                  )}\r\n                </Typography>\r\n              </CardContent>\r\n              {(delete_user === \"all\" || delete_user === comment.user) ? (\r\n                <CardActions style={{ paddingTop: 0, position: 'absolute', right: '1px', top: '1px', padding: \"2px\" }}>\r\n                  <IconButton aria-label=\"delete\" color=\"secondary\" size=\"small\" onClick={() => handleDelete(comment.id)}>\r\n                    <DeleteIcon />\r\n                    <span dangerouslySetInnerHTML={{ __html: delete_keyword }}></span>\r\n                  </IconButton>\r\n                </CardActions>\r\n              ) : (\r\n                <CardActions style={{ visibility: 'hidden', paddingTop: 0, position: 'absolute', right: '1px', top: '1px', padding: \"2px\" }}>\r\n                  <IconButton aria-label=\"delete\" color=\"secondary\" size=\"small\">\r\n                    <DeleteIcon style={{ visibility: 'hidden' }} />\r\n                  </IconButton>\r\n                </CardActions>\r\n              )}\r\n            </Card>\r\n          ))\r\n          )}\r\n\r\n        </div>\r\n        {props.args.textfield && (\r\n          <div style={{ display: 'flex', flexDirection: 'column', gap: '10px', padding: '5px' }}>\r\n            <div style={{ position: 'relative' }}>\r\n            <TextField\r\n              label= {text_field_placeholder}\r\n              variant=\"outlined\"\r\n              fullWidth\r\n              value={newComment}\r\n              onChange={(e) => setNewComment(e.target.value)}\r\n              multiline\r\n              maxRows={2}\r\n              className=\"CommentField\"\r\n              id=\"commentfield\"\r\n              inputProps={{ maxLength: max_chars }}\r\n              InputProps={{\r\n                style: {  overflowY: 'auto' },\r\n                inputProps: { style: textareaStyles }\r\n              }}\r\n            />\r\n             <span style={{ \r\n                position: 'absolute', \r\n                bottom: 5, \r\n                right: 20, \r\n                fontSize: '0.75rem', \r\n                color: remainingChars < 0 ? 'red' : 'grey' \r\n              }}>\r\n                {`${newComment.length}/${max_chars}`}\r\n              </span>\r\n            </div>\r\n            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n              <Button\r\n                className=\"submitbtnclass\"\r\n                color=\"primary\"\r\n                variant=\"contained\"\r\n                onClick={handleCommentSubmit}\r\n                disabled={!isCommentValid}\r\n                fullWidth\r\n                style={{ backgroundColor: submitButtonColor ? submitButtonColor : undefined }}\r\n              >\r\n                <span dangerouslySetInnerHTML={{ __html: button_post_label }}></span>\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n  \r\n}\r\nexport default withStreamlitConnection(CommentComponent);\r\n","\r\nimport React from \"react\"\r\nimport ReactDOM from \"react-dom\"\r\nimport CommentComponent from \"./st_comments\"\r\n\r\n// Lots of import to define a Styletron engine and load the light theme of baseui\r\n\r\n\r\n// Wrap your CustomSlider with the baseui them\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <CommentComponent />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n)"],"sourceRoot":""}