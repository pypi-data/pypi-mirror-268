(this.webpackJsonpstreamlit_file_browser=this.webpackJsonpstreamlit_file_browser||[]).push([[0],{38:function(e,t,a){e.exports=a(93)},93:function(e,t,a){"use strict";a.r(t);var l=a(1),n=a.n(l),o=a(31),i=a.n(o),s=a(5),r=a(21),d=a.n(r),c=a(4),h=a.n(c),E=a(34);const m=e=>{const{selectedItems:t,isFolder:a,icons:l,nameFilter:o,canCreateFolder:i,onCreateFolder:s,canRenameFile:r,onRenameFile:d,canRenameFolder:c,onRenameFolder:h,canDeleteFile:E,onDeleteFile:m,canDeleteFolder:f,onDeleteFolder:u,canDownloadFile:F,onDownloadFile:_,canDownloadFolder:g,onDownloadFolder:p,canChooseFile:v,onChooseFile:D,canChooseFolder:L,onChooseFolder:w}=e;let C=[];if(t.length){const e=t.filter(e=>e.action);if(e.length===t.length&&1===[...new Set(e)].length){let t;switch(e[0].action){case"delete":t="Deleting ...";break;case"rename":t="Renaming ...";break;default:t="Moving ..."}C=n.a.createElement("div",{className:"item-actions"},l.Loading," ",t)}else{a&&i&&!o&&C.push(n.a.createElement("li",{key:"action-add-folder"},n.a.createElement("a",{onClick:s,href:"#",role:"button"},l.Folder,"\xa0Add Subfolder")));const e=t.find(e=>!e.keyDerived);e||a||!r||1!==t.length?!e&&a&&c&&C.push(n.a.createElement("li",{key:"action-rename"},n.a.createElement("a",{onClick:h,href:"#",role:"button"},l.Rename,"\xa0Rename"))):C.push(n.a.createElement("li",{key:"action-rename"},n.a.createElement("a",{onClick:d,href:"#",role:"button"},l.Rename,"\xa0Rename"))),e||a||!E||C.push(n.a.createElement("li",{key:"action-delete"},n.a.createElement("a",{onClick:m,href:"#",role:"button"},l.Delete,"\xa0Delete"))),(!a&&F||a&&g)&&C.push(n.a.createElement("li",{key:"action-download"},n.a.createElement("a",{onClick:a?p:_,href:"#",role:"button"},l.Download,"\xa0Download"))),(!a&&v||a&&L)&&C.push(n.a.createElement("li",{key:"action-choose"},n.a.createElement("a",{onClick:a?w:D,href:"#",role:"button"},n.a.createElement("i",{className:"fa fa-plus","aria-hidden":"true"}),"\xa0Choose"))),C=C.length?n.a.createElement("ul",{className:"item-actions"},C):n.a.createElement("div",{className:"item-actions"},"\xa0")}}else i&&!o&&C.push(n.a.createElement("li",{key:"action-add-folder"},n.a.createElement("a",{onClick:s,href:"#",role:"button"},l.Folder,"\xa0Add Folder"))),C=C.length?n.a.createElement("ul",{className:"item-actions"},C):n.a.createElement("div",{className:"item-actions"},"\xa0");return C};m.defaultProps={selectedItems:[],isFolder:!1,icons:{},nameFilter:"",canCreateFolder:!1,onCreateFolder:null,canRenameFile:!1,onRenameFile:null,canRenameFolder:!1,onRenameFolder:null,canDeleteFile:!1,onDeleteFile:null,canDeleteFolder:!1,onDeleteFolder:null,canDownloadFile:!1,onDownloadFile:null,canDownloadFolder:!1,onDownloadFolder:null,canChooseFile:!1,onChooseFile:null,canChooseFolder:!1,onChooseFolder:null};var f=m,u=(a(88),a(89),function(e){return e.SELECT_FILE="SELECT_FILE",e.SELECT_FOLDER="SELECT_FOLDER",e.DOWNLOAD="DOWNLOAD",e.DELETE_FILE="DELETE_FILE",e.DELETE_FOLDER="DELETE_FOLDER",e.RENAME_FOLDER="RENAME_FOLDER",e.RENAME_FILE="RENAME_FILE",e.CREATE_FILE="CREATE_FILE",e.CREATE_FOLDER="CREATE_FOLDER",e.MOVE_FILE="MOVE_FILE",e.MOVE_FOLDER="MOVE_FOLDER",e.CHOOSE_FILE="CHOOSE_FILE",e}(u||{}));const F=e=>s.a.setComponentValue(e);class _ extends s.b{constructor(e){super(e),this.args=void 0,this.onResized=e=>{this.ajustHeight()},this.render=()=>n.a.createElement(E.a,Object.assign({},this.args,{checkOrigin:!1,autoResize:!0,onResized:this.onResized,frameBorder:0,style:{width:"100%"},src:this.args.static_file_server_path})),this.args=e.args}ajustHeight(e){s.a.setFrameHeight()}componentDidMount(){this.args.path;const e=this.args;window.addEventListener("message",(function(t){var a,l,n,o,i;if("filebrowser_file_selected"===(null===(a=t.data)||void 0===a?void 0:a.event)||"filebrowser_dir_selected"===(null===(l=t.data)||void 0===l?void 0:l.event)||"filebrowser_file_double_selected"===(null===(n=t.data)||void 0===n?void 0:n.event)||"filebrowser_path_changed"===(null===(o=t.data)||void 0===o?void 0:o.event)||"filebrowser_file_choose"===(null===(i=t.data)||void 0===i?void 0:i.event)){var s,r,d,c,E;const a={path:h()(t,"data.data.file.path","")};h()(t,"data.data.file.name","")&&(a.name=h()(t,"data.data.file.name","")),h()(t,"data.data.file.size",0)&&(a.size=h()(t,"data.data.file.size",0)),h()(t,"data.data.file.create_time",0)&&(a.create_time=h()(t,"data.data.file.create_time",0)),h()(t,"data.data.file.update_time",0)&&(a.update_time=h()(t,"data.data.file.update_time",0)),h()(t,"data.data.file.access_time",0)&&(a.access_time=h()(t,"data.data.file.access_time",0)),"filebrowser_file_selected"===(null===(s=t.data)||void 0===s?void 0:s.event)&&F({type:u.SELECT_FILE,target:a}),"filebrowser_dir_selected"===(null===(r=t.data)||void 0===r?void 0:r.event)&&F({type:u.SELECT_FOLDER,target:a});const{show_choose_file:l}=e;"filebrowser_file_double_selected"===(null===(d=t.data)||void 0===d?void 0:d.event)&&l&&F({type:u.CHOOSE_FILE,target:[a]}),"filebrowser_file_choose"===(null===(c=t.data)||void 0===c?void 0:c.event)&&l&&F({type:u.CHOOSE_FILE,target:[a]}),"filebrowser_path_changed"===(null===(E=t.data)||void 0===E?void 0:E.event)&&F({type:u.SELECT_FOLDER,target:a})}})),this.ajustHeight()}componentDidUpdate(){this.ajustHeight()}}class g extends s.b{constructor(e){super(e),this.args=void 0,this.folderOpenHandler=e=>this.ajustHeight(),this.folderCloseHandler=e=>this.ajustHeight(),this.fileSelectedHandler=e=>{if(!this.args.ignore_file_select_event){const t=this.args.files.find(t=>t.path===e.key);t&&F({type:u.SELECT_FILE,target:t})}},this.downlandHandler=e=>{const t=this.args.files.filter(t=>e.includes(t.path));t.forEach(e=>{var t;let a=new URL(e.path,this.args.artifacts_download_site).toString(),l=a.substring(a.lastIndexOf("/")+1),n=document.createElement("a");n.target="_blank",n.href=a,n.download=l,document.body.appendChild(n),n.click(),null===(t=n.parentNode)||void 0===t||t.removeChild(n)}),t.length&&F({type:u.DOWNLOAD,target:t})},this.deleteFileHandler=e=>{const t=this.args.files.filter(t=>"string"===typeof e?e===t.path:e.includes(t.path));console.log("deleteFileHandler","key",e,"files ",t),t.length&&F({type:u.DELETE_FILE,target:t});const a=this.args.files.filter(t=>"string"===typeof e?e!==t.path:!e.includes(t.path));this.args.files=a},this.chooseHandler=e=>{const t=this.args.files.filter(t=>e.includes(t.path));t.length&&F({type:u.CHOOSE_FILE,target:t})},this.convertFiles=e=>e.map(e=>({key:e.path,modified:e.update_time||0,size:e.size||0})),this.noop=()=>n.a.createElement(n.a.Fragment,null),this.render=()=>{let e=this;return n.a.createElement("div",null,n.a.createElement(d.a,Object.assign({},this.args,{showActionBar:!0,canFilter:!0,detailRenderer:this.noop,icons:r.Icons.FontAwesome(4),files:this.convertFiles(this.args.files),onFolderOpen:this.folderOpenHandler,onFolderClose:this.folderCloseHandler,onSelect:this.fileSelectedHandler,onDownloadFile:this.downlandHandler,onDeleteFile:this.deleteFileHandler,actionRenderer:function(){for(var t=arguments.length,a=new Array(t),l=0;l<t;l++)a[l]=arguments[l];return f({...a[0],canChooseFile:e.args.show_choose_file,canDownloadFile:e.args.show_download_file&&e.args.artifacts_download_site,canDeleteFile:e.args.show_delete_file,onChooseFile:t=>e.chooseHandler(a[0].selectedItems.map(e=>e.key)),onDeleteFile:t=>e.deleteFileHandler(a[0].selectedItems.map(e=>e.key))})}})))},this.args=e.args}ajustHeight(e){const t=document.getElementById("root");if(t){const a=Math.min(t.clientHeight,t.scrollHeight,t.offsetHeight);s.a.setFrameHeight(a-(e||0)),setTimeout(s.a.setFrameHeight,1)}}componentDidMount(){this.ajustHeight()}componentDidUpdate(){this.ajustHeight()}}const p=Object(s.c)(g),v=Object(s.c)(_);class D extends s.b{constructor(e){super(e),this.args=void 0,this.args=e.args}render(){return this.args.static_file_server_path?n.a.createElement("div",null,n.a.createElement(v,this.props)):n.a.createElement("div",null,n.a.createElement(p,this.props))}}var L=Object(s.c)(D);i.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(L,null)),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.9170f570.chunk.js.map