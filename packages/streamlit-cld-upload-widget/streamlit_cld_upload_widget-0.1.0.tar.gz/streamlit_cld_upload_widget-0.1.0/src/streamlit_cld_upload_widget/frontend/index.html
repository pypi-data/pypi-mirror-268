<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>streamlit_cld_upload_widget</title>
    <script src="./streamlit-component-lib.js"></script>
    <script src="./main.js"></script>
    <link rel="stylesheet" href="./style.css" />
    <script src="https://widget.cloudinary.com/v2.0/global/all.js" type="text/javascript"></script>

<script type="text/javascript">
window.addEventListener("load", (event) => {
  console.log(JSON.stringify(args))  

    var myWidget = cloudinary.createUploadWidget({
        cloudName: args.cloudName,
        uploadPreset: args.uploadPreset,
        sources: args.sources,
        secure: true,
        multiple: args.multiple,
        maxFiles: args.maxFiles,
        tags: args.tags,
        context: args.context,
        allowedFormats: args.allowedFormats,
        showPoweredBy: args.showPoweredBy
        }, (error, result) => { if (result.event == "success") {
            console.log(result.info) // result.info contains data from upload
            sendValue(result.info)
        } })

        document.getElementById("upload_widget").addEventListener("click", function(){
            myWidget.open();
        }, false);
      });
</script>
  </head>
  <body>
    <div id="root">
      <button id="upload_widget" class="cloudinary-button">Upload files</button>


    </div>
  </body>
</html>
