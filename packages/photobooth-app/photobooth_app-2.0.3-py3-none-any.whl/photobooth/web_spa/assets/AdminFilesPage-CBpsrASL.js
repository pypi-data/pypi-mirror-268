import{v as ne,Z as Nt,$ as jt,d as b,t as s,H as oe,a9 as rt,aa as Dt,ab as At,ac as It,S as he,a2 as ye,r as z,ad as it,ae as st,af as Qt,ag as ut,ah as ct,ai as Vt,aj as Mt,ak as Ht,w as ie,e as dt,i as $t,al as fe,am as vt,an as We,Q as W,ao as ft,ap as Wt,aq as Kt,a5 as gt,ar as Gt,as as Zt,at as Xt,au as Ke,av as Ae,aw as Ge,ax as mt,_ as Jt,f as _e,n as Pe,p as I,B as pe,q as U,h as Yt,V as el,U as tl,M as Ze,K as xe,D as Be,ay as ll,L as Xe,z as Ne,W as Je,C as al,a1 as je}from"./index-DBPDdVpq.js";import{u as ol,a as nl,b as rl,Q as il,c as Ye}from"./use-checkbox-CuonI_mG.js";import{Q as sl}from"./QCircularProgress-BAN8VJLr.js";import{h as et}from"./format-CJebrXOQ.js";import{Q as ul}from"./QList-DKx1UzAu.js";import{Q as cl}from"./QMarkupTable-DImEdzXx.js";import{u as dl,a as vl,c as bt,Q as fl}from"./QSelect-DRF93W-2.js";import{Q as gl}from"./QLinearProgress-of44INNi.js";import{u as ml,a as bl,b as _l,o as pl}from"./open-url-wjeOvby8.js";import{Q as hl}from"./QPage-DfFgjdnY.js";import{u as yl}from"./use-quasar-_FZDZGBl.js";import"./rtl-CF_aSVsN.js";import"./QItemLabel-DQNl39Uw.js";import"./selection-R7prPWb2.js";const tt=ne({name:"QBreadcrumbsEl",props:{...Nt,label:String,icon:String,tag:{type:String,default:"span"}},emits:["click"],setup(e,{slots:t}){const{linkTag:n,linkAttrs:l,linkClass:i,navigateOnClick:c}=jt(),r=b(()=>({class:"q-breadcrumbs__el q-link flex inline items-center relative-position "+(e.disable!==!0?"q-link--focusable"+i.value:"q-breadcrumbs__el--disable"),...l.value,onClick:c})),f=b(()=>"q-breadcrumbs__el-icon"+(e.label!==void 0?" q-breadcrumbs__el-icon--with-label":""));return()=>{const g=[];return e.icon!==void 0&&g.push(s(oe,{class:f.value,name:e.icon})),e.label!==void 0&&g.push(e.label),s(n.value,{...r.value},rt(t.default,g))}}}),Sl=["",!0],wl=ne({name:"QBreadcrumbs",props:{...Dt,separator:{type:String,default:"/"},separatorColor:String,activeColor:{type:String,default:"primary"},gutter:{type:String,validator:e=>["none","xs","sm","md","lg","xl"].includes(e),default:"sm"}},setup(e,{slots:t}){const n=At(e),l=b(()=>`flex items-center ${n.value}${e.gutter==="none"?"":` q-gutter-${e.gutter}`}`),i=b(()=>e.separatorColor?` text-${e.separatorColor}`:""),c=b(()=>` text-${e.activeColor}`);return()=>{if(t.default===void 0)return;const r=It(he(t.default));if(r.length===0)return;let f=1;const g=[],w=r.filter(p=>p.type!==void 0&&p.type.name==="QBreadcrumbsEl").length,u=t.separator!==void 0?t.separator:()=>e.separator;return r.forEach(p=>{if(p.type!==void 0&&p.type.name==="QBreadcrumbsEl"){const q=f<w,x=p.props!==null&&Sl.includes(p.props.disable),o=(q===!0?"":" q-breadcrumbs--last")+(x!==!0&&q===!0?c.value:"");f++,g.push(s("div",{class:`flex items-center${o}`},[p])),q===!0&&g.push(s("div",{class:"q-breadcrumbs__separator"+i.value},u()))}else g.push(p)}),s("div",{class:"q-breadcrumbs"},[s("div",{class:l.value},g)])}}});function ve(e,t,n,l){const i=[];return e.forEach(c=>{l(c)===!0?i.push(c):t.push({failedPropValidation:n,file:c})}),i}function Te(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),st(e)}const Cl={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},ql=["rejected"];function Fl({editable:e,dnd:t,getFileInput:n,addFilesToQueue:l}){const{props:i,emit:c,proxy:r}=ye(),f=z(null),g=b(()=>i.accept!==void 0?i.accept.split(",").map(d=>(d=d.trim(),d==="*"?"*/":(d.endsWith("/*")&&(d=d.slice(0,d.length-1)),d.toUpperCase()))):null),w=b(()=>parseInt(i.maxFiles,10)),u=b(()=>parseInt(i.maxTotalSize,10));function p(d){if(e.value)if(d!==Object(d)&&(d={target:null}),d.target!==null&&d.target.matches('input[type="file"]')===!0)d.clientX===0&&d.clientY===0&&it(d);else{const S=n();S&&S!==d.target&&S.click(d)}}function q(d){e.value&&d&&l(null,d)}function x(d,S,h,T){let k=Array.from(S||d.target.files);const N=[],M=()=>{N.length!==0&&c("rejected",N)};if(i.accept!==void 0&&g.value.indexOf("*/")===-1&&(k=ve(k,N,"accept",R=>g.value.some(O=>R.type.toUpperCase().startsWith(O)||R.name.toUpperCase().endsWith(O))),k.length===0))return M();if(i.maxFileSize!==void 0){const R=parseInt(i.maxFileSize,10);if(k=ve(k,N,"max-file-size",O=>O.size<=R),k.length===0)return M()}if(i.multiple!==!0&&k.length!==0&&(k=[k[0]]),k.forEach(R=>{R.__key=R.webkitRelativePath+R.lastModified+R.name+R.size}),T===!0){const R=h.map(O=>O.__key);k=ve(k,N,"duplicate",O=>R.includes(O.__key)===!1)}if(k.length===0)return M();if(i.maxTotalSize!==void 0){let R=T===!0?h.reduce((O,V)=>O+V.size,0):0;if(k=ve(k,N,"max-total-size",O=>(R+=O.size,R<=u.value)),k.length===0)return M()}if(typeof i.filter=="function"){const R=i.filter(k);k=ve(k,N,"filter",O=>R.includes(O))}if(i.maxFiles!==void 0){let R=T===!0?h.length:0;if(k=ve(k,N,"max-files",()=>(R++,R<=w.value)),k.length===0)return M()}if(M(),k.length!==0)return k}function o(d){Te(d),t.value!==!0&&(t.value=!0)}function _(d){st(d),(d.relatedTarget!==null||Qt.is.safari!==!0?d.relatedTarget!==f.value:document.elementsFromPoint(d.clientX,d.clientY).includes(f.value)===!1)===!0&&(t.value=!1)}function y(d){Te(d);const S=d.dataTransfer.files;S.length!==0&&l(null,S),t.value=!1}function F(d){if(t.value===!0)return s("div",{ref:f,class:`q-${d}__dnd absolute-full`,onDragenter:Te,onDragover:Te,onDragleave:_,onDrop:y})}return Object.assign(r,{pickFiles:p,addFiles:q}),{pickFiles:p,addFiles:q,onDragover:o,onDragleave:_,processFiles:x,getDndNode:F,maxFilesNumber:w,maxTotalSizeNumber:u}}function lt(e){return(e*100).toFixed(2)+"%"}const kl={...ut,...Cl,label:String,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,noThumbnails:Boolean,autoUpload:Boolean,hideUploadBtn:Boolean,disable:Boolean,readonly:Boolean},_t=[...ql,"start","finish","added","removed"];function Pl(e,t){const n=ye(),{props:l,slots:i,emit:c,proxy:r}=n,{$q:f}=r,g=ct(l,f);function w(v,L,A){if(v.__status=L,L==="idle"){v.__uploaded=0,v.__progress=0,v.__sizeLabel=et(v.size),v.__progressLabel="0.00%";return}if(L==="failed"){r.$forceUpdate();return}v.__uploaded=L==="uploaded"?v.size:A,v.__progress=L==="uploaded"?1:Math.min(.9999,v.__uploaded/v.size),v.__progressLabel=lt(v.__progress),r.$forceUpdate()}const u=b(()=>l.disable!==!0&&l.readonly!==!0),p=z(!1),q=z(null),x=z(null),o={files:z([]),queuedFiles:z([]),uploadedFiles:z([]),uploadedSize:z(0),updateFileStatus:w,isAlive:()=>Vt(n)===!1},{pickFiles:_,addFiles:y,onDragover:F,onDragleave:d,processFiles:S,getDndNode:h,maxFilesNumber:T,maxTotalSizeNumber:k}=Fl({editable:u,dnd:p,getFileInput:K,addFilesToQueue:ge});Object.assign(o,e({props:l,slots:i,emit:c,helpers:o,exposeApi:v=>{Object.assign(o,v)}})),o.isBusy===void 0&&(o.isBusy=z(!1));const N=z(0),M=b(()=>N.value===0?0:o.uploadedSize.value/N.value),R=b(()=>lt(M.value)),O=b(()=>et(N.value)),V=b(()=>u.value===!0&&o.isUploading.value!==!0&&(l.multiple===!0||o.queuedFiles.value.length===0)&&(l.maxFiles===void 0||o.files.value.length<T.value)&&(l.maxTotalSize===void 0||N.value<k.value)),E=b(()=>u.value===!0&&o.isBusy.value!==!0&&o.isUploading.value!==!0&&o.queuedFiles.value.length!==0);Mt(Ht,Ce);const X=b(()=>"q-uploader column no-wrap"+(g.value===!0?" q-uploader--dark q-dark":"")+(l.bordered===!0?" q-uploader--bordered":"")+(l.square===!0?" q-uploader--square no-border-radius":"")+(l.flat===!0?" q-uploader--flat no-shadow":"")+(l.disable===!0?" disabled q-uploader--disable":"")+(p.value===!0?" q-uploader--dnd":"")),te=b(()=>"q-uploader__header"+(l.color!==void 0?` bg-${l.color}`:"")+(l.textColor!==void 0?` text-${l.textColor}`:""));ie(o.isUploading,(v,L)=>{L===!1&&v===!0?c("start"):L===!0&&v===!1&&c("finish")});function J(){l.disable===!1&&(o.abort(),o.uploadedSize.value=0,N.value=0,we(),o.files.value=[],o.queuedFiles.value=[],o.uploadedFiles.value=[])}function H(){l.disable===!1&&Se(["uploaded"],()=>{o.uploadedFiles.value=[]})}function le(){Se(["idle","failed"],({size:v})=>{N.value-=v,o.queuedFiles.value=[]})}function Se(v,L){if(l.disable===!0)return;const A={files:[],size:0},Z=o.files.value.filter(Q=>v.indexOf(Q.__status)===-1?!0:(A.size+=Q.size,A.files.push(Q),Q.__img!==void 0&&window.URL.revokeObjectURL(Q.__img.src),!1));A.files.length!==0&&(o.files.value=Z,L(A),c("removed",A.files))}function ae(v){l.disable||(v.__status==="uploaded"?o.uploadedFiles.value=o.uploadedFiles.value.filter(L=>L.__key!==v.__key):v.__status==="uploading"?v.__abort():N.value-=v.size,o.files.value=o.files.value.filter(L=>L.__key!==v.__key?!0:(L.__img!==void 0&&window.URL.revokeObjectURL(L.__img.src),!1)),o.queuedFiles.value=o.queuedFiles.value.filter(L=>L.__key!==v.__key),c("removed",[v]))}function we(){o.files.value.forEach(v=>{v.__img!==void 0&&window.URL.revokeObjectURL(v.__img.src)})}function K(){return x.value||q.value.getElementsByClassName("q-uploader__input")[0]}function ge(v,L){const A=S(v,L,o.files.value,!0),Z=K();Z!=null&&(Z.value=""),A!==void 0&&(A.forEach(Q=>{if(o.updateFileStatus(Q,"idle"),N.value+=Q.size,l.noThumbnails!==!0&&Q.type.toUpperCase().startsWith("IMAGE")){const ue=new Image;ue.src=window.URL.createObjectURL(Q),Q.__img=ue}}),o.files.value=o.files.value.concat(A),o.queuedFiles.value=o.queuedFiles.value.concat(A),c("added",A),l.autoUpload===!0&&o.upload())}function me(){E.value===!0&&o.upload()}function re(v,L,A){if(v===!0){const Z={type:"a",key:L,icon:f.iconSet.uploader[L],flat:!0,dense:!0};let Q;return L==="add"?(Z.onClick=_,Q=Ce):Z.onClick=A,s(W,Z,Q)}}function Ce(){return s("input",{ref:x,class:"q-uploader__input overflow-hidden absolute-full",tabindex:-1,type:"file",title:"",accept:l.accept,multiple:l.multiple===!0?"multiple":void 0,capture:l.capture,onMousedown:it,onClick:_,onChange:ge})}function be(){return i.header!==void 0?i.header(G):[s("div",{class:"q-uploader__header-content column"},[s("div",{class:"flex flex-center no-wrap q-gutter-xs"},[re(o.queuedFiles.value.length!==0,"removeQueue",le),re(o.uploadedFiles.value.length!==0,"removeUploaded",H),o.isUploading.value===!0?s(We,{class:"q-uploader__spinner"}):null,s("div",{class:"col column justify-center"},[l.label!==void 0?s("div",{class:"q-uploader__title"},[l.label]):null,s("div",{class:"q-uploader__subtitle"},[O.value+" / "+R.value])]),re(V.value,"add"),re(l.hideUploadBtn===!1&&E.value===!0,"upload",o.upload),re(o.isUploading.value,"clear",o.abort)])])]}function se(){return i.list!==void 0?i.list(G):o.files.value.map(v=>s("div",{key:v.__key,class:"q-uploader__file relative-position"+(l.noThumbnails!==!0&&v.__img!==void 0?" q-uploader__file--img":"")+(v.__status==="failed"?" q-uploader__file--failed":v.__status==="uploaded"?" q-uploader__file--uploaded":""),style:l.noThumbnails!==!0&&v.__img!==void 0?{backgroundImage:'url("'+v.__img.src+'")'}:null},[s("div",{class:"q-uploader__file-header row flex-center no-wrap"},[v.__status==="failed"?s(oe,{class:"q-uploader__file-status",name:f.iconSet.type.negative,color:"negative"}):null,s("div",{class:"q-uploader__file-header-content col"},[s("div",{class:"q-uploader__title"},[v.name]),s("div",{class:"q-uploader__subtitle row items-center no-wrap"},[v.__sizeLabel+" / "+v.__progressLabel])]),v.__status==="uploading"?s(sl,{value:v.__progress,min:0,max:1,indeterminate:v.__progress===0}):s(W,{round:!0,dense:!0,flat:!0,icon:f.iconSet.uploader[v.__status==="uploaded"?"done":"clear"],onClick:()=>{ae(v)}})])]))}dt(()=>{o.isUploading.value===!0&&o.abort(),o.files.value.length!==0&&we()});const G={};for(const v in o)$t(o[v])===!0?fe(G,v,()=>o[v].value):G[v]=o[v];return Object.assign(G,{upload:me,reset:J,removeUploadedFiles:H,removeQueuedFiles:le,removeFile:ae,pickFiles:_,addFiles:y}),vt(G,{canAddFiles:()=>V.value,canUpload:()=>E.value,uploadSizeLabel:()=>O.value,uploadProgressLabel:()=>R.value}),t({...o,upload:me,reset:J,removeUploadedFiles:H,removeQueuedFiles:le,removeFile:ae,pickFiles:_,addFiles:y,canAddFiles:V,canUpload:E,uploadSizeLabel:O,uploadProgressLabel:R}),()=>{const v=[s("div",{class:te.value},be()),s("div",{class:"q-uploader__list scroll"},se()),h("uploader")];o.isBusy.value===!0&&v.push(s("div",{class:"q-uploader__overlay absolute-full flex flex-center"},[s(We)]));const L={ref:q,class:X.value};return V.value===!0&&Object.assign(L,{onDragover:F,onDragleave:d}),s("div",L,v)}}const xl=()=>!0;function Bl(e){const t={};return e.forEach(n=>{t[n]=xl}),t}const Tl=Bl(_t),El=({name:e,props:t,emits:n,injectPlugin:l})=>ne({name:e,props:{...kl,...t},emits:ft(n)===!0?{...Tl,...n}:[..._t,...n],setup(i,{expose:c}){return Pl(l,c)}});function ee(e){return typeof e=="function"?e:()=>e}const Ll="QUploader",Rl={url:[Function,String],method:{type:[Function,String],default:"POST"},fieldName:{type:[Function,String],default:()=>e=>e.name},headers:[Function,Array],formFields:[Function,Array],withCredentials:[Function,Boolean],sendRaw:[Function,Boolean],batch:[Function,Boolean],factory:Function},Ol=["factoryFailed","uploaded","failed","uploading"];function zl({props:e,emit:t,helpers:n}){const l=z([]),i=z([]),c=z(0),r=b(()=>({url:ee(e.url),method:ee(e.method),headers:ee(e.headers),formFields:ee(e.formFields),fieldName:ee(e.fieldName),withCredentials:ee(e.withCredentials),sendRaw:ee(e.sendRaw),batch:ee(e.batch)})),f=b(()=>c.value>0),g=b(()=>i.value.length!==0);let w;function u(){l.value.forEach(o=>{o.abort()}),i.value.length!==0&&(w=!0)}function p(){const o=n.queuedFiles.value.slice(0);n.queuedFiles.value=[],r.value.batch(o)?q(o):o.forEach(_=>{q([_])})}function q(o){if(c.value++,typeof e.factory!="function"){x(o,{});return}const _=e.factory(o);if(!_)t("factoryFailed",new Error("QUploader: factory() does not return properly"),o),c.value--;else if(typeof _.catch=="function"&&typeof _.then=="function"){i.value.push(_);const y=F=>{n.isAlive()===!0&&(i.value=i.value.filter(d=>d!==_),i.value.length===0&&(w=!1),n.queuedFiles.value=n.queuedFiles.value.concat(o),o.forEach(d=>{n.updateFileStatus(d,"failed")}),t("factoryFailed",F,o),c.value--)};_.then(F=>{w===!0?y(new Error("Aborted")):n.isAlive()===!0&&(i.value=i.value.filter(d=>d!==_),x(o,F))}).catch(y)}else x(o,_||{})}function x(o,_){const y=new FormData,F=new XMLHttpRequest,d=(E,X)=>_[E]!==void 0?ee(_[E])(X):r.value[E](X),S=d("url",o);if(!S){console.error("q-uploader: invalid or no URL specified"),c.value--;return}const h=d("formFields",o);h!==void 0&&h.forEach(E=>{y.append(E.name,E.value)});let T=0,k=0,N=0,M=0,R;F.upload.addEventListener("progress",E=>{if(R===!0)return;const X=Math.min(M,E.loaded);n.uploadedSize.value+=X-N,N=X;let te=N-k;for(let J=T;te>0&&J<o.length;J++){const H=o[J];if(te>H.size)te-=H.size,T++,k+=H.size,n.updateFileStatus(H,"uploading",H.size);else{n.updateFileStatus(H,"uploading",te);return}}},!1),F.onreadystatechange=()=>{F.readyState<4||(F.status&&F.status<400?(n.uploadedFiles.value=n.uploadedFiles.value.concat(o),o.forEach(E=>{n.updateFileStatus(E,"uploaded")}),t("uploaded",{files:o,xhr:F})):(R=!0,n.uploadedSize.value-=N,n.queuedFiles.value=n.queuedFiles.value.concat(o),o.forEach(E=>{n.updateFileStatus(E,"failed")}),t("failed",{files:o,xhr:F})),c.value--,l.value=l.value.filter(E=>E!==F))},F.open(d("method",o),S),d("withCredentials",o)===!0&&(F.withCredentials=!0);const O=d("headers",o);O!==void 0&&O.forEach(E=>{F.setRequestHeader(E.name,E.value)});const V=d("sendRaw",o);o.forEach(E=>{n.updateFileStatus(E,"uploading",0),V!==!0&&y.append(d("fieldName",E),E,E.name),E.xhr=F,E.__abort=()=>{F.abort()},M+=E.size}),t("uploading",{files:o,xhr:F}),l.value.push(F),V===!0?F.send(new Blob(o)):F.send(y)}return{isUploading:f,isBusy:g,abort:u,upload:p}}const Ul={name:Ll,props:Rl,emits:Ol,injectPlugin:zl},Nl=El(Ul),at=ne({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:t}){const n=ye(),l=b(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return s("td",{class:l.value},he(t.default));const i=n.vnode.key,c=(e.props.colsMap!==void 0?e.props.colsMap[i]:null)||e.props.col;if(c===void 0)return;const{row:r}=e.props;return s("td",{class:l.value+c.__tdClass(r),style:c.__tdStyle(r)},he(t.default))}}}),jl=ne({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:t,emit:n}){const l=ye(),{proxy:{$q:i}}=l,c=r=>{n("click",r)};return()=>{if(e.props===void 0)return s("th",{class:e.autoWidth===!0?"q-table--col-auto-width":"",onClick:c},he(t.default));let r,f;const g=l.vnode.key;if(g){if(r=e.props.colsMap[g],r===void 0)return}else r=e.props.col;if(r.sortable===!0){const u=r.align==="right"?"unshift":"push";f=Wt(t.default,[]),f[u](s(oe,{class:r.__iconClass,name:i.iconSet.table.arrowUp}))}else f=he(t.default);const w={class:r.__thClass+(e.autoWidth===!0?" q-table--col-auto-width":""),style:r.headerStyle,onClick:u=>{r.sortable===!0&&e.props.sort(r),c(u)}};return s("th",w,f)}}});function pt(e,t){return s("div",e,[s("table",{class:"q-table"},t)])}const Dl={list:ul,table:cl},Al=["list","table","__qtable"],Il=ne({name:"QVirtualScroll",props:{...dl,type:{type:String,default:"list",validator:e=>Al.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:{default:void 0}},setup(e,{slots:t,attrs:n}){let l;const i=z(null),c=b(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:r,localResetVirtualScroll:f,padVirtualScroll:g,onVirtualScrollEvt:w}=vl({virtualScrollLength:c,getVirtualScrollTarget:o,getVirtualScrollEl:x}),u=b(()=>{if(c.value===0)return[];const d=(S,h)=>({index:r.value.from+h,item:S});return e.itemsFn===void 0?e.items.slice(r.value.from,r.value.to).map(d):e.itemsFn(r.value.from,r.value.to-r.value.from).map(d)}),p=b(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),q=b(()=>e.scrollTarget!==void 0?{}:{tabindex:0});ie(c,()=>{f()}),ie(()=>e.scrollTarget,()=>{y(),_()});function x(){return i.value.$el||i.value}function o(){return l}function _(){l=Xt(x(),e.scrollTarget),l.addEventListener("scroll",w,Ke.passive)}function y(){l!==void 0&&(l.removeEventListener("scroll",w,Ke.passive),l=void 0)}function F(){let d=g(e.type==="list"?"div":"tbody",u.value.map(t.default));return t.before!==void 0&&(d=t.before().concat(d)),rt(t.after,d)}return Kt(()=>{f()}),gt(()=>{_()}),Gt(()=>{_()}),Zt(()=>{y()}),dt(()=>{y()}),()=>{if(t.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?pt({ref:i,class:"q-table__middle "+p.value},F()):s(Dl[e.type],{...n,ref:i,class:[n.class,p.value],...q.value},F)}}}),Ql=s("div",{key:"svg",class:"q-checkbox__bg absolute"},[s("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[s("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),s("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]),De=ne({name:"QCheckbox",props:ol,emits:nl,setup(e){function t(n,l){const i=b(()=>(n.value===!0?e.checkedIcon:l.value===!0?e.indeterminateIcon:e.uncheckedIcon)||null);return()=>i.value!==null?[s("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[s(oe,{class:"q-checkbox__icon",name:i.value})])]:[Ql]}return rl("checkbox",t)}});function Vl(e,t){return new Date(e)-new Date(t)}const Ml={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>e==="ad"||e==="da",default:"ad"}};function Hl(e,t,n,l){const i=b(()=>{const{sortBy:f}=t.value;return f&&n.value.find(g=>g.name===f)||null}),c=b(()=>e.sortMethod!==void 0?e.sortMethod:(f,g,w)=>{const u=n.value.find(x=>x.name===g);if(u===void 0||u.field===void 0)return f;const p=w===!0?-1:1,q=typeof u.field=="function"?x=>u.field(x):x=>x[u.field];return f.sort((x,o)=>{let _=q(x),y=q(o);return u.rawSort!==void 0?u.rawSort(_,y,x,o)*p:_==null?-1*p:y==null?1*p:u.sort!==void 0?u.sort(_,y,x,o)*p:Ae(_)===!0&&Ae(y)===!0?(_-y)*p:Ge(_)===!0&&Ge(y)===!0?Vl(_,y)*p:typeof _=="boolean"&&typeof y=="boolean"?(_-y)*p:([_,y]=[_,y].map(F=>(F+"").toLocaleString().toLowerCase()),_<y?-1*p:_===y?0:p)})});function r(f){let g=e.columnSortOrder;if(ft(f)===!0)f.sortOrder&&(g=f.sortOrder),f=f.name;else{const p=n.value.find(q=>q.name===f);p!==void 0&&p.sortOrder&&(g=p.sortOrder)}let{sortBy:w,descending:u}=t.value;w!==f?(w=f,u=g==="da"):e.binaryStateSort===!0?u=!u:u===!0?g==="ad"?w=null:u=!1:g==="ad"?u=!0:w=null,l({sortBy:w,descending:u,page:1})}return{columnToSort:i,computedSortMethod:c,sort:r}}const $l={filter:[String,Object],filterMethod:Function};function Wl(e,t){const n=b(()=>e.filterMethod!==void 0?e.filterMethod:(l,i,c,r)=>{const f=i?i.toLowerCase():"";return l.filter(g=>c.some(w=>{const u=r(w,g)+"";return(u==="undefined"||u==="null"?"":u.toLowerCase()).indexOf(f)!==-1}))});return ie(()=>e.filter,()=>{mt(()=>{t({page:1},!0)})},{deep:!0}),{computedFilterMethod:n}}function Kl(e,t){for(const n in t)if(t[n]!==e[n])return!1;return!0}function ot(e){return e.page<1&&(e.page=1),e.rowsPerPage!==void 0&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}const Gl={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function Zl(e,t){const{props:n,emit:l}=e,i=z(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:n.rowsPerPageOptions.length!==0?n.rowsPerPageOptions[0]:5},n.pagination)),c=b(()=>{const u=n["onUpdate:pagination"]!==void 0?{...i.value,...n.pagination}:i.value;return ot(u)}),r=b(()=>c.value.rowsNumber!==void 0);function f(u){g({pagination:u,filter:n.filter})}function g(u={}){mt(()=>{l("request",{pagination:u.pagination||c.value,filter:u.filter||n.filter,getCellValue:t})})}function w(u,p){const q=ot({...c.value,...u});if(Kl(c.value,q)===!0){r.value===!0&&p===!0&&f(q);return}if(r.value===!0){f(q);return}n.pagination!==void 0&&n["onUpdate:pagination"]!==void 0?l("update:pagination",q):i.value=q}return{innerPagination:i,computedPagination:c,isServerSide:r,requestServerInteraction:g,setPagination:w}}function Xl(e,t,n,l,i,c){const{props:r,emit:f,proxy:{$q:g}}=e,w=b(()=>l.value===!0?n.value.rowsNumber||0:c.value),u=b(()=>{const{page:h,rowsPerPage:T}=n.value;return(h-1)*T}),p=b(()=>{const{page:h,rowsPerPage:T}=n.value;return h*T}),q=b(()=>n.value.page===1),x=b(()=>n.value.rowsPerPage===0?1:Math.max(1,Math.ceil(w.value/n.value.rowsPerPage))),o=b(()=>p.value===0?!0:n.value.page>=x.value),_=b(()=>(r.rowsPerPageOptions.includes(t.value.rowsPerPage)?r.rowsPerPageOptions:[t.value.rowsPerPage].concat(r.rowsPerPageOptions)).map(T=>({label:T===0?g.lang.table.allRows:""+T,value:T})));ie(x,(h,T)=>{if(h===T)return;const k=n.value.page;h&&!k?i({page:1}):h<k&&i({page:h})});function y(){i({page:1})}function F(){const{page:h}=n.value;h>1&&i({page:h-1})}function d(){const{page:h,rowsPerPage:T}=n.value;p.value>0&&h*T<w.value&&i({page:h+1})}function S(){i({page:x.value})}return r["onUpdate:pagination"]!==void 0&&f("update:pagination",{...n.value}),{firstRowIndex:u,lastRowIndex:p,isFirstPage:q,isLastPage:o,pagesNumber:x,computedRowsPerPageOptions:_,computedRowsNumber:w,firstPage:y,prevPage:F,nextPage:d,lastPage:S}}const Jl={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}},Yl=["update:selected","selection"];function ea(e,t,n,l){const i=b(()=>{const o={};return e.selected.map(l.value).forEach(_=>{o[_]=!0}),o}),c=b(()=>e.selection!=="none"),r=b(()=>e.selection==="single"),f=b(()=>e.selection==="multiple"),g=b(()=>n.value.length!==0&&n.value.every(o=>i.value[l.value(o)]===!0)),w=b(()=>g.value!==!0&&n.value.some(o=>i.value[l.value(o)]===!0)),u=b(()=>e.selected.length);function p(o){return i.value[o]===!0}function q(){t("update:selected",[])}function x(o,_,y,F){t("selection",{rows:_,added:y,keys:o,evt:F});const d=r.value===!0?y===!0?_:[]:y===!0?e.selected.concat(_):e.selected.filter(S=>o.includes(l.value(S))===!1);t("update:selected",d)}return{hasSelectionMode:c,singleSelection:r,multipleSelection:f,allRowsSelected:g,someRowsSelected:w,rowsSelectedNumber:u,isRowSelected:p,clearSelection:q,updateSelection:x}}function nt(e){return Array.isArray(e)?e.slice():[]}const ta={expanded:Array},la=["update:expanded"];function aa(e,t){const n=z(nt(e.expanded));ie(()=>e.expanded,r=>{n.value=nt(r)});function l(r){return n.value.includes(r)}function i(r){e.expanded!==void 0?t("update:expanded",r):n.value=r}function c(r,f){const g=n.value.slice(),w=g.indexOf(r);f===!0?w===-1&&(g.push(r),i(g)):w!==-1&&(g.splice(w,1),i(g))}return{isRowExpanded:l,setExpanded:i,updateExpanded:c}}const oa={visibleColumns:Array};function na(e,t,n){const l=b(()=>{if(e.columns!==void 0)return e.columns;const f=e.rows[0];return f!==void 0?Object.keys(f).map(g=>({name:g,label:g.toUpperCase(),field:g,align:Ae(f[g])?"right":"left",sortable:!0})):[]}),i=b(()=>{const{sortBy:f,descending:g}=t.value;return(e.visibleColumns!==void 0?l.value.filter(u=>u.required===!0||e.visibleColumns.includes(u.name)===!0):l.value).map(u=>{const p=u.align||"right",q=`text-${p}`;return{...u,align:p,__iconClass:`q-table__sort-icon q-table__sort-icon--${p}`,__thClass:q+(u.headerClasses!==void 0?" "+u.headerClasses:"")+(u.sortable===!0?" sortable":"")+(u.name===f?` sorted ${g===!0?"sort-desc":""}`:""),__tdStyle:u.style!==void 0?typeof u.style!="function"?()=>u.style:u.style:()=>null,__tdClass:u.classes!==void 0?typeof u.classes!="function"?()=>q+" "+u.classes:x=>q+" "+u.classes(x):()=>q}})}),c=b(()=>{const f={};return i.value.forEach(g=>{f[g.name]=g}),f}),r=b(()=>e.tableColspan!==void 0?e.tableColspan:i.value.length+(n.value===!0?1:0));return{colList:l,computedCols:i,computedColsMap:c,computedColspan:r}}const Ee="q-table__bottom row items-center",ht={};bt.forEach(e=>{ht[e]={}});const ra=ne({name:"QTable",props:{rows:{type:Array,required:!0},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{default:void 0},...ht,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...ut,...ml,...oa,...$l,...Gl,...ta,...Jl,...Ml},emits:["request","virtualScroll",...bl,...la,...Yl],setup(e,{slots:t,emit:n}){const l=ye(),{proxy:{$q:i}}=l,c=ct(e,i),{inFullscreen:r,toggleFullscreen:f}=_l(),g=b(()=>typeof e.rowKey=="function"?e.rowKey:a=>a[e.rowKey]),w=z(null),u=z(null),p=b(()=>e.grid!==!0&&e.virtualScroll===!0),q=b(()=>" q-table__card"+(c.value===!0?" q-table__card--dark q-dark":"")+(e.square===!0?" q-table--square":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")),x=b(()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(e.grid===!0?" q-table--grid":q.value)+(c.value===!0?" q-table--dark":"")+(e.dense===!0?" q-table--dense":"")+(e.wrapCells===!1?" q-table--no-wrap":"")+(r.value===!0?" fullscreen scroll":"")),o=b(()=>x.value+(e.loading===!0?" q-table--loading":""));ie(()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+x.value,()=>{p.value===!0&&u.value!==null&&u.value.reset()});const{innerPagination:_,computedPagination:y,isServerSide:F,requestServerInteraction:d,setPagination:S}=Zl(l,ce),{computedFilterMethod:h}=Wl(e,S),{isRowExpanded:T,setExpanded:k,updateExpanded:N}=aa(e,n),M=b(()=>{let a=e.rows;if(F.value===!0||a.length===0)return a;const{sortBy:m,descending:C}=y.value;return e.filter&&(a=h.value(a,e.filter,K.value,ce)),re.value!==null&&(a=Ce.value(e.rows===a?a.slice():a,m,C)),a}),R=b(()=>M.value.length),O=b(()=>{let a=M.value;if(F.value===!0)return a;const{rowsPerPage:m}=y.value;return m!==0&&(se.value===0&&e.rows!==a?a.length>G.value&&(a=a.slice(0,G.value)):a=a.slice(se.value,G.value)),a}),{hasSelectionMode:V,singleSelection:E,multipleSelection:X,allRowsSelected:te,someRowsSelected:J,rowsSelectedNumber:H,isRowSelected:le,clearSelection:Se,updateSelection:ae}=ea(e,n,O,g),{colList:we,computedCols:K,computedColsMap:ge,computedColspan:me}=na(e,y,V),{columnToSort:re,computedSortMethod:Ce,sort:be}=Hl(e,y,we,S),{firstRowIndex:se,lastRowIndex:G,isFirstPage:v,isLastPage:L,pagesNumber:A,computedRowsPerPageOptions:Z,computedRowsNumber:Q,firstPage:ue,prevPage:Le,nextPage:Re,lastPage:Oe}=Xl(l,_,y,F,S,R),yt=b(()=>O.value.length===0),St=b(()=>{const a={};return bt.forEach(m=>{a[m]=e[m]}),a.virtualScrollItemSize===void 0&&(a.virtualScrollItemSize=e.dense===!0?28:48),a});function wt(){p.value===!0&&u.value.reset()}function Ct(){if(e.grid===!0)return zt();const a=e.hideHeader!==!0?He:null;if(p.value===!0){const C=t["top-row"],P=t["bottom-row"],B={default:D=>Qe(D.item,t.body,D.index)};if(C!==void 0){const D=s("tbody",C({cols:K.value}));B.before=a===null?()=>D:()=>[a()].concat(D)}else a!==null&&(B.before=a);return P!==void 0&&(B.after=()=>s("tbody",P({cols:K.value}))),s(Il,{ref:u,class:e.tableClass,style:e.tableStyle,...St.value,scrollTarget:e.virtualScrollTarget,items:O.value,type:"__qtable",tableColspan:me.value,onVirtualScroll:Ft},B)}const m=[kt()];return a!==null&&m.unshift(a()),pt({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},m)}function qt(a,m){if(u.value!==null){u.value.scrollTo(a,m);return}a=parseInt(a,10);const C=w.value.querySelector(`tbody tr:nth-of-type(${a+1})`);if(C!==null){const P=w.value.querySelector(".q-table__middle.scroll"),B=C.offsetTop-e.virtualScrollStickySizeStart,D=B<P.scrollTop?"decrease":"increase";P.scrollTop=B,n("virtualScroll",{index:a,from:0,to:_.value.rowsPerPage-1,direction:D})}}function Ft(a){n("virtualScroll",a)}function Ie(){return[s(gl,{class:"q-table__linear-progress",color:e.color,dark:c.value,indeterminate:!0,trackColor:"transparent"})]}function Qe(a,m,C){const P=g.value(a),B=le(P);if(m!==void 0)return m(Ve({key:P,row:a,pageIndex:C,__trClass:B?"selected":""}));const D=t["body-cell"],j=K.value.map($=>{const Fe=t[`body-cell-${$.name}`],ke=Fe!==void 0?Fe:D;return ke!==void 0?ke(Pt({key:P,row:a,pageIndex:C,col:$})):s("td",{class:$.__tdClass(a),style:$.__tdStyle(a)},ce($,a))});if(V.value===!0){const $=t["body-selection"],Fe=$!==void 0?$(xt({key:P,row:a,pageIndex:C})):[s(De,{modelValue:B,color:e.color,dark:c.value,dense:e.dense,"onUpdate:modelValue":(ke,Ut)=>{ae([P],[a],ke,Ut)}})];j.unshift(s("td",{class:"q-table--col-auto-width"},Fe))}const Y={key:P,class:{selected:B}};return e.onRowClick!==void 0&&(Y.class["cursor-pointer"]=!0,Y.onClick=$=>{n("rowClick",$,a,C)}),e.onRowDblclick!==void 0&&(Y.class["cursor-pointer"]=!0,Y.onDblclick=$=>{n("rowDblclick",$,a,C)}),e.onRowContextmenu!==void 0&&(Y.class["cursor-pointer"]=!0,Y.onContextmenu=$=>{n("rowContextmenu",$,a,C)}),s("tr",Y,j)}function kt(){const a=t.body,m=t["top-row"],C=t["bottom-row"];let P=O.value.map((B,D)=>Qe(B,a,D));return m!==void 0&&(P=m({cols:K.value}).concat(P)),C!==void 0&&(P=P.concat(C({cols:K.value}))),s("tbody",P)}function Ve(a){return ze(a),a.cols=a.cols.map(m=>fe({...m},"value",()=>ce(m,a.row))),a}function Pt(a){return ze(a),fe(a,"value",()=>ce(a.col,a.row)),a}function xt(a){return ze(a),a}function ze(a){Object.assign(a,{cols:K.value,colsMap:ge.value,sort:be,rowIndex:se.value+a.pageIndex,color:e.color,dark:c.value,dense:e.dense}),V.value===!0&&fe(a,"selected",()=>le(a.key),(m,C)=>{ae([a.key],[a.row],m,C)}),fe(a,"expand",()=>T(a.key),m=>{N(a.key,m)})}function ce(a,m){const C=typeof a.field=="function"?a.field(m):m[a.field];return a.format!==void 0?a.format(C,m):C}const de=b(()=>({pagination:y.value,pagesNumber:A.value,isFirstPage:v.value,isLastPage:L.value,firstPage:ue,prevPage:Le,nextPage:Re,lastPage:Oe,inFullscreen:r.value,toggleFullscreen:f}));function Bt(){const a=t.top,m=t["top-left"],C=t["top-right"],P=t["top-selection"],B=V.value===!0&&P!==void 0&&H.value>0,D="q-table__top relative-position row items-center";if(a!==void 0)return s("div",{class:D},[a(de.value)]);let j;if(B===!0?j=P(de.value).slice():(j=[],m!==void 0?j.push(s("div",{class:"q-table__control"},[m(de.value)])):e.title&&j.push(s("div",{class:"q-table__control"},[s("div",{class:["q-table__title",e.titleClass]},e.title)]))),C!==void 0&&(j.push(s("div",{class:"q-table__separator col"})),j.push(s("div",{class:"q-table__control"},[C(de.value)]))),j.length!==0)return s("div",{class:D},j)}const Me=b(()=>J.value===!0?null:te.value);function He(){const a=Tt();return e.loading===!0&&t.loading===void 0&&a.push(s("tr",{class:"q-table__progress"},[s("th",{class:"relative-position",colspan:me.value},Ie())])),s("thead",a)}function Tt(){const a=t.header,m=t["header-cell"];if(a!==void 0)return a(Ue({header:!0})).slice();const C=K.value.map(P=>{const B=t[`header-cell-${P.name}`],D=B!==void 0?B:m,j=Ue({col:P});return D!==void 0?D(j):s(jl,{key:P.name,props:j},()=>P.label)});if(E.value===!0&&e.grid!==!0)C.unshift(s("th",{class:"q-table--col-auto-width"}," "));else if(X.value===!0){const P=t["header-selection"],B=P!==void 0?P(Ue({})):[s(De,{color:e.color,modelValue:Me.value,dark:c.value,dense:e.dense,"onUpdate:modelValue":$e})];C.unshift(s("th",{class:"q-table--col-auto-width"},B))}return[s("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},C)]}function Ue(a){return Object.assign(a,{cols:K.value,sort:be,colsMap:ge.value,color:e.color,dark:c.value,dense:e.dense}),X.value===!0&&fe(a,"selected",()=>Me.value,$e),a}function $e(a){J.value===!0&&(a=!1),ae(O.value.map(g.value),O.value,a)}const qe=b(()=>{const a=[e.iconFirstPage||i.iconSet.table.firstPage,e.iconPrevPage||i.iconSet.table.prevPage,e.iconNextPage||i.iconSet.table.nextPage,e.iconLastPage||i.iconSet.table.lastPage];return i.lang.rtl===!0?a.reverse():a});function Et(){if(e.hideBottom===!0)return;if(yt.value===!0){if(e.hideNoData===!0)return;const C=e.loading===!0?e.loadingLabel||i.lang.table.loading:e.filter?e.noResultsLabel||i.lang.table.noResults:e.noDataLabel||i.lang.table.noData,P=t["no-data"],B=P!==void 0?[P({message:C,icon:i.iconSet.table.warning,filter:e.filter})]:[s(oe,{class:"q-table__bottom-nodata-icon",name:i.iconSet.table.warning}),C];return s("div",{class:Ee+" q-table__bottom--nodata"},B)}const a=t.bottom;if(a!==void 0)return s("div",{class:Ee},[a(de.value)]);const m=e.hideSelectedBanner!==!0&&V.value===!0&&H.value>0?[s("div",{class:"q-table__control"},[s("div",[(e.selectedRowsLabel||i.lang.table.selectedRecords)(H.value)])])]:[];if(e.hidePagination!==!0)return s("div",{class:Ee+" justify-end"},Rt(m));if(m.length!==0)return s("div",{class:Ee},m)}function Lt(a){S({page:1,rowsPerPage:a.value})}function Rt(a){let m;const{rowsPerPage:C}=y.value,P=e.paginationLabel||i.lang.table.pagination,B=t.pagination,D=e.rowsPerPageOptions.length>1;if(a.push(s("div",{class:"q-table__separator col"})),D===!0&&a.push(s("div",{class:"q-table__control"},[s("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||i.lang.table.recordsPerPage]),s(fl,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:C,options:Z.value,displayValue:C===0?i.lang.table.allRows:C,dark:c.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":Lt})])),B!==void 0)m=B(de.value);else if(m=[s("span",C!==0?{class:"q-table__bottom-item"}:{},[C?P(se.value+1,Math.min(G.value,Q.value),Q.value):P(1,R.value,Q.value)])],C!==0&&A.value>1){const j={color:e.color,round:!0,dense:!0,flat:!0};e.dense===!0&&(j.size="sm"),A.value>2&&m.push(s(W,{key:"pgFirst",...j,icon:qe.value[0],disable:v.value,onClick:ue})),m.push(s(W,{key:"pgPrev",...j,icon:qe.value[1],disable:v.value,onClick:Le}),s(W,{key:"pgNext",...j,icon:qe.value[2],disable:L.value,onClick:Re})),A.value>2&&m.push(s(W,{key:"pgLast",...j,icon:qe.value[3],disable:L.value,onClick:Oe}))}return a.push(s("div",{class:"q-table__control"},m)),a}function Ot(){const a=e.gridHeader===!0?[s("table",{class:"q-table"},[He()])]:e.loading===!0&&t.loading===void 0?Ie():void 0;return s("div",{class:"q-table__middle"},a)}function zt(){const a=t.item!==void 0?t.item:m=>{const C=m.cols.map(B=>s("div",{class:"q-table__grid-item-row"},[s("div",{class:"q-table__grid-item-title"},[B.label]),s("div",{class:"q-table__grid-item-value"},[B.value])]));if(V.value===!0){const B=t["body-selection"],D=B!==void 0?B(m):[s(De,{modelValue:m.selected,color:e.color,dark:c.value,dense:e.dense,"onUpdate:modelValue":(j,Y)=>{ae([m.key],[m.row],j,Y)}})];C.unshift(s("div",{class:"q-table__grid-item-row"},D),s(il,{dark:c.value}))}const P={class:["q-table__grid-item-card"+q.value,e.cardClass],style:e.cardStyle};return(e.onRowClick!==void 0||e.onRowDblclick!==void 0)&&(P.class[0]+=" cursor-pointer",e.onRowClick!==void 0&&(P.onClick=B=>{n("RowClick",B,m.row,m.pageIndex)}),e.onRowDblclick!==void 0&&(P.onDblclick=B=>{n("RowDblclick",B,m.row,m.pageIndex)})),s("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(m.selected===!0?" q-table__grid-item--selected":"")},[s("div",P,C)])};return s("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},O.value.map((m,C)=>a(Ve({key:g.value(m),row:m,pageIndex:C}))))}return Object.assign(l.proxy,{requestServerInteraction:d,setPagination:S,firstPage:ue,prevPage:Le,nextPage:Re,lastPage:Oe,isRowSelected:le,clearSelection:Se,isRowExpanded:T,setExpanded:k,sort:be,resetVirtualScroll:wt,scrollTo:qt,getCellValue:ce}),vt(l.proxy,{filteredSortedRows:()=>M.value,computedRows:()=>O.value,computedRowsNumber:()=>Q.value}),()=>{const a=[Bt()],m={ref:w,class:o.value};return e.grid===!0?a.push(Ot()):Object.assign(m,{class:[m.class,e.cardClass],style:e.cardStyle}),a.push(Ct(),Et()),e.loading===!0&&t.loading!==void 0&&a.push(t.loading()),s("div",m,a)}}});function ia(e,t=2){if(!+e)return"0 Bytes";const n=1024,l=t<0?0:t,i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],c=Math.floor(Math.log(e)/Math.log(n));return`${parseFloat((e/Math.pow(n,c)).toFixed(l))} ${i[c]}`}const sa={watch:{folder_current(e){this.getFolderContent(e)}},setup(){const e=yl(),t=z(""),n=z(!1),l=z([]),i=[{label:"Type",name:"type",required:!0,align:"left",field:"is_dir",style:"width: 25px"},{label:"Name",name:"name",required:!0,align:"left",field:"name"},{label:"Path",name:"filepath",required:!0,align:"left",field:"filepath"},{label:"Size",name:"size",required:!0,align:"left",field:"size",format:S=>ia(S,0)}],c=z([]),r=z(""),f=z(!1),g=z(""),w=z(!1),u=z({rowsPerPage:0}),p=S=>S.split("/").filter(h=>h!=="").join("/"),q=b(()=>t.value?p(t.value).split("/"):[]),x=S=>{S.is_dir?t.value=S.filepath:pl(`/api/admin/files/file/${S.filepath}`)},o=(S=-1)=>{t.value=q.value.slice(0,S+1).join("/")};async function _(S=""){n.value=!0,c.value=[];let h=await fetch(`/api/admin/files/list/${S}`,{method:"GET",headers:{"Content-Type":"application/json"}}),T=await h.json();h.ok?l.value=T:(console.error(T),e.notify({message:`Error ${h.status} getting listing. Please check logs.`,caption:"Files",type:"negative"})),n.value=!1}async function y(S=[]){let h=await fetch("/api/admin/files/zip",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)});if(h.ok){e.notify({message:"Downloading ZIP file",caption:"Files",type:"positive"});let k=await h.blob();var T=window.URL.createObjectURL(k);window.location.assign(T)}else{let k=await h.json();console.error(k),e.notify({message:`Error ${h.status} creating zip. Please check logs.`,caption:"Files",type:"negative"})}}async function F(S=[]){let h=await fetch("/api/admin/files/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)});if(h.ok)e.notify({message:"Selected items deleted.",caption:"Files",type:"positive"});else{let T=await h.json();console.error(T),e.notify({message:`Error ${h.status} deleting items. Please check logs.`,caption:"Files",type:"negative"})}_(t.value)}async function d(S){let h=S;t.value&&(h=t.value+"/"+h),console.log(h);let T=await fetch("/api/admin/files/folder/new",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)}),k=await T.json();T.ok?(e.notify({message:`Folder "${S}" created.`,caption:"Files",type:"positive"}),_(t.value)):(console.error(k),e.notify({message:`Error ${T.status} while creating folder. Please check logs.`,caption:"Files",type:"negative"}))}return gt(()=>{_()}),{breadcrumbs:q,folder_current:t,folder_columns:i,folder_rows:l,folder_loading:n,pagination:u,selected:c,filter:r,dialog_create_new_folder:f,new_folder_name:g,dialog_upload_files:w,onNameClick:x,onBreadcrumbClick:o,getFolderContent:_,getZip:y,deleteItems:F,createNewFolder:d}}},ua={class:"q-pa-md"},ca={class:"text-h6"},da={class:"text-h6"},va=["onClick"];function fa(e,t,n,l,i,c){return _e(),Pe(hl,{padding:""},{default:I(()=>[pe("div",ua,[U(wl,{gutter:"sm",style:{cursor:"pointer"}},{default:I(()=>[U(tt,{label:e.$t("TITLE_FILES_WORKING_DIR"),icon:"home",onClick:t[0]||(t[0]=r=>l.onBreadcrumbClick(-1))},null,8,["label"]),(_e(!0),Yt(tl,null,el(l.breadcrumbs,(r,f)=>(_e(),Pe(tt,{key:f,onClick:g=>l.onBreadcrumbClick(f)},{default:I(()=>[al(Be(r),1)]),_:2},1032,["onClick"]))),128))]),_:1}),U(Je,{modelValue:l.dialog_create_new_folder,"onUpdate:modelValue":t[4]||(t[4]=r=>l.dialog_create_new_folder=r)},{default:I(()=>[U(Ze,{style:{"min-width":"350px"}},{default:I(()=>[U(xe,null,{default:I(()=>[pe("div",ca,Be(e.$t("TITLE_FILES_NEW_FOLDER_DIALOG")),1)]),_:1}),U(xe,{class:"q-pt-none"},{default:I(()=>[U(Ye,{dense:"",modelValue:l.new_folder_name,"onUpdate:modelValue":t[1]||(t[1]=r=>l.new_folder_name=r),autofocus:"",onKeyup:t[2]||(t[2]=ll(r=>{l.createNewFolder(l.new_folder_name),l.dialog_create_new_folder=!1},["enter"]))},null,8,["modelValue"])]),_:1}),U(Xe,{align:"right",class:"text-primary"},{default:I(()=>[Ne(U(W,{flat:"",label:e.$t("BTN_LABEL_CANCEL")},null,8,["label"]),[[je]]),Ne(U(W,{flat:"",label:e.$t("BTN_LABEL_FILES_CREATE_NEW_FOLDER"),onClick:t[3]||(t[3]=r=>l.createNewFolder(l.new_folder_name))},null,8,["label"]),[[je]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),U(Je,{modelValue:l.dialog_upload_files,"onUpdate:modelValue":t[7]||(t[7]=r=>l.dialog_upload_files=r)},{default:I(()=>[U(Ze,{style:{"min-width":"350px"}},{default:I(()=>[U(xe,null,{default:I(()=>[pe("div",da,Be(e.$t("TITLE_FILES_UPLOAD_FILES_DIALOG")),1)]),_:1}),U(xe,{class:"q-pt-none"},{default:I(()=>[U(Nl,{label:"Upload Files",url:"/api/admin/files/file/upload","form-fields":[{name:"upload_target_folder",value:l.folder_current}],"field-name":"uploaded_files",batch:"",multiple:"",onFinish:t[5]||(t[5]=r=>l.getFolderContent(l.folder_current)),onUploaded:t[6]||(t[6]=r=>l.dialog_upload_files=!1)},null,8,["form-fields"])]),_:1}),U(Xe,{align:"right",class:"text-primary"},{default:I(()=>[Ne(U(W,{flat:"",label:"Cancel"},null,512),[[je]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),U(ra,{class:"full-height",flat:"",bordered:"",title:"File Browser",pagination:l.pagination,rows:l.folder_rows,filter:l.filter,columns:l.folder_columns,color:"primary","row-key":"filepath",dense:"",loading:l.folder_loading,selection:"multiple",selected:l.selected,"onUpdate:selected":t[13]||(t[13]=r=>l.selected=r),"virtual-scroll":"","rows-per-page-options":[0]},{"body-cell-type":I(r=>[U(at,{props:r},{default:I(()=>[r.value?(_e(),Pe(oe,{key:0,name:"folder"})):(_e(),Pe(oe,{key:1,name:"description"}))]),_:2},1032,["props"])]),"body-cell-name":I(r=>[U(at,{props:r,style:{cursor:"pointer"}},{default:I(()=>[pe("div",{onClick:f=>l.onNameClick(r.row)},Be(r.value),9,va)]),_:2},1032,["props"])]),"top-left":I(()=>[pe("div",null,[U(W,{disable:l.folder_loading,onClick:t[8]||(t[8]=r=>l.dialog_create_new_folder=!0),label:e.$t("BTN_LABEL_FILES_NEW_FOLDER")},null,8,["disable","label"]),U(W,{class:"q-ml-sm",disable:l.folder_loading,onClick:t[9]||(t[9]=r=>l.dialog_upload_files=!0),label:e.$t("BTN_LABEL_FILES_UPLOAD_FILE")},null,8,["disable","label"]),U(W,{class:"q-ml-sm",disable:l.selected.length==0,onClick:t[10]||(t[10]=r=>l.getZip(l.selected)),label:e.$t("BTN_LABEL_FILES_DOWNLOAD_ZIP")},null,8,["disable","label"]),U(W,{class:"q-ml-sm",color:"negative",disable:l.selected.length==0,onClick:t[11]||(t[11]=r=>l.deleteItems(l.selected)),label:e.$t("BTN_LABEL_FILES_DELETE_SELECTED")},null,8,["disable","label"])])]),"top-right":I(()=>[U(Ye,{borderless:"",dense:"",debounce:"300",modelValue:l.filter,"onUpdate:modelValue":t[12]||(t[12]=r=>l.filter=r),placeholder:e.$t("TEXT_PLACEHOLDER_SEARCH")},{append:I(()=>[U(oe,{name:"search"})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["pagination","rows","filter","columns","loading","selected"])])]),_:1})}const xa=Jt(sa,[["render",fa],["__file","AdminFilesPage.vue"]]);export{xa as default};
