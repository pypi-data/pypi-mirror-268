"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[795],{84022:function(e,n,t){t.d(n,{C:function(){return RepoFilterButton}});var r=t(58467),o=t(52322),i=t(10952),s=t(18399),a=t(9001),l=t(67486),c=t(2784),u=t(75690),d=t(46988),RepoFilterButton=function(){var e=(0,c.useContext)(d.C5),n=e.allRepos,t=e.visibleRepos,h=e.toggleVisible,f=(0,r._)((0,c.useState)(!1),2),v=f[0],p=f[1];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(i.Vq,{canOutsideClickClose:!0,canEscapeKeyClose:!0,isOpen:v,style:{width:"auto"},onClose:function(){return p(!1)},children:[(0,o.jsx)(i.fK,{icon:"repo",label:"Filter code locations"}),(0,o.jsx)(u.e,{options:n,onBrowse:function(){return p(!1)},onToggle:h,selected:t}),(0,o.jsx)(i.cN,{children:(0,o.jsx)(s.x,{padding:{top:8},children:(0,o.jsx)(a.zx,{intent:"none",onClick:function(){return p(!1)},children:"Done"})})})]}),(0,o.jsx)(a.zx,{outlined:!0,icon:(0,o.jsx)(l.JO,{name:"folder"}),rightIcon:(0,o.jsx)(l.JO,{name:"expand_more"}),onClick:function(){return p(!0)},children:"".concat(t.length," of ").concat(n.length)})]})}},9445:function(e,n,t){t.d(n,{e:function(){return JobsPageContent}});var r=t(58467),o=t(73235),i=t(52322),s=t(40794),a=t(60138),l=t(18399),c=t(63832),u=t(25195),d=t(92364),h=t(34822),f=t(25557),v=t(2784),p=t(91195),x=t(55237),m=t(35157),j=t(71277),g=t(84022),y=t(43180),w=t(57830),b=t(88510),O=t(68884),C=t(55658),k=t(77277),_=t(42885),R=t(9901),T=t(86839),A=t(44254),OverviewJobsTable=function(e){var n=e.repos,t=(0,v.useRef)(null),r=(0,v.useMemo)(function(){return n.map(function(e){var n=e.repoAddress;return(0,A.Uz)(n)})},[n]),o=(0,_.N)(O.y,r),s=o.expandedKeys,a=o.onToggle,l=o.onToggleAll,c=(0,v.useMemo)(function(){var e=[];return n.forEach(function(n){var t=n.repoAddress,r=n.jobs;e.push({type:"header",repoAddress:t,jobCount:r.length});var o=(0,A.Uz)(t);s.includes(o)&&r.forEach(function(n){var r=n.isJob,o=n.name;e.push({type:"job",repoAddress:t,isJob:r,name:o})})}),e},[n,s]),u=(0,k.w)(n.map(function(e){return e.repoAddress.name})),d=(0,b.MG)({count:c.length,getScrollElement:function(){return t.current},estimateSize:function(e){var n=c[e];return(null==n?void 0:n.type)==="header"?32:64},overscan:10}),h=d.getTotalSize(),f=d.getVirtualItems();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(R.I,{}),(0,i.jsx)("div",{style:{overflow:"hidden"},children:(0,i.jsx)(C.W2,{ref:t,children:(0,i.jsx)(C.Nh,{$totalHeight:h,children:f.map(function(e){var n=e.index,t=e.key,r=e.size,o=e.start,d=c[n];return"header"===d.type?(0,i.jsx)(T.vG,{repoAddress:d.repoAddress,height:r,start:o,onToggle:a,onToggleAll:l,expanded:s.includes((0,A.Uz)(d.repoAddress)),showLocation:u.has(d.repoAddress.name),rightElement:(0,i.jsx)(y.u,{content:1===d.jobCount?"1 job":"".concat(d.jobCount," jobs"),placement:"top",children:(0,i.jsx)(w.V,{children:d.jobCount})})},t):(0,i.jsx)(R.b,{name:d.name,isJob:d.isJob,repoAddress:d.repoAddress,height:r,start:o},t)})})})})]})},S=t(44392),N=t(89191),L=t(58298),E=t(46988),I=t(37160);function _templateObject(){var e=(0,o._)(["\n  query OverviewJobsQuery {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  name\n                  isJob\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return _templateObject=function(){return e},e}var JobsPageContent=function(){var e=(0,v.useContext)(E.C5),n=e.allRepos,t=e.visibleRepos,o=e.loading,a=(0,r._)((0,j.q)({queryKey:"search",defaults:{search:""}}),2),p=a[0],m=a[1],y=n.length,w=(0,s.a)(z,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),b=w.data,O=w.loading,C=(0,x.C4)(w,x.dT),k=(0,v.useMemo)(function(){var e=(0,N.S)(t);return buildBuckets(b).filter(function(n){var t=n.repoAddress;return e.has((0,A.Uz)(t))})},[b,t]),_=p.trim().toLocaleLowerCase(),R=_.length>0,T=(0,v.useMemo)(function(){var e=_.toLocaleLowerCase();return k.map(function(n){return{repoAddress:n.repoAddress,jobs:n.jobs.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})}}).filter(function(e){return e.jobs.length>0})},[k,_]),S=o&&!y||O&&!b;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(l.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",justifyContent:"space-between",grow:0},children:[(0,i.jsxs)(l.x,{flex:{direction:"row",gap:12,alignItems:"center"},children:[y>1?(0,i.jsx)(g.C,{}):null,(0,i.jsx)(h.oi,{icon:"search",value:p,rightElement:S?(0,i.jsx)(L.W,{tooltipContent:"Loading jobs…"}):void 0,onChange:function(e){return m(e.target.value)},placeholder:"Filter by job name…",style:{width:"340px"}})]}),(0,i.jsx)(x.xi,{refreshState:C})]}),O&&!y?(0,i.jsx)(l.x,{padding:64,children:(0,i.jsx)(f.f,{label:"Loading jobs…"})}):function(){if(O&&!b)return(0,i.jsx)(l.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,i.jsxs)(l.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,i.jsx)(c.$,{purpose:"body-text"}),(0,i.jsx)("div",{style:{color:u.$()},children:"Loading jobs…"})]})});var e=n.length>t.length;return T.length?(0,i.jsx)(OverviewJobsTable,{repos:T}):R?(0,i.jsx)(l.x,{padding:{top:20},children:(0,i.jsx)(d.t,{icon:"search",title:"No matching jobs",description:e?(0,i.jsxs)("div",{children:["No jobs matching ",(0,i.jsx)("strong",{children:p})," were found in the selected code locations"]}):(0,i.jsxs)("div",{children:["No jobs matching ",(0,i.jsx)("strong",{children:p})," were found in your definitions"]})})}):(0,i.jsx)(l.x,{padding:{top:20},children:(0,i.jsx)(d.t,{icon:"search",title:"No jobs",description:e?"No jobs were found in the selected code locations":"No jobs were found in your definitions"})})}()]})},buildBuckets=function(e){if((null==e?void 0:e.workspaceOrError.__typename)!=="Workspace")return[];var n=e.workspaceOrError.locationEntries.map(function(e){return e.locationOrLoadError}),t=[],r=!0,o=!1,i=void 0;try{for(var s,a=n[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var l=s.value;if((null==l?void 0:l.__typename)==="RepositoryLocation"){var c=!0,u=!1,d=void 0;try{for(var h,f=l.repositories[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var v=h.value,p=v.name,x=v.pipelines,j=(0,I.kQ)(p,l.name),g=x.filter(function(e){var n=e.name;return!(0,m.pv)(n)}).map(function(e){return{isJob:e.isJob,name:e.name}});g.length>0&&t.push({repoAddress:j,jobs:g})}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}}}}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return(0,S.S)(t)},z=(0,a.Ps)(_templateObject(),p.B)},71795:function(e,n,t){t.r(n),t.d(n,{OverviewRoot:function(){return OverviewRoot},default:function(){return eW}});var r=t(52322),o=t(7267),i=t(58467),s=t(9001),a=t(18399),l=t(2784),c=t(85333),u=t(6692),d=t(73235),h=t(63832),f=t(34822),v=t(25195),p=t(21106),x=t(67486),m=t(57830),j=t(17276),g=t(44678),y=t(81308),w=t(88510),b=t(47933),O=t(35505),C=t(56266),k=t(55237),_=t(68028),R=t(8169),T=t(99322),A=t(35157),S=t(16339),N=t(58885),L=t(65885),E=t(74711),I=t(28252),z=t(71277),P=t(63386),F=t(83568),M=t(55658),W=t(37160),$=t(38153);function _templateObject(){var e=(0,d._)(["\n  display: grid;\n  grid-template-columns: ",";\n  height: 100%;\n  > * {\n    vertical-align: middle;\n  }\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,d._)(["\n  font-size: 12px;\n  pointer-events: none;\n  a {\n    color: ",";\n    pointer-events: none;\n    max-width: ",";\n  }\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){var e=(0,d._)(["\n  cursor: pointer;\n  &:hover {\n    font-weight: 600;\n  }\n"]);return _templateObject2=function(){return e},e}function _templateObject3(){var e=(0,d._)(["\n  &:hover {\n    text-decoration: none;\n  }\n"]);return _templateObject3=function(){return e},e}var OverviewAssetsRoot=function(e){var n=e.Header,t=e.TabButton;(0,_.Px)(),(0,I.j)("Overview | Assets");var o=(0,L.Zg)(),s=o.assets,c=o.query,u=o.error,d=o.loading,v=(0,k.bT)({refresh:c,intervalMs:k.dT,leading:!0}),p=l.useMemo(function(){var e;return s?(e={},s.forEach(function(n){if(n.definition){var t=n.definition.groupName,r=n.definition.repository.name,o="".concat(t,"||").concat(r),i=e[o]||{groupName:t,repositoryName:r,assets:[]};i.assets.push(n),e[o]=i}}),Object.values(e)):[]},[s]),x=(0,i._)((0,z.q)({queryKey:"q",decode:function(e){return e.searchQuery?JSON.parse(e.searchQuery):""},encode:function(e){return{searchQuery:e?JSON.stringify(e):void 0}}}),2),m=x[0],j=x[1],g=l.useMemo(function(){return""===m?p:p.filter(function(e){return(e.groupName||B).toLowerCase().includes(m.toLowerCase())||e.repositoryName.toLowerCase().includes(m.toLowerCase())})},[p,m]),y=l.useMemo(function(){var e;return null!==(e=g.flatMap(function(e){return e.assets.map(function(e){return e.key})}))&&void 0!==e?e:[]},[g]),b=(0,R.NY)(y,"OverviewAssetsRoot").liveDataByNode,O=(0,F.se)("OverviewAssetsRoot"),T=Object.keys(b).length===y.length;l.useEffect(function(){T&&O.endTrace()},[T,O]);var A=l.useRef(null),S=(0,w.MG)({count:g.length,getScrollElement:function(){return A.current},estimateSize:function(){return 82},overscan:5}),N=S.getTotalSize(),E=S.getVirtualItems();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{style:{position:"sticky",top:0,zIndex:1},children:[(0,r.jsx)(n,{refreshState:v}),(0,r.jsxs)(a.x,{padding:{horizontal:24,vertical:16},flex:{alignItems:"center",gap:12,grow:0},children:[(0,r.jsx)(t,{selected:"assets"}),(0,r.jsx)(f.oi,{value:m,onChange:function(e){j(e.target.value)},placeholder:"Filter asset groups…"})]})]}),d?(0,r.jsx)(a.x,{flex:{alignItems:"center",justifyContent:"center",direction:"column",grow:1},style:{width:"100%"},children:(0,r.jsx)(h.$,{purpose:"page"})}):u?(0,r.jsx)(a.x,{flex:{alignItems:"center",justifyContent:"center",direction:"column",grow:1},style:{width:"100%"},children:(0,r.jsx)(C.T9,{error:u})}):(0,r.jsx)(a.x,{flex:{direction:"column"},style:{overflow:"hidden"},children:(0,r.jsxs)(M.W2,{ref:A,children:[(0,r.jsx)(VirtualHeaderRow,{}),(0,r.jsx)(M.Nh,{$totalHeight:N,children:E.map(function(e){var n=e.index,t=e.key,o=e.size,i=e.start,s=g[n];return(0,r.jsx)(VirtualRow,{start:i,height:o,group:s},t)})})]})})]})},J="5fr 1fr 1fr 1fr 1fr";function VirtualHeaderRow(){return(0,r.jsxs)(a.x,{border:"top-and-bottom",style:{display:"grid",gridTemplateColumns:J,height:"32px",fontSize:"12px",color:v.$(),position:"sticky",top:0,zIndex:1,background:v.v8()},children:[(0,r.jsx)(M.qN,{children:"Group name"}),(0,r.jsx)(M.qN,{children:"Missing"}),(0,r.jsx)(M.qN,{children:"Failed/Overdue"}),(0,r.jsx)(M.qN,{children:"In progress"}),(0,r.jsx)(M.qN,{children:"Materialized"})]})}var B="Ungrouped Assets";function VirtualRow(e){var n,t,o=e.height,i=e.start,s=e.group,d=l.useMemo(function(){return s.assets.map(function(e){return{path:e.key.path}})},[s.assets]),f=(0,R.NY)(d).liveDataByNode,j=(0,F.se)("OverviewAssetsRoot:GroupBatch"),g=l.useMemo(function(){return(0,S.s)(s.assets,f)},[f,s.assets]),y=null===(t=s.assets.find(function(e){var n;return null===(n=e.definition)||void 0===n?void 0:n.repository}))||void 0===t?void 0:null===(n=t.definition)||void 0===n?void 0:n.repository,w=(0,W.kQ)((null==y?void 0:y.name)||"",(null==y?void 0:y.location.name)||""),O=(0,p.S)(),C=O.containerProps,k=O.viewport,_=d.length!==Object.keys(f).length,A=_?"":"0";return l.useEffect(function(){_||j.endTrace()},[j,_]),(0,r.jsx)(M.X2,{$height:o,$start:i,children:(0,r.jsxs)(q,{border:"bottom",children:[(0,r.jsx)(Cell,{children:(0,r.jsxs)(a.x,{flex:{direction:"row",justifyContent:"space-between",grow:1},children:[(0,r.jsxs)(a.x,{flex:{direction:"column",gap:2,grow:1},children:[(0,r.jsxs)(a.x,{flex:{direction:"row",gap:8},children:[(0,r.jsx)(x.JO,{name:"asset_group"}),s.groupName?(0,r.jsx)(b.rU,{style:{fontWeight:700},to:(0,$.$U)(w,"/asset-groups/".concat(s.groupName)),children:s.groupName}):B]}),(0,r.jsx)("div",(0,u._)((0,c._)({},C),{children:(0,r.jsx)(H,{maxWidth:k.width,children:(0,r.jsx)(P.b,{repoAddress:w,showRefresh:!1})})}))]}),(0,r.jsx)(a.x,{flex:{direction:"column",justifyContent:"center"},children:_?(0,r.jsx)(h.$,{purpose:"body-text"}):null})]})}),(0,r.jsx)(Cell,{children:g.missing.length?(0,r.jsx)(SelectOnHover,{assets:g.missing,getCount:function(e){var n=e.status;return n.case===T.KB.PARTITIONS_MISSING&&n.numMissing||0},adjective:"missing",children:(0,r.jsx)(m.V,{intent:"none",children:(0,r.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,r.jsx)("div",{style:{width:"12px",height:"12px",border:"2px solid ".concat(v.im()),borderRadius:"50%"}}),g.missing.length]})})}):A}),(0,r.jsx)(Cell,{children:g.failed.length?(0,r.jsx)(SelectOnHover,{assets:g.failed,getCount:function(e){var n=e.status;return n.case===T.KB.PARTITIONS_FAILED&&n.numFailed||0},adjective:"failed",children:(0,r.jsx)(m.V,{intent:"danger",children:(0,r.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,r.jsx)("div",{style:{width:0,height:0,borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderBottom:"10px solid red",display:"inline-block"}}),g.failed.length]})})}):A}),(0,r.jsx)(Cell,{children:g.inprogress.length?(0,r.jsx)(SelectOnHover,{assets:g.inprogress,getCount:function(e){var n=e.status;return n.case===T.KB.MATERIALIZING&&n.numMaterializing||0},adjective:"materializing",children:(0,r.jsx)(m.V,{intent:"primary",icon:"spinner",children:g.inprogress.length})}):A}),(0,r.jsx)(Cell,{children:g.successful.length?(0,r.jsx)(SelectOnHover,{assets:g.successful,getCount:function(e){var n=e.status;return n.case===T.KB.PARTITIONS_MATERIALIZED&&n.numMaterialized||0},adjective:"materialized",children:(0,r.jsx)(m.V,{intent:"success",children:(0,r.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,r.jsx)("div",{style:{backgroundColor:v.fA(),width:"10px",height:"10px",borderRadius:"50%"}}),g.successful.length]})})}):A})]})})}var q=(0,O.ZP)(a.x).withConfig({componentId:"sc-55c06f59-0"})(_templateObject(),J),Cell=function(e){var n=e.children;return(0,r.jsx)(M.E5,{style:{color:v.Ep()},children:(0,r.jsx)(a.x,{flex:{direction:"row",alignItems:"center",grow:1},children:n})})},H=O.ZP.div.withConfig({componentId:"sc-55c06f59-1"})(_templateObject1(),v.$(),function(e){var n=e.maxWidth;return n?"unset":"".concat(n,"px")});function SelectOnHover(e){var n=e.assets,t=e.children,o=e.getCount,i=e.adjective;return(0,r.jsx)(D,{children:(0,r.jsx)(j.P,{items:n,itemPredicate:function(e,n){return(0,A.ll)(n.asset.key).toLocaleLowerCase().includes(e.toLocaleLowerCase())},itemRenderer:function(e){var n=o(e);return(0,r.jsx)(U,{to:(0,E.p)(e.asset.key),target:"_blank",children:(0,r.jsx)(g.sN,{text:(0,r.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,r.jsx)("div",{style:{paddingLeft:"4px"},children:(0,r.jsx)(x.JO,{name:"asset"})}),(0,r.jsx)("div",{style:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:(0,A.ll)(e.asset.key)}),n&&n>0?(0,r.jsxs)(y.YS,{style:{color:v.$()},children:[(0,N._e)(n)," ",i]}):null]})},(0,A.ll)(e.asset.key))})},onItemSelect:function(){},children:t})})}var D=O.ZP.div.withConfig({componentId:"sc-55c06f59-2"})(_templateObject2()),U=(0,O.ZP)(b.rU).withConfig({componentId:"sc-55c06f59-3"})(_templateObject3()),K=t(2281),V=t(17131),Q=(0,t(53360).f)("OverviewPageAlerts"),G=t(56024),Z=t(58341),X=t(81966),Y=t(40049),OverviewTabs=function(e){var n=e.refreshState,t=e.tab,o=(0,X.dx)(),i=(0,Z.I)();return(0,r.jsxs)(a.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,r.jsxs)(G.mQ,{selectedTabId:t,children:[(0,r.jsx)(Y.f,{id:"activity",title:"Activity",to:"/overview/activity"}),(0,r.jsx)(Y.f,{id:"jobs",title:"Jobs",to:"/overview/jobs"}),(0,r.jsx)(Y.f,{id:"schedules",title:"Schedules",to:"/overview/schedules"}),(0,r.jsx)(Y.f,{id:"sensors",title:"Sensors",to:"/overview/sensors"}),"has-global-amp"===i?(0,r.jsx)(Y.f,{id:"amp",title:(0,r.jsxs)(a.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,r.jsx)("div",{children:"Auto-materialize"}),o.loading?(0,r.jsx)(h.$,{purpose:"body-text"}):(0,r.jsx)("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:!1===o.paused?v.L$():v.md()}})]}),to:"/overview/automation"}):null,(0,r.jsx)(Y.f,{id:"resources",title:"Resources",to:"/overview/resources"}),(0,r.jsx)(Y.f,{id:"backfills",title:"Backfills",to:"/overview/backfills"})]}),n?(0,r.jsx)(a.x,{padding:{bottom:8},children:(0,r.jsx)(k.xi,{refreshState:n})}):null]})},OverviewPageHeader=function(e){var n=e.tab,t=e.queryData,o=e.refreshState,i=(0,K._)(e,["tab","queryData","refreshState"]);return(0,r.jsx)(V.m,(0,c._)({title:(0,r.jsx)(y.X6,{children:"Overview"}),tabs:(0,r.jsxs)(a.x,{flex:{direction:"column",gap:8},children:[(0,r.jsx)(OverviewTabs,{tab:n,queryData:t,refreshState:o}),(0,r.jsx)(Q,{})]})},i))},ee=t(99596),en=t(64595),et=t(84022),er=t(35564),eo=t(15282),useHourWindow=function(e){var n=(0,l.useCallback)(function(n){switch(n){case"1":case"6":case"12":case"24":return n;default:return e}},[e]),t=(0,i._)((0,eo.U)("dagster.run-timeline-hour-window",n),2),r=t[0],o=t[1],s=(0,l.useCallback)(function(n){o(n||e)},[e,o]);return(0,l.useMemo)(function(){return[r,s]},[r,s])},ei=t(87612),es=t(82550),ea=t(40794),el=t(60138),ec=t(6315),eu=t(38917),ed=t(16413),eh=t(61935);function NextTick_templateObject(){var e=(0,d._)(["\n  fragment ScheduleFutureTicksFragment on Schedule {\n    id\n    executionTimezone\n    scheduleState {\n      id\n      status\n    }\n    futureTicks(cursor: $tickCursor, until: $ticksUntil) {\n      results {\n        timestamp\n      }\n    }\n  }\n"]);return NextTick_templateObject=function(){return e},e}var ef=(0,el.Ps)(NextTick_templateObject()),ev=t(44254);function useRunsForTimeline_templateObject(){var e=(0,d._)(["\n  query RunTimelineQuery(\n    $inProgressFilter: RunsFilter!\n    $terminatedFilter: RunsFilter!\n    $tickCursor: Float\n    $ticksUntil: Float\n  ) {\n    unterminated: runsOrError(filter: $inProgressFilter) {\n      ... on Runs {\n        results {\n          id\n          pipelineName\n          repositoryOrigin {\n            id\n            repositoryName\n            repositoryLocationName\n          }\n          ...RunTimeFragment\n        }\n      }\n    }\n    terminated: runsOrError(filter: $terminatedFilter) {\n      ... on Runs {\n        results {\n          id\n          pipelineName\n          repositoryOrigin {\n            id\n            repositoryName\n            repositoryLocationName\n          }\n          ...RunTimeFragment\n        }\n      }\n    }\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          name\n          loadStatus\n          displayMetadata {\n            key\n            value\n          }\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  name\n                  isJob\n                }\n                schedules {\n                  id\n                  name\n                  pipelineName\n                  scheduleState {\n                    id\n                    status\n                  }\n                  ...ScheduleFutureTicksFragment\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  ","\n  ","\n"]);return useRunsForTimeline_templateObject=function(){return e},e}var useRunsForTimeline=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=(0,i._)(e,2),r=t[0],o=t[1],s=r/1e3,a=o/1e3,d=(0,ea.a)(ep,{notifyOnNetworkStatusChange:!0,fetchPolicy:"no-cache",variables:{inProgressFilter:(0,u._)((0,c._)({},n),{statuses:[eh.VOA.CANCELING,eh.VOA.STARTED],createdBefore:a}),terminatedFilter:(0,u._)((0,c._)({},n),{statuses:Array.from(ec.cv),createdBefore:a,updatedAfter:s}),tickCursor:s,ticksUntil:a}}),h=d.data,f=d.previousData,v=d.loading&&!h,p=h||f||{},x=p.unterminated,m=p.terminated,j=p.workspaceOrError,g=(0,l.useMemo)(function(){var e={},n=Date.now();return(0,es._)((null==x?void 0:x.__typename)==="Runs"?x.results:[]).concat((0,es._)((null==m?void 0:m.__typename)==="Runs"?m.results:[])).forEach(function(t){if(t.startTime&&t.repositoryOrigin&&(0,ed.a)({start:r,end:o},{start:1e3*t.startTime,end:t.endTime?1e3*t.endTime:n})){var i=makeJobKey({name:t.repositoryOrigin.repositoryName,location:t.repositoryOrigin.repositoryLocationName},t.pipelineName);e[i]=(0,es._)(e[i]||[]).concat([{id:t.id,status:t.status,startTime:1e3*t.startTime,endTime:t.endTime?1e3*t.endTime:n}])}}),e},[o,x,m,r]),y=(0,l.useMemo)(function(){if(!j||"Workspace"!==j.__typename)return[];var e=[],n=!0,t=!1,i=void 0;try{for(var s,a=j.locationEntries[Symbol.iterator]();!(n=(s=a.next()).done);n=!0)!function(){var n=s.value;if("WorkspaceLocationEntry"===n.__typename&&(null===(c=n.locationOrLoadError)||void 0===c?void 0:c.__typename)==="RepositoryLocation"){var t=Date.now(),i=!0,a=!1,l=void 0;try{for(var c,u,d=n.locationOrLoadError.repositories[Symbol.iterator]();!(i=(u=d.next()).done);i=!0)!function(){var i=u.value,s=(0,W.kQ)(i.name,n.locationOrLoadError.name),a=!0,l=!1,c=void 0;try{for(var d,h=i.pipelines[Symbol.iterator]();!(a=(d=h.next()).done);a=!0)!function(){var n=d.value,a=(i.schedules||[]).filter(function(e){return e.pipelineName===n.name}),l=[],c=!0,u=!1,h=void 0;try{for(var f,v=a[Symbol.iterator]();!(c=(f=v.next()).done);c=!0)!function(){var e=f.value;e.scheduleState.status===eh.ynu.RUNNING&&e.futureTicks.results.forEach(function(n){var i=n.timestamp,s=1e3*i;s>t&&(0,ed.a)({start:r,end:o},{start:s,end:s})&&l.push({id:"".concat(e.pipelineName,"-future-run-").concat(i),status:"SCHEDULED",startTime:s,endTime:s+5e3})})}()}catch(e){u=!0,h=e}finally{try{c||null==v.return||v.return()}finally{if(u)throw h}}var p=(0,A.pv)(n.name),x=makeJobKey(s,n.name),m=p?"Ad hoc materializations":n.name,j=g[x]||[];if(l.length||j.length){var y=(0,es._)(j).concat((0,es._)(l));if(p){var w,b=e.find(function(e){return"asset"===e.jobType&&e.repoAddress===s});if(b)return(w=b.runs).push.apply(w,(0,es._)(y))}e.push({key:x,jobName:m,jobType:p?"asset":"job",repoAddress:s,path:(0,$.jT)({repoName:s.name,repoLocation:s.location,pipelineName:n.name,isJob:n.isJob}),runs:(0,es._)(j).concat((0,es._)(l))})}}()}catch(e){l=!0,c=e}finally{try{a||null==h.return||h.return()}finally{if(l)throw c}}}()}catch(e){a=!0,l=e}finally{try{i||null==d.return||d.return()}finally{if(a)throw l}}}}()}catch(e){t=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(t)throw i}}var l=e.reduce(function(e,n){var t,r=n.runs.map(function(e){return e.startTime});return(0,u._)((0,c._)({},e),(0,ei._)({},n.key,(t=Math).min.apply(t,(0,es._)(r))))},{});return e.sort(function(e,n){return l[e.key]-l[n.key]})},[j,g,r,o]);return(0,l.useMemo)(function(){return{jobs:y,initialLoading:v,queryData:d}},[v,y,d])},makeJobKey=function(e,n){return"".concat(n,"-").concat((0,ev.Uz)(e))},ep=(0,el.Ps)(useRunsForTimeline_templateObject(),eu.$X,ef),ex=t(46988),hourWindowToOffset=function(e){switch(e){case"1":return 36e5;case"6":return 216e5;case"12":return 432e5;case"24":return 864e5}},OverviewTimelineRoot=function(e){var n=e.Header,t=e.TabButton;(0,_.Px)(),(0,I.j)("Overview | Timeline");var o=(0,F.se)("OverviewTimelineRoot"),c=l.useContext(ex.C5),u=c.allRepos,d=c.visibleRepos,h=(0,i._)(useHourWindow("12"),2),v=h[0],p=h[1],x=(0,i._)(l.useState(function(){return Date.now()}),2),m=x[0],j=x[1],g=(0,i._)(l.useState(function(){return 0}),2),y=g[0],w=g[1],b=(0,i._)((0,z.q)({queryKey:"search",defaults:{search:""}}),2),O=b[0],C=b[1];l.useEffect(function(){j(Date.now());var e=setInterval(function(){j(Date.now())},6e4);return function(){clearInterval(e)}},[v]);var R=l.useCallback(function(){w(function(e){return e-hourWindowToOffset(v)})},[v]),T=l.useCallback(function(){w(function(e){return e+hourWindowToOffset(v)})},[v]),A=l.useCallback(function(){w(0)},[]),S=l.useMemo(function(){return[m-36e5*Number(v)+y,m+36e5+y]},[v,m,y]),N=useRunsForTimeline(S),L=N.jobs,E=N.initialLoading,P=N.queryData,M=(0,k.C4)(P,k.dT);l.useEffect(function(){E||o.endTrace()},[E,o]);var $=l.useMemo(function(){var e=O.toLocaleLowerCase().trim(),n=d.flatMap(function(n){var t=(0,W.kQ)(n.repository.name,n.repositoryLocation.name);return n.repository.pipelines.filter(function(n){return n.name.toLocaleLowerCase().includes(e)}).map(function(e){return makeJobKey(t,e.name)})});return new Set(n)},[d,O]),J=l.useMemo(function(){return L.filter(function(e){var n=e.key;return $.has(n)})},[L,$]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n,{refreshState:M}),(0,r.jsxs)(a.x,{padding:{horizontal:24,vertical:16},flex:{alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[(0,r.jsx)(t,{selected:"timeline"}),u.length>1&&(0,r.jsx)(et.C,{}),(0,r.jsx)(f.oi,{icon:"search",value:O,onChange:function(e){return C(e.target.value)},placeholder:"Filter by job name…",style:{width:"200px"}})]}),(0,r.jsxs)(a.x,{flex:{direction:"row",gap:16,alignItems:"center"},children:[(0,r.jsx)(ee.h,{activeItems:new Set([v]),buttons:[{id:"1",label:"1hr"},{id:"6",label:"6hr"},{id:"12",label:"12hr"},{id:"24",label:"24hr"}],onClick:function(e){return p(e)}}),(0,r.jsxs)(a.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,r.jsx)(s.zx,{onClick:R,children:"←"}),(0,r.jsx)(s.zx,{onClick:A,children:"Now"}),(0,r.jsx)(s.zx,{onClick:T,children:"→"})]})]})]}),(0,r.jsx)(en.S,{region:"timeline",children:(0,r.jsx)(er.q,{loading:E,range:S,jobs:J})})]})},em=t(46928),OverviewActivityRoot=function(){(0,_.Px)(),(0,I.j)("Overview | Activity");var e=l.useCallback(function(e){var n=e.refreshState;return(0,r.jsx)(OverviewPageHeader,{tab:"activity",refreshState:n})},[]),n=(0,i._)((0,eo.U)("overview-activity-tab",function(e){return["timeline","assets"].includes(e)?e:"timeline"}),2),t=n[0],c=n[1],u=l.useCallback(function(e){var n=e.selected;return t!==n&&c(n),(0,r.jsxs)(s.zH,{children:[(0,r.jsx)(em.Q1,{$active:"timeline"===n,to:"/overview/activity/timeline",children:"Timeline"}),(0,r.jsx)(em.Q1,{$active:"assets"===n,to:"/overview/activity/assets",children:"Assets"})]})},[t,c]);return(0,r.jsx)(a.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:(0,r.jsxs)(o.rs,{children:[(0,r.jsx)(o.AW,{path:"/overview/activity/assets",children:(0,r.jsx)(OverviewAssetsRoot,{Header:e,TabButton:u})}),(0,r.jsx)(o.AW,{path:"/overview/activity/timeline",children:(0,r.jsx)(OverviewTimelineRoot,{Header:e,TabButton:u})}),(0,r.jsx)(o.AW,{path:"*",render:l.useCallback(function(){return"timeline"===t?(0,r.jsx)(o.l_,{to:"/overview/activity/timeline"}):(0,r.jsx)(o.l_,{to:"/overview/activity/assets"})},[t])})]})})},ej=t(9445),OverviewJobsRoot=function(){return(0,_.Px)(),(0,I.j)("Overview | Jobs"),(0,r.jsxs)(a.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(V.m,{title:(0,r.jsx)(y.X6,{children:"Overview"}),tabs:(0,r.jsx)(OverviewTabs,{tab:"jobs"})}),(0,r.jsx)(ej.e,{})]})},eg=t(92364),ey=t(43180),ew=t(68884),eb=t(98319),eO=t(77277),eC=t(42885),ek=t(86839),OverviewResourcesTable=function(e){var n=e.repos,t=(0,l.useRef)(null),o=(0,l.useMemo)(function(){return n.map(function(e){var n=e.repoAddress;return(0,ev.Uz)(n)})},[n]),i=(0,eC.N)(ew.y,o),s=i.expandedKeys,a=i.onToggle,u=i.onToggleAll,d=(0,l.useMemo)(function(){var e=[];return n.forEach(function(n){var t=n.repoAddress,r=n.resources;e.push({type:"header",repoAddress:t,resourceCount:r.length});var o=(0,ev.Uz)(t);s.includes(o)&&r.forEach(function(n){e.push((0,c._)({type:"resource",repoAddress:t},n))})}),e},[n,s]),h=(0,eO.w)(n.map(function(e){return e.repoAddress.name})),f=(0,w.MG)({count:d.length,getScrollElement:function(){return t.current},estimateSize:function(e){var n=d[e];return(null==n?void 0:n.type)==="header"?32:64},overscan:10}),v=f.getTotalSize(),p=f.getVirtualItems();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eb.f,{}),(0,r.jsx)("div",{style:{overflow:"hidden"},children:(0,r.jsx)(M.W2,{ref:t,children:(0,r.jsx)(M.Nh,{$totalHeight:v,children:p.map(function(e){var n=e.index,t=e.key,o=e.size,i=e.start,l=d[n];return"header"===l.type?(0,r.jsx)(ek.vG,{repoAddress:l.repoAddress,height:o,start:i,onToggle:a,onToggleAll:u,expanded:s.includes((0,ev.Uz)(l.repoAddress)),showLocation:h.has(l.repoAddress.name),rightElement:(0,r.jsx)(ey.u,{content:1===l.resourceCount?"1 resource":"".concat(l.resourceCount," resources"),placement:"top",children:(0,r.jsx)(m.V,{children:l.resourceCount})})},t):(0,r.jsx)(eb.K,(0,c._)({height:o,start:i},l),t)})})})})]})},e_=t(44392),eR=t(89191),eT=t(91195),eA=t(76588),eS=t(58298);function OverviewResourcesRoot_templateObject(){var e=(0,d._)(["\n  query OverviewResourcesQuery {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                allTopLevelResourceDetails {\n                  id\n                  ...ResourceEntryFragment\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return OverviewResourcesRoot_templateObject=function(){return e},e}var OverviewResourcesRoot=function(){(0,_.Px)(),(0,I.j)("Overview | Resources");var e=(0,l.useContext)(ex.C5),n=e.allRepos,t=e.visibleRepos,o=e.loading,s=(0,i._)((0,z.q)({queryKey:"search",defaults:{search:""}}),2),c=s[0],u=s[1],d=n.length,p=(0,ea.a)(eN,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),x=p.data,m=p.loading,j=(0,k.C4)(p,k.dT),g=(0,l.useMemo)(function(){var e=(0,eR.S)(t);return buildBuckets(x).filter(function(n){var t=n.repoAddress;return e.has((0,ev.Uz)(t))})},[x,t]),y=c.trim().toLocaleLowerCase(),w=y.length>0,b=(0,l.useMemo)(function(){var e=y.toLocaleLowerCase();return g.map(function(n){return{repoAddress:n.repoAddress,resources:n.resources.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})}}).filter(function(e){return e.resources.length>0})},[g,y]),O=o&&!d||m&&!x;return(0,r.jsxs)(a.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(OverviewPageHeader,{tab:"resources",refreshState:j}),(0,r.jsxs)(a.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[d>1?(0,r.jsx)(et.C,{}):null,(0,r.jsx)(f.oi,{icon:"search",value:c,rightElement:O?(0,r.jsx)(eS.W,{tooltipContent:"Loading resources…"}):void 0,onChange:function(e){return u(e.target.value)},placeholder:"Filter by resource name…",style:{width:"340px"}})]}),m&&!d?(0,r.jsx)(a.x,{padding:64,children:(0,r.jsx)(h.$,{purpose:"page"})}):function(){if(m&&!x)return(0,r.jsx)(a.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,r.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,r.jsx)(h.$,{purpose:"body-text"}),(0,r.jsx)("div",{style:{color:v.$()},children:"Loading resources…"})]})});var e=n.length>t.length;return b.length?(0,r.jsx)(OverviewResourcesTable,{repos:b}):w?(0,r.jsx)(a.x,{padding:{top:20},children:(0,r.jsx)(eg.t,{icon:"search",title:"No matching resources",description:e?(0,r.jsxs)("div",{children:["No resources matching ",(0,r.jsx)("strong",{children:c})," were found in the selected code locations"]}):(0,r.jsxs)("div",{children:["No resources matching ",(0,r.jsx)("strong",{children:c})," were found in your definitions"]})})}):(0,r.jsx)(a.x,{padding:{top:20},children:(0,r.jsx)(eg.t,{icon:"search",title:"No resources",description:e?"No resources were found in the selected code locations":"No resources were found in your definitions"})})}()]})},buildBuckets=function(e){if((null==e?void 0:e.workspaceOrError.__typename)!=="Workspace")return[];var n=e.workspaceOrError.locationEntries.map(function(e){return e.locationOrLoadError}),t=[],r=!0,o=!1,i=void 0;try{for(var s,a=n[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var l=s.value;if((null==l?void 0:l.__typename)==="RepositoryLocation"){var c=!0,u=!1,d=void 0;try{for(var h,f=l.repositories[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var v=h.value,p=v.name,x=v.allTopLevelResourceDetails,m=(0,W.kQ)(p,l.name);x.length>0&&t.push({repoAddress:m,resources:x})}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}}}}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return(0,e_.S)(t)},eN=(0,el.Ps)(OverviewResourcesRoot_templateObject(),eT.B,eA.L),eL=t(71569),OverviewSchedulesRoot=function(){return(0,_.Px)(),(0,I.j)("Overview | Schedules"),(0,r.jsxs)(a.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(OverviewPageHeader,{tab:"schedules"}),(0,r.jsx)(eL.z,{})]})},eE=t(57070),OverviewSensorsRoot=function(){return(0,_.Px)(),(0,I.j)("Overview | Sensors"),(0,r.jsxs)(a.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(OverviewPageHeader,{tab:"sensors"}),(0,r.jsx)(eE.n,{})]})},eI=t(28888),ez=t(81967),eP=t(46032),AutomaterializationRoot=function(){var e=(0,Z.I)();switch(e){case"unknown":return(0,r.jsx)("div",{});case"has-global-amp":return(0,r.jsx)(GlobalAutomaterializationRoot,{});case"has-sensor-amp":return(0,r.jsx)(o.l_,{to:"/overview/sensors"});default:(0,eP.UT)(e)}},GlobalAutomaterializationRoot=function(){return(0,_.Px)(),(0,I.j)("Overview | Auto-materialize"),(0,r.jsxs)(eI.T,{children:[(0,r.jsx)(OverviewPageHeader,{tab:"amp"}),(0,r.jsx)(ez.$,{})]})},eF=t(95881),InstanceBackfillsRoot=function(){return(0,_.Px)(),(0,I.j)("Overview | Backfills"),(0,r.jsxs)(eI.T,{children:[(0,r.jsx)(OverviewPageHeader,{tab:"backfills"}),(0,r.jsx)(eF.A,{})]})},eM=t(42006),OverviewRoot=function(){return(0,r.jsxs)(o.rs,{children:[(0,r.jsx)(o.AW,{path:"/overview/activity",children:(0,r.jsx)(OverviewActivityRoot,{})}),(0,r.jsx)(o.AW,{path:"/overview/jobs",children:(0,r.jsx)(OverviewJobsRoot,{})}),(0,r.jsx)(o.AW,{path:"/overview/schedules",children:(0,r.jsx)(OverviewSchedulesRoot,{})}),(0,r.jsx)(o.AW,{path:"/overview/sensors",children:(0,r.jsx)(OverviewSensorsRoot,{})}),(0,r.jsx)(o.AW,{path:"/overview/automation",children:(0,r.jsx)(AutomaterializationRoot,{})}),(0,r.jsx)(o.AW,{path:"/overview/backfills/:backfillId",children:(0,r.jsx)(eM.t4,{})}),(0,r.jsx)(o.AW,{path:"/overview/backfills",exact:!0,children:(0,r.jsx)(InstanceBackfillsRoot,{})}),(0,r.jsx)(o.AW,{path:"/overview/resources",children:(0,r.jsx)(OverviewResourcesRoot,{})}),(0,r.jsx)(o.AW,{path:"*",render:function(){return(0,r.jsx)(o.l_,{to:"/overview/activity"})}})]})},eW=OverviewRoot}}]);
//# sourceMappingURL=795.921f5e26fb3343ba.js.map