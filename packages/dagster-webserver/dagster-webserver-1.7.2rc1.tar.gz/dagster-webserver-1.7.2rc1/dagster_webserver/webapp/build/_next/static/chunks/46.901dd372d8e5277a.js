"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[46],{17212:function(e,n,t){t.d(n,{Z:function(){return h}});var r=t(52322),o=t(57830),i=t(22139),s=t(37783),a=t(2784),c=t(87812),u=t(61935),l=t(21485),d=t(98349),p=t(6315),f=t(38917),x=t(16148),h=(0,a.memo)(function(e){var n,t=e.name,h=e.run,m=e.showHover,j=e.showButton,v=e.showSummary,b=void 0===v||v,g=h.status,y=(0,a.useMemo)(function(){switch(g){case u.VOA.SUCCESS:return"success";case u.VOA.CANCELED:case u.VOA.CANCELING:case u.VOA.FAILURE:return"danger";default:return"none"}},[g]);return(0,r.jsxs)(i.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-start",gap:16},children:[(0,r.jsxs)(i.x,{flex:{direction:"column",alignItems:"flex-start",gap:4},children:[(0,r.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(n=(0,r.jsx)(o.V,{intent:y,children:(0,r.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,r.jsx)(l.K9,{status:h.status,size:10}),(0,r.jsx)(f.Zr,{run:h})]})}),void 0!==m&&m?(0,r.jsx)(s.J,{position:"top",interactionKind:"hover",content:(0,r.jsx)("div",{children:(0,r.jsx)(d.qL,{run:h,name:t})}),hoverOpenDelay:100,children:n}):n),b?(0,r.jsx)(f.Tw,{run:h}):null]}),b&&(p.hd.has(h.status)||p.Ys.has(h.status))?(0,r.jsx)(c.I,{runId:h.id}):void 0]}),void 0===j||j?(0,r.jsx)(x.A,{to:"/runs/".concat(h.id),children:"View run"}):null]})})},84022:function(e,n,t){t.d(n,{C:function(){return RepoFilterButton}});var r=t(58467),o=t(52322),i=t(10952),s=t(22139),a=t(9001),c=t(67486),u=t(2784),l=t(75690),d=t(46988),RepoFilterButton=function(){var e=(0,u.useContext)(d.C5),n=e.allRepos,t=e.visibleRepos,p=e.toggleVisible,f=(0,r._)((0,u.useState)(!1),2),x=f[0],h=f[1];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(i.Vq,{canOutsideClickClose:!0,canEscapeKeyClose:!0,isOpen:x,style:{width:"auto"},onClose:function(){return h(!1)},children:[(0,o.jsx)(i.fK,{icon:"repo",label:"Filter code locations"}),(0,o.jsx)(l.e,{options:n,onBrowse:function(){return h(!1)},onToggle:p,selected:t}),(0,o.jsx)(i.cN,{children:(0,o.jsx)(s.x,{padding:{top:8},children:(0,o.jsx)(a.zx,{intent:"none",onClick:function(){return h(!1)},children:"Done"})})})]}),(0,o.jsx)(a.zx,{outlined:!0,icon:(0,o.jsx)(c.JO,{name:"folder"}),rightIcon:(0,o.jsx)(c.JO,{name:"expand_more"}),onClick:function(){return h(!0)},children:"".concat(t.length," of ").concat(n.length)})]})}},87812:function(e,n,t){t.d(n,{I:function(){return StepSummaryForRun}});var r=t(73235),o=t(52322),i=t(40794),s=t(60138),a=t(81308),c=t(25195),u=t(19126),l=t.n(u),d=t(2784),p=t(47933),f=t(61935),x=t(6315);function _templateObject(){var e=(0,r._)(["\n  query StepSummaryForRunQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      ... on Run {\n        id\n        status\n        stepStats {\n          endTime\n          stepKey\n          status\n        }\n      }\n    }\n  }\n"]);return _templateObject=function(){return e},e}var StepSummaryForRun=function(e){var n=e.runId,t=(0,i.a)(h,{variables:{runId:n}}).data,r=null==t?void 0:t.pipelineRunOrError,s=(null==r?void 0:r.__typename)==="Run"?r.status:null,u=(0,d.useMemo)(function(){if((null==r?void 0:r.__typename)!=="Run")return[];var e=r.status;return x.hd.has(e)?r.stepStats.filter(function(e){return e.status===f.SGm.FAILURE}):x.Ys.has(e)?r.stepStats.filter(function(e){return e.status===f.SGm.IN_PROGRESS}):[]},[r]),m=u.length;if(!m||!s)return null;if(x.hd.has(s)){if(1===m){var j=u[0],v=j.endTime?l().stringify({focusedTime:Math.floor(1e3*j.endTime)},{addQueryPrefix:!0}):"";return(0,o.jsxs)(a.YS,{color:c.$(),children:["Failed at ",(0,o.jsx)(p.rU,{to:"/runs/".concat(n).concat(v),children:j.stepKey})]})}return(0,o.jsxs)(a.YS,{color:c.$(),children:["Failed at ",(0,o.jsxs)(p.rU,{to:"/runs/".concat(n),children:[m," steps"]})]})}if(x.Ys.has(s)){if(1===m){var b=u[0],g=b.endTime?l().stringify({focusedTime:Math.floor(1e3*b.endTime)},{addQueryPrefix:!0}):"";return(0,o.jsxs)(a.YS,{color:c.$(),children:["In progress at ",(0,o.jsx)(p.rU,{to:"/runs/".concat(n).concat(g),children:b.stepKey})]})}return(0,o.jsxs)(a.YS,{color:c.$(),children:["In progress at ",(0,o.jsxs)(p.rU,{to:"/runs/".concat(n),children:[m," steps"]})]})}return null},h=(0,s.Ps)(_templateObject())},9445:function(e,n,t){t.d(n,{e:function(){return JobsPageContent}});var r=t(58467),o=t(73235),i=t(52322),s=t(40794),a=t(60138),c=t(22139),u=t(63832),l=t(25195),d=t(92364),p=t(34822),f=t(25557),x=t(2784),h=t(91195),m=t(55237),j=t(35157),v=t(71277),b=t(84022),g=t(43180),y=t(57830),w=t(88510),_=t(68884),O=t(55658),S=t(77277),R=t(42885),C=t(9901),E=t(86839),I=t(44254),OverviewJobsTable=function(e){var n=e.repos,t=(0,x.useRef)(null),r=(0,x.useMemo)(function(){return n.map(function(e){var n=e.repoAddress;return(0,I.Uz)(n)})},[n]),o=(0,R.N)(_.y,r),s=o.expandedKeys,a=o.onToggle,c=o.onToggleAll,u=(0,x.useMemo)(function(){var e=[];return n.forEach(function(n){var t=n.repoAddress,r=n.jobs;e.push({type:"header",repoAddress:t,jobCount:r.length});var o=(0,I.Uz)(t);s.includes(o)&&r.forEach(function(n){var r=n.isJob,o=n.name;e.push({type:"job",repoAddress:t,isJob:r,name:o})})}),e},[n,s]),l=(0,S.w)(n.map(function(e){return e.repoAddress.name})),d=(0,w.MG)({count:u.length,getScrollElement:function(){return t.current},estimateSize:function(e){var n=u[e];return(null==n?void 0:n.type)==="header"?32:64},overscan:10}),p=d.getTotalSize(),f=d.getVirtualItems();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(C.I,{}),(0,i.jsx)("div",{style:{overflow:"hidden"},children:(0,i.jsx)(O.W2,{ref:t,children:(0,i.jsx)(O.Nh,{$totalHeight:p,children:f.map(function(e){var n=e.index,t=e.key,r=e.size,o=e.start,d=u[n];return"header"===d.type?(0,i.jsx)(E.vG,{repoAddress:d.repoAddress,height:r,start:o,onToggle:a,onToggleAll:c,expanded:s.includes((0,I.Uz)(d.repoAddress)),showLocation:l.has(d.repoAddress.name),rightElement:(0,i.jsx)(g.u,{content:1===d.jobCount?"1 job":"".concat(d.jobCount," jobs"),placement:"top",children:(0,i.jsx)(y.V,{children:d.jobCount})})},t):(0,i.jsx)(C.b,{name:d.name,isJob:d.isJob,repoAddress:d.repoAddress,height:r,start:o},t)})})})})]})},J=t(44392),L=t(89191),A=t(58298),N=t(46988),P=t(37160);function _templateObject(){var e=(0,o._)(["\n  query OverviewJobsQuery {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  name\n                  isJob\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return _templateObject=function(){return e},e}var JobsPageContent=function(){var e=(0,x.useContext)(N.C5),n=e.allRepos,t=e.visibleRepos,o=e.loading,a=(0,r._)((0,v.q)({queryKey:"search",defaults:{search:""}}),2),h=a[0],j=a[1],g=n.length,y=(0,s.a)(k,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),w=y.data,_=y.loading,O=(0,m.C4)(y,m.dT),S=(0,x.useMemo)(function(){var e=(0,L.S)(t);return buildBuckets(w).filter(function(n){var t=n.repoAddress;return e.has((0,I.Uz)(t))})},[w,t]),R=h.trim().toLocaleLowerCase(),C=R.length>0,E=(0,x.useMemo)(function(){var e=R.toLocaleLowerCase();return S.map(function(n){return{repoAddress:n.repoAddress,jobs:n.jobs.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})}}).filter(function(e){return e.jobs.length>0})},[S,R]),J=o&&!g||_&&!w;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(c.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",justifyContent:"space-between",grow:0},children:[(0,i.jsxs)(c.x,{flex:{direction:"row",gap:12,alignItems:"center"},children:[g>1?(0,i.jsx)(b.C,{}):null,(0,i.jsx)(p.oi,{icon:"search",value:h,rightElement:J?(0,i.jsx)(A.W,{tooltipContent:"Loading jobs…"}):void 0,onChange:function(e){return j(e.target.value)},placeholder:"Filter by job name…",style:{width:"340px"}})]}),(0,i.jsx)(m.xi,{refreshState:O})]}),_&&!g?(0,i.jsx)(c.x,{padding:64,children:(0,i.jsx)(f.f,{label:"Loading jobs…"})}):function(){if(_&&!w)return(0,i.jsx)(c.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,i.jsxs)(c.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,i.jsx)(u.$,{purpose:"body-text"}),(0,i.jsx)("div",{style:{color:l.$()},children:"Loading jobs…"})]})});var e=n.length>t.length;return E.length?(0,i.jsx)(OverviewJobsTable,{repos:E}):C?(0,i.jsx)(c.x,{padding:{top:20},children:(0,i.jsx)(d.t,{icon:"search",title:"No matching jobs",description:e?(0,i.jsxs)("div",{children:["No jobs matching ",(0,i.jsx)("strong",{children:h})," were found in the selected code locations"]}):(0,i.jsxs)("div",{children:["No jobs matching ",(0,i.jsx)("strong",{children:h})," were found in your definitions"]})})}):(0,i.jsx)(c.x,{padding:{top:20},children:(0,i.jsx)(d.t,{icon:"search",title:"No jobs",description:e?"No jobs were found in the selected code locations":"No jobs were found in your definitions"})})}()]})},buildBuckets=function(e){if((null==e?void 0:e.workspaceOrError.__typename)!=="Workspace")return[];var n=e.workspaceOrError.locationEntries.map(function(e){return e.locationOrLoadError}),t=[],r=!0,o=!1,i=void 0;try{for(var s,a=n[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var c=s.value;if((null==c?void 0:c.__typename)==="RepositoryLocation"){var u=!0,l=!1,d=void 0;try{for(var p,f=c.repositories[Symbol.iterator]();!(u=(p=f.next()).done);u=!0){var x=p.value,h=x.name,m=x.pipelines,v=(0,P.kQ)(h,c.name),b=m.filter(function(e){var n=e.name;return!(0,j.pv)(n)}).map(function(e){return{isJob:e.isJob,name:e.name}});b.length>0&&t.push({repoAddress:v,jobs:b})}}catch(e){l=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(l)throw d}}}}}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return(0,J.S)(t)},k=(0,a.Ps)(_templateObject(),h.B)},83046:function(e,n,t){t.r(n),t.d(n,{JobsRoot:function(){return JobsRoot}});var r=t(52322),o=t(22139),i=t(17131),s=t(81308),a=t(9445),c=t(68028),u=t(28252),JobsRoot=function(){return(0,c.Px)(),(0,u.j)("Jobs"),(0,r.jsxs)(o.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(i.m,{title:(0,r.jsx)(s.X6,{children:"Jobs"})}),(0,r.jsx)(a.e,{})]})};n.default=JobsRoot},68884:function(e,n,t){t.d(n,{y:function(){return r}});var r="overview-collapsed-state"},44392:function(e,n,t){t.d(n,{S:function(){return sortRepoBuckets}});var r=t(82550),o=t(44254),sortRepoBuckets=function(e){return(0,r._)(e).sort(function(e,n){var t=(0,o.Uz)(e.repoAddress),r=(0,o.Uz)(n.repoAddress);return t.localeCompare(r)})}},89191:function(e,n,t){t.d(n,{S:function(){return visibleRepoKeys}});var r=t(37160),o=t(44254),visibleRepoKeys=function(e){return new Set(e.map(function(e){return(0,o.Uz)((0,r.kQ)(e.repository.name,e.repositoryLocation.name))}))}},51339:function(e,n,t){t.d(n,{L:function(){return RepoSectionHeader},l:function(){return l}});var r=t(73235),o=t(52322),i=t(22139),s=t(67486),a=t(25195);t(2784);var c=t(35505),u=t(37160);function _templateObject(){var e=(0,r._)(["\n  background-color: ",";\n  border: 0;\n  box-shadow:\n    inset 0px -1px 0 ",",\n    inset 0px 1px 0 ",";\n  color: ",";\n  cursor: pointer;\n  display: block;\n  padding: 0;\n  width: 100%;\n  margin: 0;\n  height: ","px;\n  text-align: left;\n\n  :focus,\n  :active {\n    outline: none;\n  }\n\n  :hover {\n    background-color: ",";\n  }\n\n  ",'[aria-label="arrow_drop_down"] {\n    transition: transform 100ms linear;\n    ',"\n  }\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,r._)(["\n  font-weight: 600;\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){var e=(0,r._)(["\n  font-weight: 400;\n  color: ",";\n"]);return _templateObject2=function(){return e},e}var l=32,RepoSectionHeader=function(e){var n=e.expanded,t=e.onClick,r=e.repoName,c=e.repoLocation,l=e.showLocation,x=e.rightElement,h=r===u.Js;return(0,o.jsx)(d,{$open:n,onClick:t,children:(0,o.jsxs)(i.x,{flex:{alignItems:"center",justifyContent:"space-between"},padding:{horizontal:24},children:[(0,o.jsxs)(i.x,{flex:{alignItems:"center",gap:8},children:[(0,o.jsx)(s.JO,{name:"folder",color:a.md()}),(0,o.jsxs)("div",{children:[(0,o.jsx)(p,{children:h?c:r}),l&&!h?(0,o.jsx)(f,{children:"@".concat(c)}):null]})]}),(0,o.jsxs)(i.x,{flex:{alignItems:"center",gap:8},children:[x,(0,o.jsx)(i.x,{margin:{top:2},children:(0,o.jsx)(s.JO,{name:"arrow_drop_down"})})]})]})})},d=c.ZP.button.withConfig({componentId:"sc-6c9e6894-0"})(_templateObject(),a.gJ(),a.wL(),a.wL(),a.$(),l,a._c(),s.a1,function(e){return e.$open?null:"transform: rotate(-90deg);"}),p=c.ZP.span.withConfig({componentId:"sc-6c9e6894-1"})(_templateObject1()),f=c.ZP.span.withConfig({componentId:"sc-6c9e6894-2"})(_templateObject2(),a.Aw())},98349:function(e,n,t){t.d(n,{JH:function(){return RunStatusPezList},qL:function(){return RunStatusOverlay}});var r=t(73235),o=t(52322),i=t(22139),s=t(37783),a=t(81308),c=t(25195),u=t(3842),l=t(47933),d=t(35505),p=t(21485),f=t(87424),x=t(6315),h=t(38917),m=t(87812);function _templateObject(){var e=(0,r._)(["\n  padding: 4px;\n  font-size: 12px;\n  width: 220px;\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,r._)(["\n  padding: 8px;\n  box-shadow: inset 0 -1px ",";\n  font-family: ",";\n  font-size: 14px;\n  font-weight: 500;\n  color: ",";\n  max-width: 100%;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  min-width: 0px;\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){var e=(0,r._)(["\n  padding: 8px;\n  font-size: 12px;\n  display: flex;\n  align-items: flex-start;\n  justify-content: space-between;\n"]);return _templateObject2=function(){return e},e}function _templateObject3(){var e=(0,r._)(["\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  padding: 4px 8px 8px;\n\n  :empty {\n    display: none;\n  }\n"]);return _templateObject3=function(){return e},e}function _templateObject4(){var e=(0,r._)(["\n  background-color: ",";\n  border-radius: 2px;\n  height: 16px;\n  opacity: ",";\n  width: 8px;\n"]);return _templateObject4=function(){return e},e}var RunStatusPez=function(e){var n=e.status,t=e.opacity,r=f.YM[n];return(0,o.jsx)(y,{$color:r,$opacity:void 0===t?1:t})},RunStatusPezList=function(e){var n=e.fade,t=e.jobName,r=e.runs,a=r.length,c=.8/Math.max(3,a);return(0,o.jsx)(i.x,{flex:{direction:"row",alignItems:"center",gap:2},children:r.map(function(e,r){return(0,o.jsx)(s.J,{position:"top",interactionKind:"hover",content:(0,o.jsx)("div",{children:(0,o.jsx)(RunStatusOverlay,{run:e,name:t})}),hoverOpenDelay:100,children:(0,o.jsx)(RunStatusPez,{runId:e.id,status:e.status,opacity:n?1-(a-r-1)*c:1},e.id)},e.id)})})},RunStatusOverlay=function(e){var n=e.name,t=e.run;return(0,o.jsxs)(j,{children:[(0,o.jsx)(v,{children:n}),(0,o.jsxs)(b,{children:[(0,o.jsxs)(i.x,{flex:{alignItems:"center",direction:"row",gap:8},children:[(0,o.jsx)(p.K9,{status:t.status}),(0,o.jsx)(l.rU,{to:"/runs/".concat(t.id),children:(0,o.jsx)(a.fv,{style:{fontSize:"14px"},children:(0,h.EI)(t)})})]}),(0,o.jsxs)(i.x,{flex:{direction:"column",gap:4},padding:{top:2},children:[(0,o.jsx)(h.Zr,{run:t}),(0,o.jsx)(h.Tw,{run:t})]})]}),x.hd.has(t.status)||x.Ys.has(t.status)?(0,o.jsx)(g,{children:(0,o.jsx)(m.I,{runId:t.id})}):null]})},j=d.ZP.div.withConfig({componentId:"sc-ffe4e530-0"})(_templateObject()),v=d.ZP.div.withConfig({componentId:"sc-ffe4e530-1"})(_templateObject1(),c.wL(),u.b.default,c.Ep()),b=d.ZP.div.withConfig({componentId:"sc-ffe4e530-2"})(_templateObject2()),g=d.ZP.div.withConfig({componentId:"sc-ffe4e530-3"})(_templateObject3()),y=d.ZP.div.withConfig({componentId:"sc-ffe4e530-4"})(_templateObject4(),function(e){return e.$color},function(e){return e.$opacity})},58298:function(e,n,t){t.d(n,{W:function(){return SearchInputSpinner}});var r=t(52322),o=t(58467),i=t(2784),useDelayedState=function(e){var n=(0,o._)((0,i.useState)(!1),2),t=n[0],r=n[1];return(0,i.useEffect)(function(){var n=setTimeout(function(){return r(!0)},e);return function(){return clearTimeout(n)}},[e]),t},s=t(22139),a=t(43180),c=t(63832),SearchInputSpinner=function(e){var n=e.tooltipContent;return useDelayedState(2e3)?(0,r.jsx)(s.x,{margin:{top:1},children:(0,r.jsx)(a.u,{placement:"top",canShow:!!n,content:n||"",children:(0,r.jsx)(c.$,{purpose:"body-text"})})}):null}},77277:function(e,n,t){t.d(n,{w:function(){return findDuplicateRepoNames}});var findDuplicateRepoNames=function(e){var n=new Set,t=new Set;return e.forEach(function(e){n.has(e)?t.add(e):n.add(e)}),t}},42885:function(e,n,t){t.d(n,{N:function(){return useRepoExpansionState}});var r=t(58467),o=t(2784),i=t(34263),s=t(15282),a=t(44254),validateExpandedKeys=function(e){return Array.isArray(e)?e:[]},useRepoExpansionState=function(e,n){var t,c=(t=(0,o.useContext)(i.I).basePath,"".concat(t,":dagster.").concat(e)),u=(0,r._)((0,s.U)(c,validateExpandedKeys),2),l=u[0],d=u[1],p=(0,o.useCallback)(function(e){var n=(0,a.Uz)(e);d(function(e){var t=new Set(e||[]);return t.has(n)?t.delete(n):t.add(n),Array.from(t)})},[d]),f=(0,o.useCallback)(function(e){d(function(t){var r=new Set(t||[]);return n.forEach(function(n){e?r.delete(n):r.add(n)}),Array.from(r)})},[n,d]),x=(0,o.useMemo)(function(){var e=new Set(l);return n.filter(function(n){return!e.has(n)})},[n,l]);return(0,o.useMemo)(function(){return{expandedKeys:x,onToggle:p,onToggleAll:f}},[x,p,f])}},9901:function(e,n,t){t.d(n,{I:function(){return VirtualizedJobHeader},b:function(){return VirtualizedJobRow}});var r=t(58467),o=t(73235),i=t(82550),s=t(52322),a=t(83601),c=t(60138),u=t(16861),l=t(22139),d=t(25195),p=t(2784),f=t(47933),x=t(35505),h=t(86839),m=t(46988),j=t(38153),v=t(55237),b=t(44678),g=t(63832),y=t(37783),w=t(43180),_=t(9001),O=t(67486),S=t(54949),R=t(185),C=t(18960),E=t(61935),I=t(95388),J=t(94370),L=t(5035);function _templateObject(){var e=(0,o._)(["\n  query RunReExecutionQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      ... on Run {\n        id\n        status\n        pipelineName\n        executionPlan {\n          artifactsPersisted\n          ...ExecutionPlanToGraphFragment\n        }\n      }\n    }\n  }\n  ","\n"]);return _templateObject=function(){return e},e}var JobMenu=function(e){var n=e.job,t=e.isAssetJob,o=e.repoAddress,i=n.runs.length?n.runs[0]:null,c={pipelineName:n.name,repositoryName:o.name,repositoryLocationName:o.location},u=(0,R.DO)(n.name),l=(0,J.D)(),d=(0,S.xz)(o.location),f=d.permissions,x=f.canLaunchPipelineReexecution,h=f.canLaunchPipelineExecution,m=d.disabledReasons,v=(0,r._)((0,a.t)(A),2),C=v[0],N=v[1].data,P=(0,p.useCallback)(function(){(null==i?void 0:i.id)&&C({variables:{runId:i.id}})},[i,C]),k=(null==N?void 0:N.pipelineRunOrError.__typename)==="Run"?null==N?void 0:N.pipelineRunOrError:null,T="loading"===t?(0,s.jsx)(b.sN,{icon:"execute",text:"Loading...",disabled:!0}):!0===t?(0,s.jsx)(b.sN,{icon:u.loading?(0,s.jsx)(g.$,{purpose:"caption-text"}):"execute",text:"Launch new run",disabled:!h,onClick:function(e){return u.onClick(c,e)}}):(0,s.jsx)(L.U,{icon:"execute",text:"Launch new run",disabled:!h,to:(0,j.jT)({repoName:o.name,repoLocation:o.location,pipelineName:n.name,isJob:n.isJob,path:"/playground"})}),z=(0,s.jsx)(b.sN,{icon:"replay",text:"Re-execute latest run",onClick:function(){return k?l(k,E.hmq.ALL_STEPS):void 0},disabled:!x||!k||!(0,I.EP)(k)}),$=(0,s.jsx)(b.sN,{icon:"sync_problem",text:"Re-execute latest run from failure",onClick:function(){return k?l(k,E.hmq.FROM_FAILURE):void 0},disabled:!x||!k||!(0,I.VM)(k)});return(0,s.jsxs)(s.Fragment,{children:[u.launchpadElement,(0,s.jsx)(y.J,{onOpened:function(){return P()},content:(0,s.jsxs)(b.v2,{children:[(0,s.jsx)(L.U,{to:(0,j.jT)({repoName:o.name,repoLocation:o.location,pipelineName:n.name,isJob:n.isJob}),icon:"job",text:"View job"}),(0,s.jsx)(L.U,{to:(0,j.jT)({repoName:o.name,repoLocation:o.location,pipelineName:n.name,isJob:n.isJob,path:"/runs"}),icon:"checklist",text:"View all recent runs"}),h?T:(0,s.jsx)(w.u,{content:m.canLaunchPipelineExecution,display:"block",children:T}),x?z:(0,s.jsx)(w.u,{content:m.canLaunchPipelineReexecution,display:"block",children:z}),x?$:(0,s.jsx)(w.u,{content:m.canLaunchPipelineReexecution,display:"block",children:$})]}),position:"bottom-left",children:(0,s.jsx)(_.zx,{icon:(0,s.jsx)(O.JO,{name:"expand_more"})})})]})},A=(0,c.Ps)(_templateObject(),C.$),N=t(17212),P=t(12518),k=t(98349),T=t(38917),z=t(66207),$=t(23054),q=t(55658);function VirtualizedJobRow_templateObject(){var e=(0,o._)(["\n  display: grid;\n  grid-template-columns: ",";\n  height: 100%;\n"]);return VirtualizedJobRow_templateObject=function(){return e},e}function _templateObject1(){var e=(0,o._)(["\n  width: 100%;\n\n  > .bp4-popover2-target {\n    width: 100%;\n  }\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){var e=(0,o._)(["\n  query SingleJobQuery($selector: PipelineSelector!) {\n    pipelineOrError(params: $selector) {\n      ... on Pipeline {\n        id\n        name\n        isJob\n        isAssetJob\n        description\n        runs(limit: 5) {\n          id\n          ...RunTimeFragment\n        }\n        schedules {\n          id\n          ...ScheduleSwitchFragment\n        }\n        sensors {\n          id\n          ...SensorSwitchFragment\n        }\n      }\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return _templateObject2=function(){return e},e}var U="1.5fr 1fr 180px 96px 80px",VirtualizedJobRow=function(e){var n=e.name,t=e.isJob,o=e.repoAddress,c=e.start,d=e.height,x=(0,r._)((0,a.t)(V,{variables:{selector:(0,m._T)(o,n)}}),2),b=x[0],g=x[1];(0,h.v5)(b),(0,v.C4)(g,v.dT);var y=g.data,w=(null==y?void 0:y.pipelineOrError.__typename)==="Pipeline"?null==y?void 0:y.pipelineOrError:void 0,_=(0,p.useMemo)(function(){return w?{schedules:w.schedules,sensors:w.sensors}:{schedules:[],sensors:[]}},[w]),O=_.schedules,S=_.sensors,R=(0,p.useMemo)(function(){if(w){var e=w.runs;if(e.length)return(0,i._)(e)}return[]},[w]);return(0,s.jsx)(q.X2,{$height:d,$start:c,children:(0,s.jsxs)(F,{border:"bottom",children:[(0,s.jsxs)(q.E5,{children:[(0,s.jsx)("div",{style:{maxWidth:"100%",whiteSpace:"nowrap",fontWeight:500},children:(0,s.jsx)(f.rU,{to:(0,j.$U)(o,"/jobs/".concat(n)),children:(0,s.jsx)(u.g,{text:n})})}),(0,s.jsx)(h.HB,{children:(null==w?void 0:w.description)||""})]}),(0,s.jsx)(q.E5,{children:O.length||S.length?(0,s.jsx)(l.x,{flex:{direction:"column",alignItems:"flex-start",gap:8},children:(0,s.jsx)(M,{children:(0,s.jsx)(P.I,{schedules:O,sensors:S,repoAddress:o})})}):(0,s.jsx)(h.mq,{queryResult:g})}),(0,s.jsx)(q.E5,{children:R[0]?(0,s.jsx)(N.Z,{run:R[0],showButton:!1,showHover:!0,showSummary:!1,name:n}):(0,s.jsx)(h.mq,{queryResult:g})}),(0,s.jsx)(q.E5,{children:R.length?(0,s.jsx)(l.x,{padding:{top:4},children:(0,s.jsx)(k.JH,{jobName:n,runs:(0,i._)(R).reverse(),fade:!0})}):(0,s.jsx)(h.mq,{queryResult:g})}),(0,s.jsx)(q.E5,{children:(0,s.jsx)(l.x,{flex:{justifyContent:"flex-end"},style:{marginTop:"-2px"},children:(0,s.jsx)(JobMenu,{job:{name:n,isJob:t,runs:R},isAssetJob:w?w.isAssetJob:"loading",repoAddress:o})})})]})})},VirtualizedJobHeader=function(){return(0,s.jsxs)(l.x,{border:"top-and-bottom",style:{display:"grid",gridTemplateColumns:U,height:"32px",fontSize:"12px",color:d.$()},children:[(0,s.jsx)(q.qN,{children:"Name"}),(0,s.jsx)(q.qN,{children:"Schedules/sensors"}),(0,s.jsx)(q.qN,{children:"Latest run"}),(0,s.jsx)(q.qN,{children:"Run history"}),(0,s.jsx)(q.qN,{})]})},F=(0,x.ZP)(l.x).withConfig({componentId:"sc-2ba4ca3c-0"})(VirtualizedJobRow_templateObject(),U),M=x.ZP.div.withConfig({componentId:"sc-2ba4ca3c-1"})(_templateObject1()),V=(0,c.Ps)(_templateObject2(),T.$X,z.J,$.U)},86839:function(e,n,t){t.d(n,{HB:function(){return CaptionText},mq:function(){return LoadingOrNone},v5:function(){return useDelayedRowQuery},vG:function(){return RepoRow}});var r=t(73235),o=t(52322),i=t(25195),s=t(81308),a=t(2784),c=t(35505),u=t(51339),l=t(55658);function _templateObject(){var e=(0,r._)(["\n  max-width: 100%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n\n  "," {\n    color: ",";\n    white-space: nowrap;\n  }\n"]);return _templateObject=function(){return e},e}var RepoRow=function(e){var n=e.repoAddress,t=e.height,r=e.start,i=e.expanded,s=e.onToggle,a=e.onToggleAll,c=e.showLocation,d=e.rightElement;return(0,o.jsx)(l.X2,{$height:t,$start:r,children:(0,o.jsx)(u.L,{repoName:n.name,repoLocation:n.location,expanded:i,onClick:function(e){return e.getModifierState("Shift")?a(!i):s(n)},showLocation:c,rightElement:d})})},LoadingOrNone=function(e){var n=e.queryResult,t=e.noneString,r=n.called,s=n.loading,a=n.data;return(0,o.jsx)("div",{style:{color:i.$()},children:r&&(!s||a)?void 0===t?"None":t:"Loading"})},CaptionText=function(e){var n=e.children;return(0,o.jsx)(d,{children:(0,o.jsx)(s.YS,{children:n})})},d=c.ZP.div.withConfig({componentId:"sc-7ef33ee4-0"})(_templateObject(),s.YS,i.$()),useDelayedRowQuery=function(e){a.useEffect(function(){var n=setTimeout(function(){e()},100);return function(){clearTimeout(n)}},[e])}}}]);
//# sourceMappingURL=46.901dd372d8e5277a.js.map