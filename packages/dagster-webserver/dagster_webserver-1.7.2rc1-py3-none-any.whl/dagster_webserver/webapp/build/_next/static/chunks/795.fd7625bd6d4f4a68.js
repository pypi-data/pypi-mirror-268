"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[795],{84022:function(e,n,r){r.d(n,{C:function(){return RepoFilterButton}});var t=r(58467),o=r(52322),i=r(10952),s=r(22139),a=r(9001),l=r(67486),c=r(2784),u=r(75690),d=r(46988),RepoFilterButton=function(){var e=(0,c.useContext)(d.C5),n=e.allRepos,r=e.visibleRepos,h=e.toggleVisible,v=(0,t._)((0,c.useState)(!1),2),f=v[0],p=v[1];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(i.Vq,{canOutsideClickClose:!0,canEscapeKeyClose:!0,isOpen:f,style:{width:"auto"},onClose:function(){return p(!1)},children:[(0,o.jsx)(i.fK,{icon:"repo",label:"Filter code locations"}),(0,o.jsx)(u.e,{options:n,onBrowse:function(){return p(!1)},onToggle:h,selected:r}),(0,o.jsx)(i.cN,{children:(0,o.jsx)(s.x,{padding:{top:8},children:(0,o.jsx)(a.zx,{intent:"none",onClick:function(){return p(!1)},children:"Done"})})})]}),(0,o.jsx)(a.zx,{outlined:!0,icon:(0,o.jsx)(l.JO,{name:"folder"}),rightIcon:(0,o.jsx)(l.JO,{name:"expand_more"}),onClick:function(){return p(!0)},children:"".concat(r.length," of ").concat(n.length)})]})}},9445:function(e,n,r){r.d(n,{e:function(){return JobsPageContent}});var t=r(58467),o=r(73235),i=r(52322),s=r(40794),a=r(60138),l=r(22139),c=r(63832),u=r(25195),d=r(92364),h=r(34822),v=r(25557),f=r(2784),p=r(91195),x=r(55237),m=r(35157),j=r(71277),g=r(84022),y=r(43180),w=r(57830),b=r(88510),O=r(68884),C=r(55658),_=r(77277),k=r(42885),R=r(9901),T=r(86839),A=r(44254),OverviewJobsTable=function(e){var n=e.repos,r=(0,f.useRef)(null),t=(0,f.useMemo)(function(){return n.map(function(e){var n=e.repoAddress;return(0,A.Uz)(n)})},[n]),o=(0,k.N)(O.y,t),s=o.expandedKeys,a=o.onToggle,l=o.onToggleAll,c=(0,f.useMemo)(function(){var e=[];return n.forEach(function(n){var r=n.repoAddress,t=n.jobs;e.push({type:"header",repoAddress:r,jobCount:t.length});var o=(0,A.Uz)(r);s.includes(o)&&t.forEach(function(n){var t=n.isJob,o=n.name;e.push({type:"job",repoAddress:r,isJob:t,name:o})})}),e},[n,s]),u=(0,_.w)(n.map(function(e){return e.repoAddress.name})),d=(0,b.MG)({count:c.length,getScrollElement:function(){return r.current},estimateSize:function(e){var n=c[e];return(null==n?void 0:n.type)==="header"?32:64},overscan:10}),h=d.getTotalSize(),v=d.getVirtualItems();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(R.I,{}),(0,i.jsx)("div",{style:{overflow:"hidden"},children:(0,i.jsx)(C.W2,{ref:r,children:(0,i.jsx)(C.Nh,{$totalHeight:h,children:v.map(function(e){var n=e.index,r=e.key,t=e.size,o=e.start,d=c[n];return"header"===d.type?(0,i.jsx)(T.vG,{repoAddress:d.repoAddress,height:t,start:o,onToggle:a,onToggleAll:l,expanded:s.includes((0,A.Uz)(d.repoAddress)),showLocation:u.has(d.repoAddress.name),rightElement:(0,i.jsx)(y.u,{content:1===d.jobCount?"1 job":"".concat(d.jobCount," jobs"),placement:"top",children:(0,i.jsx)(w.V,{children:d.jobCount})})},r):(0,i.jsx)(R.b,{name:d.name,isJob:d.isJob,repoAddress:d.repoAddress,height:t,start:o},r)})})})})]})},S=r(44392),N=r(89191),E=r(58298),L=r(46988),I=r(37160);function _templateObject(){var e=(0,o._)(["\n  query OverviewJobsQuery {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  name\n                  isJob\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return _templateObject=function(){return e},e}var JobsPageContent=function(){var e=(0,f.useContext)(L.C5),n=e.allRepos,r=e.visibleRepos,o=e.loading,a=(0,t._)((0,j.q)({queryKey:"search",defaults:{search:""}}),2),p=a[0],m=a[1],y=n.length,w=(0,s.a)(z,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),b=w.data,O=w.loading,C=(0,x.C4)(w,x.dT),_=(0,f.useMemo)(function(){var e=(0,N.S)(r);return buildBuckets(b).filter(function(n){var r=n.repoAddress;return e.has((0,A.Uz)(r))})},[b,r]),k=p.trim().toLocaleLowerCase(),R=k.length>0,T=(0,f.useMemo)(function(){var e=k.toLocaleLowerCase();return _.map(function(n){return{repoAddress:n.repoAddress,jobs:n.jobs.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})}}).filter(function(e){return e.jobs.length>0})},[_,k]),S=o&&!y||O&&!b;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(l.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",justifyContent:"space-between",grow:0},children:[(0,i.jsxs)(l.x,{flex:{direction:"row",gap:12,alignItems:"center"},children:[y>1?(0,i.jsx)(g.C,{}):null,(0,i.jsx)(h.oi,{icon:"search",value:p,rightElement:S?(0,i.jsx)(E.W,{tooltipContent:"Loading jobs…"}):void 0,onChange:function(e){return m(e.target.value)},placeholder:"Filter by job name…",style:{width:"340px"}})]}),(0,i.jsx)(x.xi,{refreshState:C})]}),O&&!y?(0,i.jsx)(l.x,{padding:64,children:(0,i.jsx)(v.f,{label:"Loading jobs…"})}):function(){if(O&&!b)return(0,i.jsx)(l.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,i.jsxs)(l.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,i.jsx)(c.$,{purpose:"body-text"}),(0,i.jsx)("div",{style:{color:u.$()},children:"Loading jobs…"})]})});var e=n.length>r.length;return T.length?(0,i.jsx)(OverviewJobsTable,{repos:T}):R?(0,i.jsx)(l.x,{padding:{top:20},children:(0,i.jsx)(d.t,{icon:"search",title:"No matching jobs",description:e?(0,i.jsxs)("div",{children:["No jobs matching ",(0,i.jsx)("strong",{children:p})," were found in the selected code locations"]}):(0,i.jsxs)("div",{children:["No jobs matching ",(0,i.jsx)("strong",{children:p})," were found in your definitions"]})})}):(0,i.jsx)(l.x,{padding:{top:20},children:(0,i.jsx)(d.t,{icon:"search",title:"No jobs",description:e?"No jobs were found in the selected code locations":"No jobs were found in your definitions"})})}()]})},buildBuckets=function(e){if((null==e?void 0:e.workspaceOrError.__typename)!=="Workspace")return[];var n=e.workspaceOrError.locationEntries.map(function(e){return e.locationOrLoadError}),r=[],t=!0,o=!1,i=void 0;try{for(var s,a=n[Symbol.iterator]();!(t=(s=a.next()).done);t=!0){var l=s.value;if((null==l?void 0:l.__typename)==="RepositoryLocation"){var c=!0,u=!1,d=void 0;try{for(var h,v=l.repositories[Symbol.iterator]();!(c=(h=v.next()).done);c=!0){var f=h.value,p=f.name,x=f.pipelines,j=(0,I.kQ)(p,l.name),g=x.filter(function(e){var n=e.name;return!(0,m.pv)(n)}).map(function(e){return{isJob:e.isJob,name:e.name}});g.length>0&&r.push({repoAddress:j,jobs:g})}}catch(e){u=!0,d=e}finally{try{c||null==v.return||v.return()}finally{if(u)throw d}}}}}catch(e){o=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(o)throw i}}return(0,S.S)(r)},z=(0,a.Ps)(_templateObject(),p.B)},71795:function(e,n,r){r.r(n),r.d(n,{OverviewRoot:function(){return OverviewRoot},default:function(){return eW}});var t=r(52322),o=r(7267),i=r(58467),s=r(9001),a=r(22139),l=r(2784),c=r(85333),u=r(6692),d=r(73235),h=r(40794),v=r(63832),f=r(34822),p=r(25195),x=r(21106),m=r(67486),j=r(57830),g=r(17276),y=r(44678),w=r(81308),b=r(88510),O=r(47933),C=r(35505),_=r(56266),k=r(55237),R=r(68028),T=r(8169),A=r(99322),S=r(35157),N=r(16339),E=r(58885),L=r(15614),I=r(74711),z=r(28252),P=r(71277),F=r(63386),M=r(55658),W=r(37160),$=r(38153);function _templateObject(){var e=(0,d._)(["\n  display: grid;\n  grid-template-columns: ",";\n  height: 100%;\n  > * {\n    vertical-align: middle;\n  }\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,d._)(["\n  font-size: 12px;\n  pointer-events: none;\n  a {\n    color: ",";\n    pointer-events: none;\n    max-width: ",";\n  }\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){var e=(0,d._)(["\n  cursor: pointer;\n  &:hover {\n    font-weight: 600;\n  }\n"]);return _templateObject2=function(){return e},e}function _templateObject3(){var e=(0,d._)(["\n  &:hover {\n    text-decoration: none;\n  }\n"]);return _templateObject3=function(){return e},e}var OverviewAssetsRoot=function(e){var n,r,o,s=e.Header,c=e.TabButton;(0,R.Px)(),(0,z.j)("Overview | Assets");var u=(0,h.a)(L.C1,{notifyOnNetworkStatusChange:!0}),d=(0,k.C4)(u,k.dT),p=l.useMemo(function(){var e,n,r;return(null===(e=u.data)||void 0===e?void 0:e.assetsOrError.__typename)==="AssetConnection"?(n=u.data.assetsOrError.nodes,r={},n.forEach(function(e){if(e.definition){var n=e.definition.groupName,t=e.definition.repository.name,o="".concat(n,"||").concat(t),i=r[o]||{groupName:n,repositoryName:t,assets:[]};i.assets.push(e),r[o]=i}}),Object.values(r)):[]},[null===(o=u.data)||void 0===o?void 0:o.assetsOrError]),x=(0,i._)((0,P.q)({queryKey:"q",decode:function(e){return e.searchQuery?JSON.parse(e.searchQuery):""},encode:function(e){return{searchQuery:e?JSON.stringify(e):void 0}}}),2),m=x[0],j=x[1],g=l.useMemo(function(){return""===m?p:p.filter(function(e){return(e.groupName||B).toLowerCase().includes(m.toLowerCase())||e.repositoryName.toLowerCase().includes(m.toLowerCase())})},[p,m]),y=l.useRef(null),w=(0,b.MG)({count:g.length,getScrollElement:function(){return y.current},estimateSize:function(){return 82},overscan:5}),O=w.getTotalSize(),C=w.getVirtualItems();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{style:{position:"sticky",top:0,zIndex:1},children:[(0,t.jsx)(s,{refreshState:d}),(0,t.jsxs)(a.x,{padding:{horizontal:24,vertical:16},flex:{alignItems:"center",gap:12,grow:0},children:[(0,t.jsx)(c,{selected:"assets"}),(0,t.jsx)(f.oi,{value:m,onChange:function(e){j(e.target.value)},placeholder:"Filter asset groups…"})]})]}),(r=null===(n=u.data)||void 0===n?void 0:n.assetsOrError,!u.data&&u.loading?(0,t.jsx)(a.x,{flex:{alignItems:"center",justifyContent:"center",direction:"column",grow:1},style:{width:"100%"},children:(0,t.jsx)(v.$,{purpose:"page"})}):(null==r?void 0:r.__typename)==="PythonError"?(0,t.jsx)(a.x,{flex:{alignItems:"center",justifyContent:"center",direction:"column",grow:1},style:{width:"100%"},children:(0,t.jsx)(_.T9,{error:r})}):(0,t.jsx)(a.x,{flex:{direction:"column"},style:{overflow:"hidden"},children:(0,t.jsxs)(M.W2,{ref:y,children:[(0,t.jsx)(VirtualHeaderRow,{}),(0,t.jsx)(M.Nh,{$totalHeight:O,children:C.map(function(e){var n=e.index,r=e.key,o=e.size,i=e.start,s=g[n];return(0,t.jsx)(VirtualRow,{start:i,height:o,group:s},r)})})]})}))]})},J="5fr 1fr 1fr 1fr 1fr";function VirtualHeaderRow(){return(0,t.jsxs)(a.x,{border:"top-and-bottom",style:{display:"grid",gridTemplateColumns:J,height:"32px",fontSize:"12px",color:p.$(),position:"sticky",top:0,zIndex:1,background:p.v8()},children:[(0,t.jsx)(M.qN,{children:"Group name"}),(0,t.jsx)(M.qN,{children:"Missing"}),(0,t.jsx)(M.qN,{children:"Failed/Overdue"}),(0,t.jsx)(M.qN,{children:"In progress"}),(0,t.jsx)(M.qN,{children:"Materialized"})]})}var B="Ungrouped Assets";function VirtualRow(e){var n,r,o=e.height,i=e.start,s=e.group,d=l.useMemo(function(){return s.assets.map(function(e){return{path:e.key.path}})},[s.assets]),h=(0,T.NY)(d).liveDataByNode,f=l.useMemo(function(){return(0,N.s)(s.assets,h)},[h,s.assets]),g=null===(r=s.assets.find(function(e){var n;return null===(n=e.definition)||void 0===n?void 0:n.repository}))||void 0===r?void 0:null===(n=r.definition)||void 0===n?void 0:n.repository,y=(0,W.kQ)((null==g?void 0:g.name)||"",(null==g?void 0:g.location.name)||""),w=(0,x.S)(),b=w.containerProps,C=w.viewport,_=d.length!==Object.keys(h).length,k=_?"":"0";return(0,t.jsx)(M.X2,{$height:o,$start:i,children:(0,t.jsxs)(H,{border:"bottom",children:[(0,t.jsx)(Cell,{children:(0,t.jsxs)(a.x,{flex:{direction:"row",justifyContent:"space-between",grow:1},children:[(0,t.jsxs)(a.x,{flex:{direction:"column",gap:2,grow:1},children:[(0,t.jsxs)(a.x,{flex:{direction:"row",gap:8},children:[(0,t.jsx)(m.JO,{name:"asset_group"}),s.groupName?(0,t.jsx)(O.rU,{style:{fontWeight:700},to:(0,$.$U)(y,"/asset-groups/".concat(s.groupName)),children:s.groupName}):B]}),(0,t.jsx)("div",(0,u._)((0,c._)({},b),{children:(0,t.jsx)(q,{maxWidth:C.width,children:(0,t.jsx)(F.b,{repoAddress:y,showRefresh:!1})})}))]}),(0,t.jsx)(a.x,{flex:{direction:"column",justifyContent:"center"},children:_?(0,t.jsx)(v.$,{purpose:"body-text"}):null})]})}),(0,t.jsx)(Cell,{children:f.missing.length?(0,t.jsx)(SelectOnHover,{assets:f.missing,getCount:function(e){var n=e.status;return n.case===A.KB.PARTITIONS_MISSING&&n.numMissing||0},adjective:"missing",children:(0,t.jsx)(j.V,{intent:"none",children:(0,t.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,t.jsx)("div",{style:{width:"12px",height:"12px",border:"2px solid ".concat(p.im()),borderRadius:"50%"}}),f.missing.length]})})}):k}),(0,t.jsx)(Cell,{children:f.failed.length?(0,t.jsx)(SelectOnHover,{assets:f.failed,getCount:function(e){var n=e.status;return n.case===A.KB.PARTITIONS_FAILED&&n.numFailed||0},adjective:"failed",children:(0,t.jsx)(j.V,{intent:"danger",children:(0,t.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,t.jsx)("div",{style:{width:0,height:0,borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderBottom:"10px solid red",display:"inline-block"}}),f.failed.length]})})}):k}),(0,t.jsx)(Cell,{children:f.inprogress.length?(0,t.jsx)(SelectOnHover,{assets:f.inprogress,getCount:function(e){var n=e.status;return n.case===A.KB.MATERIALIZING&&n.numMaterializing||0},adjective:"materializing",children:(0,t.jsx)(j.V,{intent:"primary",icon:"spinner",children:f.inprogress.length})}):k}),(0,t.jsx)(Cell,{children:f.successful.length?(0,t.jsx)(SelectOnHover,{assets:f.successful,getCount:function(e){var n=e.status;return n.case===A.KB.PARTITIONS_MATERIALIZED&&n.numMaterialized||0},adjective:"materialized",children:(0,t.jsx)(j.V,{intent:"success",children:(0,t.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,t.jsx)("div",{style:{backgroundColor:p.fA(),width:"10px",height:"10px",borderRadius:"50%"}}),f.successful.length]})})}):k})]})})}var H=(0,C.ZP)(a.x).withConfig({componentId:"sc-7533a281-0"})(_templateObject(),J),Cell=function(e){var n=e.children;return(0,t.jsx)(M.E5,{style:{color:p.Ep()},children:(0,t.jsx)(a.x,{flex:{direction:"row",alignItems:"center",grow:1},children:n})})},q=C.ZP.div.withConfig({componentId:"sc-7533a281-1"})(_templateObject1(),p.$(),function(e){var n=e.maxWidth;return n?"unset":"".concat(n,"px")});function SelectOnHover(e){var n=e.assets,r=e.children,o=e.getCount,i=e.adjective;return(0,t.jsx)(U,{children:(0,t.jsx)(g.P,{items:n,itemPredicate:function(e,n){return(0,S.ll)(n.asset.key).toLocaleLowerCase().includes(e.toLocaleLowerCase())},itemRenderer:function(e){var n=o(e);return(0,t.jsx)(D,{to:(0,I.p)(e.asset.key),target:"_blank",children:(0,t.jsx)(y.sN,{text:(0,t.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,t.jsx)("div",{style:{paddingLeft:"4px"},children:(0,t.jsx)(m.JO,{name:"asset"})}),(0,t.jsx)("div",{style:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:(0,S.ll)(e.asset.key)}),n&&n>0?(0,t.jsxs)(w.YS,{style:{color:p.$()},children:[(0,E._e)(n)," ",i]}):null]})},(0,S.ll)(e.asset.key))})},onItemSelect:function(){},children:r})})}var U=C.ZP.div.withConfig({componentId:"sc-7533a281-2"})(_templateObject2()),D=(0,C.ZP)(O.rU).withConfig({componentId:"sc-7533a281-3"})(_templateObject3()),K=r(2281),V=r(17131),Q=(0,r(53360).f)("OverviewPageAlerts"),G=r(56024),Z=r(58341),X=r(81966),Y=r(40049),OverviewTabs=function(e){var n=e.refreshState,r=e.tab,o=(0,X.dx)(),i=(0,Z.I)();return(0,t.jsxs)(a.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,t.jsxs)(G.mQ,{selectedTabId:r,children:[(0,t.jsx)(Y.f,{id:"activity",title:"Activity",to:"/overview/activity"}),(0,t.jsx)(Y.f,{id:"jobs",title:"Jobs",to:"/overview/jobs"}),(0,t.jsx)(Y.f,{id:"schedules",title:"Schedules",to:"/overview/schedules"}),(0,t.jsx)(Y.f,{id:"sensors",title:"Sensors",to:"/overview/sensors"}),"has-global-amp"===i?(0,t.jsx)(Y.f,{id:"amp",title:(0,t.jsxs)(a.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,t.jsx)("div",{children:"Auto-materialize"}),o.loading?(0,t.jsx)(v.$,{purpose:"body-text"}):(0,t.jsx)("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:!1===o.paused?p.L$():p.md()}})]}),to:"/overview/automation"}):null,(0,t.jsx)(Y.f,{id:"resources",title:"Resources",to:"/overview/resources"}),(0,t.jsx)(Y.f,{id:"backfills",title:"Backfills",to:"/overview/backfills"})]}),n?(0,t.jsx)(a.x,{padding:{bottom:8},children:(0,t.jsx)(k.xi,{refreshState:n})}):null]})},OverviewPageHeader=function(e){var n=e.tab,r=e.queryData,o=e.refreshState,i=(0,K._)(e,["tab","queryData","refreshState"]);return(0,t.jsx)(V.m,(0,c._)({title:(0,t.jsx)(w.X6,{children:"Overview"}),tabs:(0,t.jsxs)(a.x,{flex:{direction:"column",gap:8},children:[(0,t.jsx)(OverviewTabs,{tab:n,queryData:r,refreshState:o}),(0,t.jsx)(Q,{})]})},i))},ee=r(99596),en=r(64595),er=r(84022),et=r(83568),eo=r(35564),ei=r(15282),useHourWindow=function(e){var n=(0,l.useCallback)(function(n){switch(n){case"1":case"6":case"12":case"24":return n;default:return e}},[e]),r=(0,i._)((0,ei.U)("dagster.run-timeline-hour-window",n),2),t=r[0],o=r[1],s=(0,l.useCallback)(function(n){o(n||e)},[e,o]);return(0,l.useMemo)(function(){return[t,s]},[t,s])},es=r(87612),ea=r(82550),el=r(60138),ec=r(6315),eu=r(38917),ed=r(16413),eh=r(61935);function NextTick_templateObject(){var e=(0,d._)(["\n  fragment ScheduleFutureTicksFragment on Schedule {\n    id\n    executionTimezone\n    scheduleState {\n      id\n      status\n    }\n    futureTicks(cursor: $tickCursor, until: $ticksUntil) {\n      results {\n        timestamp\n      }\n    }\n  }\n"]);return NextTick_templateObject=function(){return e},e}var ev=(0,el.Ps)(NextTick_templateObject()),ef=r(44254);function useRunsForTimeline_templateObject(){var e=(0,d._)(["\n  query RunTimelineQuery(\n    $inProgressFilter: RunsFilter!\n    $terminatedFilter: RunsFilter!\n    $tickCursor: Float\n    $ticksUntil: Float\n  ) {\n    unterminated: runsOrError(filter: $inProgressFilter) {\n      ... on Runs {\n        results {\n          id\n          pipelineName\n          repositoryOrigin {\n            id\n            repositoryName\n            repositoryLocationName\n          }\n          ...RunTimeFragment\n        }\n      }\n    }\n    terminated: runsOrError(filter: $terminatedFilter) {\n      ... on Runs {\n        results {\n          id\n          pipelineName\n          repositoryOrigin {\n            id\n            repositoryName\n            repositoryLocationName\n          }\n          ...RunTimeFragment\n        }\n      }\n    }\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          name\n          loadStatus\n          displayMetadata {\n            key\n            value\n          }\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  name\n                  isJob\n                }\n                schedules {\n                  id\n                  name\n                  pipelineName\n                  scheduleState {\n                    id\n                    status\n                  }\n                  ...ScheduleFutureTicksFragment\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  ","\n  ","\n"]);return useRunsForTimeline_templateObject=function(){return e},e}var useRunsForTimeline=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,i._)(e,2),t=r[0],o=r[1],s=t/1e3,a=o/1e3,d=(0,h.a)(ep,{notifyOnNetworkStatusChange:!0,fetchPolicy:"no-cache",variables:{inProgressFilter:(0,u._)((0,c._)({},n),{statuses:[eh.VOA.CANCELING,eh.VOA.STARTED],createdBefore:a}),terminatedFilter:(0,u._)((0,c._)({},n),{statuses:Array.from(ec.cv),createdBefore:a,updatedAfter:s}),tickCursor:s,ticksUntil:a}}),v=d.data,f=d.previousData,p=d.loading&&!v,x=v||f||{},m=x.unterminated,j=x.terminated,g=x.workspaceOrError,y=(0,l.useMemo)(function(){var e={},n=Date.now();return(0,ea._)((null==m?void 0:m.__typename)==="Runs"?m.results:[]).concat((0,ea._)((null==j?void 0:j.__typename)==="Runs"?j.results:[])).forEach(function(r){if(r.startTime&&r.repositoryOrigin&&(0,ed.a)({start:t,end:o},{start:1e3*r.startTime,end:r.endTime?1e3*r.endTime:n})){var i=makeJobKey({name:r.repositoryOrigin.repositoryName,location:r.repositoryOrigin.repositoryLocationName},r.pipelineName);e[i]=(0,ea._)(e[i]||[]).concat([{id:r.id,status:r.status,startTime:1e3*r.startTime,endTime:r.endTime?1e3*r.endTime:n}])}}),e},[o,m,j,t]),w=(0,l.useMemo)(function(){if(!g||"Workspace"!==g.__typename)return[];var e=[],n=!0,r=!1,i=void 0;try{for(var s,a=g.locationEntries[Symbol.iterator]();!(n=(s=a.next()).done);n=!0)!function(){var n=s.value;if("WorkspaceLocationEntry"===n.__typename&&(null===(c=n.locationOrLoadError)||void 0===c?void 0:c.__typename)==="RepositoryLocation"){var r=Date.now(),i=!0,a=!1,l=void 0;try{for(var c,u,d=n.locationOrLoadError.repositories[Symbol.iterator]();!(i=(u=d.next()).done);i=!0)!function(){var i=u.value,s=(0,W.kQ)(i.name,n.locationOrLoadError.name),a=!0,l=!1,c=void 0;try{for(var d,h=i.pipelines[Symbol.iterator]();!(a=(d=h.next()).done);a=!0)!function(){var n=d.value,a=(i.schedules||[]).filter(function(e){return e.pipelineName===n.name}),l=[],c=!0,u=!1,h=void 0;try{for(var v,f=a[Symbol.iterator]();!(c=(v=f.next()).done);c=!0)!function(){var e=v.value;e.scheduleState.status===eh.ynu.RUNNING&&e.futureTicks.results.forEach(function(n){var i=n.timestamp,s=1e3*i;s>r&&(0,ed.a)({start:t,end:o},{start:s,end:s})&&l.push({id:"".concat(e.pipelineName,"-future-run-").concat(i),status:"SCHEDULED",startTime:s,endTime:s+5e3})})}()}catch(e){u=!0,h=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw h}}var p=(0,S.pv)(n.name),x=makeJobKey(s,n.name),m=p?"Ad hoc materializations":n.name,j=y[x]||[];if(l.length||j.length){var g=(0,ea._)(j).concat((0,ea._)(l));if(p){var w,b=e.find(function(e){return"asset"===e.jobType&&e.repoAddress===s});if(b)return(w=b.runs).push.apply(w,(0,ea._)(g))}e.push({key:x,jobName:m,jobType:p?"asset":"job",repoAddress:s,path:(0,$.jT)({repoName:s.name,repoLocation:s.location,pipelineName:n.name,isJob:n.isJob}),runs:(0,ea._)(j).concat((0,ea._)(l))})}}()}catch(e){l=!0,c=e}finally{try{a||null==h.return||h.return()}finally{if(l)throw c}}}()}catch(e){a=!0,l=e}finally{try{i||null==d.return||d.return()}finally{if(a)throw l}}}}()}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}var l=e.reduce(function(e,n){var r,t=n.runs.map(function(e){return e.startTime});return(0,u._)((0,c._)({},e),(0,es._)({},n.key,(r=Math).min.apply(r,(0,ea._)(t))))},{});return e.sort(function(e,n){return l[e.key]-l[n.key]})},[g,y,t,o]);return(0,l.useMemo)(function(){return{jobs:w,initialLoading:p,queryData:d}},[p,w,d])},makeJobKey=function(e,n){return"".concat(n,"-").concat((0,ef.Uz)(e))},ep=(0,el.Ps)(useRunsForTimeline_templateObject(),eu.$X,ev),ex=r(46988),hourWindowToOffset=function(e){switch(e){case"1":return 36e5;case"6":return 216e5;case"12":return 432e5;case"24":return 864e5}},OverviewTimelineRoot=function(e){var n=e.Header,r=e.TabButton;(0,R.Px)(),(0,z.j)("Overview | Timeline");var o=(0,et.se)("OverviewTimelineRoot"),c=l.useContext(ex.C5),u=c.allRepos,d=c.visibleRepos,h=(0,i._)(useHourWindow("12"),2),v=h[0],p=h[1],x=(0,i._)(l.useState(function(){return Date.now()}),2),m=x[0],j=x[1],g=(0,i._)(l.useState(function(){return 0}),2),y=g[0],w=g[1],b=(0,i._)((0,P.q)({queryKey:"search",defaults:{search:""}}),2),O=b[0],C=b[1];l.useEffect(function(){j(Date.now());var e=setInterval(function(){j(Date.now())},6e4);return function(){clearInterval(e)}},[v]);var _=l.useCallback(function(){w(function(e){return e-hourWindowToOffset(v)})},[v]),T=l.useCallback(function(){w(function(e){return e+hourWindowToOffset(v)})},[v]),A=l.useCallback(function(){w(0)},[]),S=l.useMemo(function(){return[m-36e5*Number(v)+y,m+36e5+y]},[v,m,y]),N=useRunsForTimeline(S),E=N.jobs,L=N.initialLoading,I=N.queryData,F=(0,k.C4)(I,k.dT);l.useEffect(function(){L||o.endTrace()},[L,o]);var M=l.useMemo(function(){var e=O.toLocaleLowerCase().trim(),n=d.flatMap(function(n){var r=(0,W.kQ)(n.repository.name,n.repositoryLocation.name);return n.repository.pipelines.filter(function(n){return n.name.toLocaleLowerCase().includes(e)}).map(function(e){return makeJobKey(r,e.name)})});return new Set(n)},[d,O]),$=l.useMemo(function(){return E.filter(function(e){var n=e.key;return M.has(n)})},[E,M]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n,{refreshState:F}),(0,t.jsxs)(a.x,{padding:{horizontal:24,vertical:16},flex:{alignItems:"center",justifyContent:"space-between"},children:[(0,t.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[(0,t.jsx)(r,{selected:"timeline"}),u.length>1&&(0,t.jsx)(er.C,{}),(0,t.jsx)(f.oi,{icon:"search",value:O,onChange:function(e){return C(e.target.value)},placeholder:"Filter by job name…",style:{width:"200px"}})]}),(0,t.jsxs)(a.x,{flex:{direction:"row",gap:16,alignItems:"center"},children:[(0,t.jsx)(ee.h,{activeItems:new Set([v]),buttons:[{id:"1",label:"1hr"},{id:"6",label:"6hr"},{id:"12",label:"12hr"},{id:"24",label:"24hr"}],onClick:function(e){return p(e)}}),(0,t.jsxs)(a.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,t.jsx)(s.zx,{onClick:_,children:"←"}),(0,t.jsx)(s.zx,{onClick:A,children:"Now"}),(0,t.jsx)(s.zx,{onClick:T,children:"→"})]})]})]}),(0,t.jsx)(en.S,{region:"timeline",children:(0,t.jsx)(eo.q,{loading:L,range:S,jobs:$})})]})},em=r(46928),OverviewActivityRoot=function(){(0,R.Px)(),(0,z.j)("Overview | Activity");var e=l.useCallback(function(e){var n=e.refreshState;return(0,t.jsx)(OverviewPageHeader,{tab:"activity",refreshState:n})},[]),n=(0,i._)((0,ei.U)("overview-activity-tab",function(e){return["timeline","assets"].includes(e)?e:"timeline"}),2),r=n[0],c=n[1],u=l.useCallback(function(e){var n=e.selected;return r!==n&&c(n),(0,t.jsxs)(s.zH,{children:[(0,t.jsx)(em.Q1,{$active:"timeline"===n,to:"/overview/activity/timeline",children:"Timeline"}),(0,t.jsx)(em.Q1,{$active:"assets"===n,to:"/overview/activity/assets",children:"Assets"})]})},[r,c]);return(0,t.jsx)(a.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:(0,t.jsxs)(o.rs,{children:[(0,t.jsx)(o.AW,{path:"/overview/activity/assets",children:(0,t.jsx)(OverviewAssetsRoot,{Header:e,TabButton:u})}),(0,t.jsx)(o.AW,{path:"/overview/activity/timeline",children:(0,t.jsx)(OverviewTimelineRoot,{Header:e,TabButton:u})}),(0,t.jsx)(o.AW,{path:"*",render:l.useCallback(function(){return"timeline"===r?(0,t.jsx)(o.l_,{to:"/overview/activity/timeline"}):(0,t.jsx)(o.l_,{to:"/overview/activity/assets"})},[r])})]})})},ej=r(9445),OverviewJobsRoot=function(){return(0,R.Px)(),(0,z.j)("Overview | Jobs"),(0,t.jsxs)(a.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,t.jsx)(V.m,{title:(0,t.jsx)(w.X6,{children:"Overview"}),tabs:(0,t.jsx)(OverviewTabs,{tab:"jobs"})}),(0,t.jsx)(ej.e,{})]})},eg=r(92364),ey=r(43180),ew=r(68884),eb=r(98319),eO=r(77277),eC=r(42885),e_=r(86839),OverviewResourcesTable=function(e){var n=e.repos,r=(0,l.useRef)(null),o=(0,l.useMemo)(function(){return n.map(function(e){var n=e.repoAddress;return(0,ef.Uz)(n)})},[n]),i=(0,eC.N)(ew.y,o),s=i.expandedKeys,a=i.onToggle,u=i.onToggleAll,d=(0,l.useMemo)(function(){var e=[];return n.forEach(function(n){var r=n.repoAddress,t=n.resources;e.push({type:"header",repoAddress:r,resourceCount:t.length});var o=(0,ef.Uz)(r);s.includes(o)&&t.forEach(function(n){e.push((0,c._)({type:"resource",repoAddress:r},n))})}),e},[n,s]),h=(0,eO.w)(n.map(function(e){return e.repoAddress.name})),v=(0,b.MG)({count:d.length,getScrollElement:function(){return r.current},estimateSize:function(e){var n=d[e];return(null==n?void 0:n.type)==="header"?32:64},overscan:10}),f=v.getTotalSize(),p=v.getVirtualItems();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eb.f,{}),(0,t.jsx)("div",{style:{overflow:"hidden"},children:(0,t.jsx)(M.W2,{ref:r,children:(0,t.jsx)(M.Nh,{$totalHeight:f,children:p.map(function(e){var n=e.index,r=e.key,o=e.size,i=e.start,l=d[n];return"header"===l.type?(0,t.jsx)(e_.vG,{repoAddress:l.repoAddress,height:o,start:i,onToggle:a,onToggleAll:u,expanded:s.includes((0,ef.Uz)(l.repoAddress)),showLocation:h.has(l.repoAddress.name),rightElement:(0,t.jsx)(ey.u,{content:1===l.resourceCount?"1 resource":"".concat(l.resourceCount," resources"),placement:"top",children:(0,t.jsx)(j.V,{children:l.resourceCount})})},r):(0,t.jsx)(eb.K,(0,c._)({height:o,start:i},l),r)})})})})]})},ek=r(44392),eR=r(89191),eT=r(91195),eA=r(76588),eS=r(58298);function OverviewResourcesRoot_templateObject(){var e=(0,d._)(["\n  query OverviewResourcesQuery {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                allTopLevelResourceDetails {\n                  id\n                  ...ResourceEntryFragment\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return OverviewResourcesRoot_templateObject=function(){return e},e}var OverviewResourcesRoot=function(){(0,R.Px)(),(0,z.j)("Overview | Resources");var e=(0,l.useContext)(ex.C5),n=e.allRepos,r=e.visibleRepos,o=e.loading,s=(0,i._)((0,P.q)({queryKey:"search",defaults:{search:""}}),2),c=s[0],u=s[1],d=n.length,x=(0,h.a)(eN,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),m=x.data,j=x.loading,g=(0,k.C4)(x,k.dT),y=(0,l.useMemo)(function(){var e=(0,eR.S)(r);return buildBuckets(m).filter(function(n){var r=n.repoAddress;return e.has((0,ef.Uz)(r))})},[m,r]),w=c.trim().toLocaleLowerCase(),b=w.length>0,O=(0,l.useMemo)(function(){var e=w.toLocaleLowerCase();return y.map(function(n){return{repoAddress:n.repoAddress,resources:n.resources.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})}}).filter(function(e){return e.resources.length>0})},[y,w]),C=o&&!d||j&&!m;return(0,t.jsxs)(a.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,t.jsx)(OverviewPageHeader,{tab:"resources",refreshState:g}),(0,t.jsxs)(a.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[d>1?(0,t.jsx)(er.C,{}):null,(0,t.jsx)(f.oi,{icon:"search",value:c,rightElement:C?(0,t.jsx)(eS.W,{tooltipContent:"Loading resources…"}):void 0,onChange:function(e){return u(e.target.value)},placeholder:"Filter by resource name…",style:{width:"340px"}})]}),j&&!d?(0,t.jsx)(a.x,{padding:64,children:(0,t.jsx)(v.$,{purpose:"page"})}):function(){if(j&&!m)return(0,t.jsx)(a.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,t.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,t.jsx)(v.$,{purpose:"body-text"}),(0,t.jsx)("div",{style:{color:p.$()},children:"Loading resources…"})]})});var e=n.length>r.length;return O.length?(0,t.jsx)(OverviewResourcesTable,{repos:O}):b?(0,t.jsx)(a.x,{padding:{top:20},children:(0,t.jsx)(eg.t,{icon:"search",title:"No matching resources",description:e?(0,t.jsxs)("div",{children:["No resources matching ",(0,t.jsx)("strong",{children:c})," were found in the selected code locations"]}):(0,t.jsxs)("div",{children:["No resources matching ",(0,t.jsx)("strong",{children:c})," were found in your definitions"]})})}):(0,t.jsx)(a.x,{padding:{top:20},children:(0,t.jsx)(eg.t,{icon:"search",title:"No resources",description:e?"No resources were found in the selected code locations":"No resources were found in your definitions"})})}()]})},buildBuckets=function(e){if((null==e?void 0:e.workspaceOrError.__typename)!=="Workspace")return[];var n=e.workspaceOrError.locationEntries.map(function(e){return e.locationOrLoadError}),r=[],t=!0,o=!1,i=void 0;try{for(var s,a=n[Symbol.iterator]();!(t=(s=a.next()).done);t=!0){var l=s.value;if((null==l?void 0:l.__typename)==="RepositoryLocation"){var c=!0,u=!1,d=void 0;try{for(var h,v=l.repositories[Symbol.iterator]();!(c=(h=v.next()).done);c=!0){var f=h.value,p=f.name,x=f.allTopLevelResourceDetails,m=(0,W.kQ)(p,l.name);x.length>0&&r.push({repoAddress:m,resources:x})}}catch(e){u=!0,d=e}finally{try{c||null==v.return||v.return()}finally{if(u)throw d}}}}}catch(e){o=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(o)throw i}}return(0,ek.S)(r)},eN=(0,el.Ps)(OverviewResourcesRoot_templateObject(),eT.B,eA.L),eE=r(71569),OverviewSchedulesRoot=function(){return(0,R.Px)(),(0,z.j)("Overview | Schedules"),(0,t.jsxs)(a.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,t.jsx)(OverviewPageHeader,{tab:"schedules"}),(0,t.jsx)(eE.z,{})]})},eL=r(57070),OverviewSensorsRoot=function(){return(0,R.Px)(),(0,z.j)("Overview | Sensors"),(0,t.jsxs)(a.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,t.jsx)(OverviewPageHeader,{tab:"sensors"}),(0,t.jsx)(eL.n,{})]})},eI=r(28888),ez=r(81967),eP=r(46032),AutomaterializationRoot=function(){var e=(0,Z.I)();switch(e){case"unknown":return(0,t.jsx)("div",{});case"has-global-amp":return(0,t.jsx)(GlobalAutomaterializationRoot,{});case"has-sensor-amp":return(0,t.jsx)(o.l_,{to:"/overview/sensors"});default:(0,eP.UT)(e)}},GlobalAutomaterializationRoot=function(){return(0,R.Px)(),(0,z.j)("Overview | Auto-materialize"),(0,t.jsxs)(eI.T,{children:[(0,t.jsx)(OverviewPageHeader,{tab:"amp"}),(0,t.jsx)(ez.$,{})]})},eF=r(95881),InstanceBackfillsRoot=function(){return(0,R.Px)(),(0,z.j)("Overview | Backfills"),(0,t.jsxs)(eI.T,{children:[(0,t.jsx)(OverviewPageHeader,{tab:"backfills"}),(0,t.jsx)(eF.A,{})]})},eM=r(42006),OverviewRoot=function(){return(0,t.jsxs)(o.rs,{children:[(0,t.jsx)(o.AW,{path:"/overview/activity",children:(0,t.jsx)(OverviewActivityRoot,{})}),(0,t.jsx)(o.AW,{path:"/overview/jobs",children:(0,t.jsx)(OverviewJobsRoot,{})}),(0,t.jsx)(o.AW,{path:"/overview/schedules",children:(0,t.jsx)(OverviewSchedulesRoot,{})}),(0,t.jsx)(o.AW,{path:"/overview/sensors",children:(0,t.jsx)(OverviewSensorsRoot,{})}),(0,t.jsx)(o.AW,{path:"/overview/automation",children:(0,t.jsx)(AutomaterializationRoot,{})}),(0,t.jsx)(o.AW,{path:"/overview/backfills/:backfillId",children:(0,t.jsx)(eM.t4,{})}),(0,t.jsx)(o.AW,{path:"/overview/backfills",exact:!0,children:(0,t.jsx)(InstanceBackfillsRoot,{})}),(0,t.jsx)(o.AW,{path:"/overview/resources",children:(0,t.jsx)(OverviewResourcesRoot,{})}),(0,t.jsx)(o.AW,{path:"*",render:function(){return(0,t.jsx)(o.l_,{to:"/overview/activity"})}})]})},eW=OverviewRoot}}]);
//# sourceMappingURL=795.fd7625bd6d4f4a68.js.map