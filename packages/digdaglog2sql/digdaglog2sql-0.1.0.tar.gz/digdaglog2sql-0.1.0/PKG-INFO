Metadata-Version: 2.1
Name: digdaglog2sql
Version: 0.1.0
Summary: Extract SQLs from digdag log
License: Apache-2.0
Author: Aki Ariga
Author-email: chezou@gmail.com
Maintainer: Aki Ariga
Maintainer-email: chezou@gmail.com
Requires-Python: >=3.8.1,<4.0.0
Classifier: License :: OSI Approved :: Apache Software License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Requires-Dist: click (>=8.1.3,<9.0.0)
Requires-Dist: cloup (>=0.14.0,<0.15.0)
Requires-Dist: taskipy (>=1.10.1,<2.0.0)
Requires-Dist: tdworkflow (>=0.8.3,<0.9.0)
Description-Content-Type: text/markdown

# digdaglog2sql

## Install

```sh
pip install --user digdaglog2sql
```

or,

```sh
$ python -m venv .venv
$ source .venv/bin/activate
(.venv)$ pip install digdaglog2sql
```

## Usage

```sh
$ digdaglog2sql --help
Usage: digdaglog2sql [OPTIONS]

Input log by file:
  --input FILENAME               Input file name of a workflow log. Use - for
                                 STDIN.

Download log by Session ID:
  --session-id INTEGER           Session ID of the target workflow.
  --site [us|jp|eu01|ap02|ap03]  Treasure Workflow site name.  [default: us]
  --endpoint TEXT                Digdag server endpoint.
  --http                         Enforce to use http schema.

Output:
  --output FILENAME              Output file name. Use - for STDOUT.  [required]

Other options:
  --drop-cdp-db                  If true, drop cdp_audience_xxx DB name.
  --help                         Show this message and exit.

Constraints:
  {--input, --session-id}  exactly 1 required
  {--site, --endpoint}     exactly 1 required if --session-id is set
  {--site, --http}         mutually exclusive
```

You can use log file on local environment.

```sh
digdaglog2sql --input workflow-log.txt --output output.sql
```

Or, you can use Session ID of Treasure Workflow.

```sh
digdaglog2sql --session-id 12345 --site us --output output.sql
```

Ensure set `TD_API_KEY` into environment variable.

